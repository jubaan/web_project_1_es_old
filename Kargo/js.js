/* ads.demo.kargo.com */
/*! Kargo AdTag - v6.37.0 [20220302] */(()=>{var __webpack_modules__={2043:(t,e,r)=>{(e=r(352)(!1)).push([t.id,"@supports (width:100vw){@media (max-width:320px){.kargo-ad-VAR_LOCAL_ID{left:50%;position:relative;transform:translateX(-50%);width:100vw}}}.kargo-ad-VAR_LOCAL_ID.kargo-ad-hidden{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner{line-height:0;position:relative;text-align:center}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.vast{height:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.vpaid{text-align:left}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-advertisement .kargo-banner-optout.kargo-branding-kargo,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-advertisement .kargo-banner-optout.kargo-branding-mobilized,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-none .kargo-banner-optout.kargo-branding-advertisement,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-none .kargo-banner-optout.kargo-branding-kargo,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-none .kargo-banner-optout.kargo-branding-mobilized{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-advertisement .kargo-banner-optout.kargo-branding-advertisement{display:inline-block!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-mobilized .kargo-banner-optout.kargo-branding-advertisement,.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-mobilized .kargo-banner-optout.kargo-branding-kargo{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner.kargo-banner--branding-mobilized .kargo-banner-optout.kargo-branding-mobilized{display:block!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout{left:0;position:absolute;text-decoration:none;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout>*{box-sizing:content-box!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-kargo{border-right:19px solid transparent;border-top:19px solid rgba(255,255,255,.85);display:inline-block;z-index:10004}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-kargo .kargo-svg-bolt{fill:#ff7500;height:11px;left:2px;position:absolute;top:-18px;width:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-mobilized{display:none!important;margin:0 auto;padding-left:5px;padding-top:20px;position:relative;top:-10px;z-index:2}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-mobilized .kargo-svg-bolt{fill:#ff7500;height:11px;width:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-mobilized .kargo-svg-mobilized{fill:#ababab;height:8px;padding:1.5px 0;width:121px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement{background-color:#585858;border:none;border-radius:50%;display:none!important;height:15px;width:15px;z-index:10004}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement .kargo-svg-advertisement{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement .kargo-svg-opt-out{fill:#fff;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement.above{background-color:transparent;padding-top:10px;position:relative;top:-5px;width:100px;z-index:2}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement.above .kargo-svg-advertisement{display:block}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.kargo-branding-advertisement.above .kargo-svg-opt-out{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.vpaid{z-index:10000}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.show{visibility:visible}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-banner-optout.hide{visibility:hidden}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast{height:100%;left:50%;opacity:1;position:absolute;transform:translate(-50%);width:300px;z-index:1000000000}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast.fade{opacity:0;transition:opacity .6s ease-in;z-index:1}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast .kargo-overlay-bolt{fill:#5e5e5e;display:none;height:58px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:40px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-overlay.vast .kargo-overlay-bolt.kargo{display:block}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content{display:inline-block;line-height:0;min-width:300px;position:relative}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.desktop{min-width:VAR_DESKTOP_WIDTHpx}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader{left:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader .svg-loader{height:39px;left:50%;padding:1px;position:absolute;top:50%;transform:translate3d(-20px,-50%,0);width:39px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.vpaid{display:block;margin:0 auto;text-align:center}@supports (width:100vw){.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.kargo-banner-width{display:block;left:50%;position:relative;transform:translateX(-50%);width:100vw}}@supports not (width:100vw){.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.kargo-banner-width{width:100%}}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.unfaded{opacity:.1}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.fade{opacity:1;transition:opacity .4s ease-in .2s}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.vast{display:block;height:auto;z-index:1000}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content.center-vertical{margin:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader{background-color:transparent;left:50%;position:absolute;transform:translate(-50%);visibility:hidden}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader.fade{background-color:#000;transition:background-color .4s ease-in;visibility:visible}.kargo-ad-VAR_LOCAL_ID .kargo-ad-banner .kargo-ad-content .kargo-loader svg{height:39px;left:50%;padding:1px;position:absolute;top:50%;transform:translate3d(-20px,-50%,0);width:39px}",""]),t.exports=e},7614:(t,e,r)=>{(e=r(352)(!1)).push([t.id,".kargo-ad-VAR_LOCAL_ID .kargo-ad-hover{-webkit-animation:slideUp 1.7s ease-in 1 forwards;animation:slideUp 1.7s ease-in 1 forwards;left:0;margin-bottom:VAR_HEIGHT_OFFSETpx;position:fixed;right:0;text-align:center;visibility:visible;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content{max-height:50px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content .kargo-ad-content{bottom:0;left:50%;position:absolute;transform:translate3d(-50%,0,0)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content .new-template{max-height:120px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--swipeup .kargo-hover-content .new-template-after-click{-webkit-animation:swipeUp .65s ease-in 1 forwards;animation:swipeUp .65s ease-in 1 forwards;max-height:460px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link{width:68px!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link .kargo-svg-ad,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link .kargo-svg-bolt,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link .kargo-svg-kargo,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-none .kargo-hover-link,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover:not(.kargo-hover--branding-advertisement) .kargo-hover-link .kargo-svg-advertisement{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--responsive .kargo-hover-content{max-width:428px;width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--responsive .kargo-ad-content{width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill{background-color:rgba(0,0,0,.65)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content{box-sizing:content-box!important;padding:5px 0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close{top:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close.unfilled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-link.unfilled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-nofill .kargo-hover-close.filled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-nofill .kargo-hover-link.filled{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top{-webkit-animation:slideUpTop 1.7s ease-in 1 forwards;animation:slideUpTop 1.7s ease-in 1 forwards;margin-top:VAR_HEIGHT_OFFSETpx}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-close{bottom:-16px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--wrapper-fill .kargo-hover-close{bottom:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link{bottom:-13px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-bolt{bottom:3px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-ad,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-kargo{bottom:0;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-advertisement{bottom:3px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-content{float:left;left:50%;min-height:50px;min-width:320px;position:relative;transform:translate(-50%);z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link{border-bottom:13px solid rgba(0,0,0,.65);border-left:13px solid transparent;border-right:13px solid transparent;bottom:0;box-sizing:content-box!important;position:absolute;right:26px;width:52px;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg{display:inline-block;position:absolute}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-bolt{fill:#ff7500;height:7px;left:4px;top:3px;width:5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-kargo{fill:#fff;height:14px;left:12px;width:26px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-ad{fill:#ff7500;height:14px;left:39px;width:11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-advertisement{fill:#aaa;height:7px;left:-1px;opacity:.75;top:4px;width:71px}@-webkit-keyframes slideUp{0%{bottom:0;padding-bottom:0;transform:translate3d(0,300px,0)}80%{bottom:0;padding-bottom:4px;transform:translateZ(0)}83%{bottom:0;padding-bottom:0;transform:translate3d(0,7px,0)}90%{bottom:0;padding-bottom:1px;transform:translateZ(0)}95%{bottom:-2px;padding-bottom:0;transform:translate3d(0,1px,0)}to{bottom:-1px;padding-bottom:0;transform:translateZ(0)}}@keyframes slideUp{0%{bottom:0;padding-bottom:0;transform:translate3d(0,300px,0)}80%{bottom:0;padding-bottom:4px;transform:translateZ(0)}83%{bottom:0;padding-bottom:0;transform:translate3d(0,7px,0)}90%{bottom:0;padding-bottom:1px;transform:translateZ(0)}95%{bottom:-2px;padding-bottom:0;transform:translate3d(0,1px,0)}to{bottom:-1px;padding-bottom:0;transform:translateZ(0)}}@-webkit-keyframes swipeUp{0%{bottom:0;max-height:120px}10%{bottom:0;max-height:154px}20%{bottom:0;max-height:188px}30%{bottom:0;max-height:222px}40%{bottom:0;max-height:256px}50%{bottom:0;max-height:290px}60%{bottom:0;max-height:324px}70%{bottom:0;max-height:392px}80%{bottom:-2px;max-height:426px}90%{bottom:0;max-height:450px}to{bottom:-1px;max-height:460px}}@keyframes swipeUp{0%{bottom:0;max-height:120px}10%{bottom:0;max-height:154px}20%{bottom:0;max-height:188px}30%{bottom:0;max-height:222px}40%{bottom:0;max-height:256px}50%{bottom:0;max-height:290px}60%{bottom:0;max-height:324px}70%{bottom:0;max-height:392px}80%{bottom:-2px;max-height:426px}90%{bottom:0;max-height:450px}to{bottom:-1px;max-height:460px}}@-webkit-keyframes slideUpTop{0%{padding-top:0;top:0;transform:translate3d(0,-300px,0)}80%{padding-top:4px;top:0;transform:translateZ(0)}83%{padding-top:0;top:0;transform:translate3d(0,-7px,0)}90%{padding-top:1px;top:0;transform:translateZ(0)}95%{padding-top:0;top:-2px;transform:translate3d(0,-1px,0)}to{padding-top:0;top:-1px;transform:translateZ(0)}}@keyframes slideUpTop{0%{padding-top:0;top:0;transform:translate3d(0,-300px,0)}80%{padding-top:4px;top:0;transform:translateZ(0)}83%{padding-top:0;top:0;transform:translate3d(0,-7px,0)}90%{padding-top:1px;top:0;transform:translateZ(0)}95%{padding-top:0;top:-2px;transform:translate3d(0,-1px,0)}to{padding-top:0;top:-1px;transform:translateZ(0)}}",""]),t.exports=e},6763:(t,e,r)=>{(e=r(352)(!1)).push([t.id,".kargo-ad-VAR_LOCAL_ID.kargo-ad-hidden{display:none}.kargo-ad-VAR_LOCAL_ID.kargo-ad-preload{display:block}.kargo-ad-VAR_LOCAL_ID.kargo-ad-preload .kargo-ad-hover{-webkit-animation:none!important;animation:none!important;left:-999px;right:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover{-webkit-animation:slideUp 1.7s ease-in 1 forwards;animation:slideUp 1.7s ease-in 1 forwards;left:0;margin-bottom:VAR_HEIGHT_OFFSETpx;position:fixed;right:0;text-align:center;visibility:visible;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link{width:68px!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link .kargo-svg-ad,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link .kargo-svg-bolt,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-advertisement .kargo-hover-link .kargo-svg-kargo,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--branding-none .kargo-hover-link,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover:not(.kargo-hover--branding-advertisement) .kargo-hover-link .kargo-svg-advertisement{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--responsive .kargo-hover-content{max-width:428px;width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill{background-color:rgba(0,0,0,.65)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content{box-sizing:content-box!important;padding:5px 0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-content.kargo-desktop-hover{width:728px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close{top:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-close.unfilled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-fill .kargo-hover-link.unfilled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-nofill .kargo-hover-close.filled,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--wrapper-nofill .kargo-hover-link.filled{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top{-webkit-animation:slideUpTop 1.7s ease-in 1 forwards;animation:slideUpTop 1.7s ease-in 1 forwards;margin-top:VAR_HEIGHT_OFFSETpx}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-close{bottom:-16px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--wrapper-fill .kargo-hover-close{bottom:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link{bottom:-13px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-bolt{bottom:3px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-ad,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-kargo{bottom:0;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-advertisement{bottom:3px;top:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--videoanchor{z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--breakout .kargo-hover-content{max-height:50px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--breakout .kargo-hover-content .kargo-ad-content{bottom:0;left:50%;position:absolute;transform:translate3d(-50%,0,0)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--breakout.kargo-hover--wrapper-fill .kargo-ad-content{bottom:5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-triplex-execution{bottom:0;max-width:428px;position:fixed;width:100%}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-triplex-execution .kargo-hover-close{top:-13px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right{pointer-events:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left.kargo-hover--align-right .kargo-hover-content,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right.kargo-hover--align-right .kargo-hover-content{float:right}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left .kargo-hover-content,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right .kargo-hover-content{left:auto;min-width:VAR_SIDEKICK_WIDTHpx;pointer-events:auto;right:auto;transform:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left.kargo-hover--top .kargo-hover-link,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right.kargo-hover--top .kargo-hover-link{bottom:auto!important;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--one-sec-interstitial{-webkit-animation:none;animation:none;opacity:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--one-sec-interstitial.is-loaded{-webkit-animation:slideUp 1.7s ease-in 1 forwards;animation:slideUp 1.7s ease-in 1 forwards;opacity:1}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--prevent-close .kargo-hover-close{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky{-webkit-animation:none!important;animation:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky.kargo-hover--wrapper-fill{background-color:#fff}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content{padding:9px 0 5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout{border-right:19px solid transparent;border-top:19px solid rgba(255,255,255,.85);display:inline-block;left:0;position:absolute;text-decoration:none;top:9px;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout .kargo-svg-opt-out{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout .kargo-svg-bolt{fill:#ff7500;height:11px;left:2px;position:absolute;top:-18px;width:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout>*{box-sizing:content-box!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement{background-color:#585858;border:none;border-radius:50%;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-bolt{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--amp-sticky .kargo-hover-content .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-opt-out{fill:#fff;display:block;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover:not(.kargo-hover--amp-sticky) .kargo-hover-optout{display:none!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-content{float:left;left:50%;min-height:50px;min-width:320px;position:relative;transform:translate(-50%);z-index:2147483641}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link{border-bottom:13px solid rgba(0,0,0,.65);border-right:13px solid transparent;box-sizing:content-box!important;left:0;position:absolute;top:-13px;width:52px;z-index:2147483640}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding{border-left:13px solid transparent!important;border-right:13px solid transparent!important;margin:auto!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding.kargo-breakaway-branding{right:26px!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-sidekick-branding:not(.kargo-breakaway-branding){left:0!important;right:0!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.kargo-triplex-execution{border-bottom:13px solid rgba(0,0,0,.65);border-left:13px solid transparent;border-right:13px solid transparent;bottom:0;left:auto;position:absolute;right:26px;top:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link.hide{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg{display:inline-block;position:absolute}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-bolt{fill:#ff7500;height:7px;left:4px;top:3px;width:5px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-kargo{fill:#fff;height:14px;left:12px;width:26px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-ad{fill:#ff7500;height:14px;left:39px;width:11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-link svg.kargo-svg-advertisement{fill:#aaa;height:7px;left:-1px;opacity:.75;top:4px;width:71px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close{background-color:#585858;border-radius:50%;height:24px;position:absolute;right:5px;top:-13px;width:24px;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.expanded{right:10px;top:10px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.hide{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close .kargo-svg-close,.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close .kargo-svg-close-no-border{fill:#fff;height:24px;left:0;position:absolute;width:24px;z-index:2147483639}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close .kargo-svg-close-no-border{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close.kargo-hover-filled{top:-11px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-hover-close-progress{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right:not(.kargo-hover--videoanchor) .kargo-hover-link{border-left:13px solid transparent;border-right:none;bottom:0;left:auto;right:0;top:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-right:not(.kargo-hover--videoanchor).kargo-sidekick-branding{border-right:13px solid transparent!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left .kargo-hover-close{left:5px!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--align-left .kargo-hover-link{bottom:0;left:0;right:auto;top:auto}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--branding-advertisement .kargo-hover-link .kargo-advertisement{top:-8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link{border-bottom:none;border-right:13px solid transparent;border-top:13px solid rgba(0,0,0,.65)}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link.kargo-sidekick-branding{border-left:13px solid transparent!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-svg-bolt{top:-10px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-kargo{left:11px;top:-13px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top .kargo-hover-link .kargo-ad{left:38px;top:-13px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-right .kargo-hover-link{border-right:none;left:auto;right:0;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-right .kargo-hover-link.kargo-sidekick-branding{border-right:13px solid transparent!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-right .kargo-hover-link .kargo-advertisement{top:-8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-left .kargo-hover-link{left:0;top:0}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover.kargo-hover--top.kargo-hover--align-left .kargo-advertisement{top:-8px}@-webkit-keyframes slideUp{0%{bottom:0;padding-bottom:0;transform:translate3d(0,300px,0)}80%{bottom:0;padding-bottom:4px;transform:translateZ(0)}83%{bottom:0;padding-bottom:0;transform:translate3d(0,7px,0)}90%{bottom:0;padding-bottom:1px;transform:translateZ(0)}95%{bottom:-2px;padding-bottom:0;transform:translate3d(0,1px,0)}to{bottom:-1px;padding-bottom:0;transform:translateZ(0)}}@keyframes slideUp{0%{bottom:0;padding-bottom:0;transform:translate3d(0,300px,0)}80%{bottom:0;padding-bottom:4px;transform:translateZ(0)}83%{bottom:0;padding-bottom:0;transform:translate3d(0,7px,0)}90%{bottom:0;padding-bottom:1px;transform:translateZ(0)}95%{bottom:-2px;padding-bottom:0;transform:translate3d(0,1px,0)}to{bottom:-1px;padding-bottom:0;transform:translateZ(0)}}@-webkit-keyframes slideUpTop{0%{padding-top:0;top:0;transform:translate3d(0,-300px,0)}80%{padding-top:4px;top:0;transform:translateZ(0)}83%{padding-top:0;top:0;transform:translate3d(0,-7px,0)}90%{padding-top:1px;top:0;transform:translateZ(0)}95%{padding-top:0;top:-2px;transform:translate3d(0,-1px,0)}to{padding-top:0;top:-1px;transform:translateZ(0)}}@keyframes slideUpTop{0%{padding-top:0;top:0;transform:translate3d(0,-300px,0)}80%{padding-top:4px;top:0;transform:translateZ(0)}83%{padding-top:0;top:0;transform:translate3d(0,-7px,0)}90%{padding-top:1px;top:0;transform:translateZ(0)}95%{padding-top:0;top:-2px;transform:translate3d(0,-1px,0)}to{padding-top:0;top:-1px;transform:translateZ(0)}}",""]),t.exports=e},6382:(t,e,r)=>{(e=r(352)(!1)).push([t.id,".kargo-ad-VAR_LOCAL_ID.kargo-ad-hidden{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover{position:relative;text-align:center}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content{display:inline-block;line-height:0;position:relative}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout{border-right:19px solid transparent;border-top:19px solid rgba(255,255,255,.85);display:inline-block;left:0;position:absolute;text-decoration:none;top:0;z-index:2147483642}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout .kargo-svg-opt-out{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout .kargo-svg-bolt{fill:#ff7500;height:11px;left:2px;position:absolute;top:-18px;width:8px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout>*{box-sizing:content-box!important}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement{background-color:#585858;border:none;border-radius:50%;height:15px;width:15px}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-bolt{display:none}.kargo-ad-VAR_LOCAL_ID .kargo-ad-hover .kargo-ad-content .kargo-hover-optout.kargo-hover--branding-advertisement .kargo-svg-opt-out{fill:#fff;display:block;height:15px;width:15px}",""]),t.exports=e},3604:(t,e,r)=>{t.exports='<div class="kargo-ad-banner VAR_VAST VAR_BRANDING"> <div class="kargo-overlay VAR_VAST VAR_BOLT"></div> <a class="kargo-banner-optout kargo-branding-mobilized VAR_VAST" href=https://www.kargo.com/privacy target=_blank> '+r(8828)+" "+r(3891)+' </a> <div class="kargo-ad-content VAR_VAST VAR_FADE VAR_WIDTH"> <a class="kargo-banner-optout kargo-branding-kargo VAR_VAST" href=https://www.kargo.com/privacy target=_blank> '+r(8828)+' </a> <a class="kargo-banner-optout kargo-branding-advertisement VAR_ABOVE VAR_VAST" href=https://www.kargo.com/privacy target=_blank> '+r(9709)+" "+r(5483)+' </a> <div class="kargo-loader VAR_SHOW"> '+r(8601)+" </div> </div> </div> "},2685:(t,e,r)=>{t.exports='<div class="kargo-ad-hover kargo-hover--swipeup VAR_HUG_SIDE VAR_WRAPPER_FILL VAR_HORIZONTAL_ALIGN VAR_BRANDING VAR_WIDTH"> <div class="kargo-hover-close-progress unfilled"></div> <div class=kargo-hover-content> <a class="kargo-hover-link unfilled" href=https://www.kargo.com/privacy target=_blank> '+r(8828)+" "+r(1481)+" "+r(3366)+" "+r(5483)+' </a> <div class="kargo-hover-close-progress unfilled"></div> <div class=kargo-ad-content></div> </div> </div> '},9153:t=>{t.exports='<div class="kargo-ad-hover VAR_HUG_SIDE VAR_SHOW_KARGO_LOGO_TAG VAR_WRAPPER_FILL VAR_PREVENT_CLOSE VAR_HORIZONTAL_ALIGN VAR_FORMAT VAR_BRANDING VAR_VERTICAL_ALIGN VAR_WIDTH VAR_AMP_MODE"> <div class=kargo-hover-content> <div class=kargo-ad-content> </div> </div> </div> '},206:(t,e,r)=>{t.exports='<div class="kargo-ad-hover VAR_HUG_SIDE VAR_SHOW_KARGO_LOGO_TAG VAR_WRAPPER_FILL VAR_PREVENT_CLOSE VAR_HORIZONTAL_ALIGN VAR_FORMAT VAR_BRANDING VAR_VERTICAL_ALIGN VAR_WIDTH VAR_AMP_MODE VAR_TRIPLEX"> <a class="kargo-hover-link filled" href=https://www.kargo.com/privacy target=_blank> '+r(8828)+" "+r(1481)+" "+r(3366)+" "+r(5483)+' </a> <a class="kargo-hover-close filled"> '+r(1962)+" "+r(654)+' </a> <div class="kargo-hover-close-progress filled"></div> <div class="kargo-hover-content VAR_DESKTOP_HOVER"> <a class="kargo-hover-link unfilled VAR_SIDEKICK_BRANDING VAR_TRIPLEX" href=https://www.kargo.com/privacy target=_blank> '+r(8828)+" "+r(1481)+" "+r(3366)+" "+r(5483)+' </a> <a class="kargo-hover-close unfilled"> '+r(1962)+" "+r(654)+' </a> <div class="kargo-hover-close-progress unfilled"></div> <div class=kargo-ad-content> <a class="kargo-hover-optout VAR_BRANDING" href=https://www.kargo.com/privacy target=_blank> '+r(8828)+" "+r(9709)+" </a> </div> </div> </div> "},1674:(t,e,r)=>{t.exports='<div class="kargo-ad-hover VAR_BRANDING"> <div class=kargo-ad-content> <a class="kargo-hover-optout VAR_BRANDING" href=https://www.kargo.com/privacy target=_blank> '+r(8828)+" "+r(9709)+" </a> </div> </div> "},3366:t=>{t.exports='<svg class=kargo-svg-ad xmlns=http://www.w3.org/2000/svg viewBox="0 0 19.12515 9.3"> <path d=M76.27491,9.64583H70.92053L70.20365,11.2H68.543l4.318-9.3h1.47451l4.317,9.3H76.99179ZM71.62537,8.13149H75.571L73.59077,3.88022Z transform="translate(-68.54297 -1.9)"/> <path d=M83.07138,1.9a4.49729,4.49729,0,0,1,4.59674,4.65046A4.49706,4.49706,0,0,1,83.07138,11.2H79.78984V1.9Zm0,1.51527H81.30418V9.68566h1.76719a2.99316,2.99316,0,0,0,3.08147-3.13519A2.99316,2.99316,0,0,0,83.07138,3.41527Z transform="translate(-68.54297 -1.9)"/> </svg> '},5483:t=>{t.exports='<svg class=kargo-svg-advertisement xmlns=http://www.w3.org/2000/svg viewBox="0 0 108.96143 12.34375"> <text transform="translate(0 8.58)" font-size=10 fill=#AAAAAA font-family="Arial-BoldMT, Arial" font-weight=700 letter-spacing=.18em>ADVERTISEMENT</text> </svg> '},8828:t=>{t.exports='<svg class=kargo-svg-bolt xmlns=http://www.w3.org/2000/svg viewBox="0 0 12.93951 18.88957"> <path d="M12.94 7.948H7.682L10.589 0 0 10.941h5.257L2.35 18.89 12.94 7.948z"/> </svg> '},654:t=>{t.exports='<svg class=kargo-svg-close-no-border xmlns=http://www.w3.org/2000/svg viewBox="0 0 48 48"> <path d="M31.75 32.75a.997.997 0 0 1-.707-.293l-15.75-15.75a1 1 0 0 1 1.414-1.414l15.75 15.75a1 1 0 0 1-.707 1.707z"/> <path d="M16 32.75a1 1 0 0 1-.707-1.707l15.75-15.75a1 1 0 0 1 1.414 1.414l-15.75 15.75a.997.997 0 0 1-.707.293z"/> </svg> '},1962:t=>{t.exports='<svg class=kargo-svg-close xmlns=http://www.w3.org/2000/svg viewBox="0 0 48 48"> <path d="M24 2A22 22 0 1 1 2 24 22.025 22.025 0 0 1 24 2m0-2a24 24 0 1 0 24 24A24 24 0 0 0 24 0z"/> <path d="M31.75 32.75a.997.997 0 0 1-.707-.293l-15.75-15.75a1 1 0 0 1 1.414-1.414l15.75 15.75a1 1 0 0 1-.707 1.707z"/> <path d="M16 32.75a1 1 0 0 1-.707-1.707l15.75-15.75a1 1 0 0 1 1.414 1.414l-15.75 15.75a.997.997 0 0 1-.707.293z"/> </svg> '},1481:t=>{t.exports='<svg class=kargo-svg-kargo xmlns=http://www.w3.org/2000/svg viewBox="0 0 49.39232 9.3"> <path d=M60.35,8.875A2.27506,2.27506,0,0,1,58.12187,6.55a2.23014,2.23014,0,1,1,4.45625,0A2.27506,2.27506,0,0,1,60.35,8.875m0-6.975A4.651,4.651,0,0,0,55.7,6.55a4.65,4.65,0,0,0,9.3,0A4.651,4.651,0,0,0,60.35,1.9Z transform="translate(-15.60768 -1.9)"/> <polyline points="9.09 0.008 6.06 0.008 2.525 4.149 2.525 0.008 0 0.008 0 9.3 2.525 9.3 2.525 7.482 3.838 5.967 6.06 9.3 9.09 9.3 5.555 4.048 9.09 0.008"/> <path d=M51.52188,8.97188H51.0375c-2.13125,0-2.7125-1.06563-2.7125-2.325h0a2.18394,2.18394,0,0,1,2.325-2.325,3.27318,3.27318,0,0,1,1.9375.58125L53.75,2.86875A5.36049,5.36049,0,0,0,50.65,1.9,4.651,4.651,0,0,0,46,6.55h0c0,2.51875,1.84063,4.65,5.0375,4.65a11.36874,11.36874,0,0,0,2.80938-.29063V6.55h-2.325V8.97188 transform="translate(-15.60768 -1.9)"/> <path d=M29.48955,7.83026,30.6128,5.0732,31.736,7.83026h-2.2465m2.14438-5.92258H29.48955L25.405,11.2h2.75706l.61268-1.42959h3.98242L33.36986,11.2h2.75706L32.04239,1.90768Z transform="translate(-15.60768 -1.9)"/> <path d=M41.20929,6.09433h-1.838V4.15418h1.838a.9152.9152,0,0,1,.919.919.889.889,0,0,1-.919,1.02113M44.68114,5.0732a3.18145,3.18145,0,0,0-3.16551-3.16552H36.81841V11.2h2.55284V8.23871H40.4945L42.33254,11.2h2.85917l-2.2465-3.36974A2.90723,2.90723,0,0,0,44.68114,5.0732Z transform="translate(-15.60768 -1.9)"/> </svg> '},8601:t=>{t.exports='<svg class=kargo-svg-loader xmlns=http://www.w3.org/2000/svg width=39 height=39 viewBox="0 0 39 39" stroke=#fff> <g transform="translate(1 1)" stroke-width=3 fill=none fill-rule=evenodd> <circle stroke-opacity=.5 cx=18.5 cy=18.5 r=18 stroke=#dee2e6 /> <path d="M36.473 19.65C37.08 9.664 29.536 1.13 19.65.527" stroke=#FF7500> <animateTransform attributeName=transform type=rotate from="0 18.5 18.5" to="360 18.5 18.5" dur=1s repeatCount=indefinite /> </path> </g> </svg> '},3891:t=>{t.exports='<svg class=kargo-svg-mobilized viewBox="0 0 221 14" xmlns=http://www.w3.org/2000/svg> <path d="M13.3.7v12.8h-3v-7l-2.6 4.7H5.8L3.2 6.5v7h-3V.7h3l3.5 6.8h.1L10.3.7h3zm3.3 6.4c0-3.8 2.7-6.6 6.6-6.6 3.8 0 6.6 2.7 6.6 6.6 0 3.9-2.7 6.6-6.6 6.6-3.9-.1-6.6-2.8-6.6-6.6zm10 0c0-2.1-1.4-3.8-3.4-3.8S19.8 5 19.8 7.1c0 2.1 1.4 3.8 3.4 3.8 1.9-.1 3.4-1.7 3.4-3.8zm13.6-.5c1.7.5 2.5 1.7 2.5 3.2 0 2.1-1.3 3.6-4.1 3.6H33V.7h4.8C40.6.7 42 1.9 42 3.8c0 1.1-.4 2.2-1.8 2.8zM36 5.8h1.4c.9 0 1.6-.4 1.6-1.2 0-.7-.5-1.2-1.7-1.2H36v2.4zm3.6 3.7c0-.8-.6-1.4-1.9-1.4H36v2.7h1.7c1.1 0 1.9-.4 1.9-1.3zM46.3.7h3v12.8h-3V.7zm7.2 0h3v10.1h5.4v2.7h-8.4V.7zM65 .7h3v12.8h-3V.7zm10.4 10l5.7.1v2.7h-9.5v-2.3L77 3.4h-5.3V.7h9.4V3l-5.7 7.7zm9-10h8.3v2.7h-5.4v2.5h4.3v2.6h-4.3v2.3h5.8v2.7h-8.7V.7zm12 0h4.4c4.1 0 6.6 2.6 6.6 6.4 0 3.8-2.4 6.4-6.6 6.4h-4.5V.7h.1zm4.3 10.1c2.2 0 3.6-1.6 3.6-3.7s-1.5-3.7-3.4-3.7h-1.5v7.4h1.3zm23.2-4.2c1.7.5 2.5 1.7 2.5 3.2 0 2.1-1.3 3.6-4.1 3.6h-5.6V.7h4.8c2.8 0 4.2 1.2 4.2 3.1 0 1.1-.5 2.2-1.8 2.8zm-4.3-.8h1.4c.9 0 1.6-.4 1.6-1.2 0-.7-.5-1.2-1.7-1.2h-1.3v2.4zm3.6 3.7c0-.8-.6-1.4-1.9-1.4h-1.7v2.7h1.7c1.2 0 1.9-.4 1.9-1.3zM139.5.7l-4.2 7.2v5.6h-3.1V7.9L128 .7h3.4l2.2 4.2h.1l2.2-4.2h3.6zm74.7 9.7c-1.8 0-3.2-1.5-3.2-3.3 0-1.8 1.4-3.3 3.2-3.3 1.8 0 3.2 1.5 3.2 3.3 0 1.8-1.4 3.3-3.2 3.3zm0-10a6.7 6.7 0 1 0 0 13.4 6.7 6.7 0 0 0 0-13.4zm-53.9.3h-4.2l-4.8 5.7V.7h-3.5v12.7h3.5V11l1.8-2.1 3.1 4.5h4.2l-4.9-7.2 4.8-5.5zm40.5 9.8h-.7c-3 0-3.9-1.6-3.9-3.4 0-1.8 1.1-3.4 3.3-3.4 1.1 0 2 .3 2.8.8l1.7-2.7c-1.3-.8-2.7-1.4-4.5-1.4-3.7 0-6.7 3-6.7 6.7 0 3.6 2.7 6.7 7.3 6.7 1.8 0 2.8-.1 4.1-.4V7.1h-3.3v3.4h-.1zm-33.4-1.7l1.5-3.8 1.6 3.8h-3.1zm2.9-8.1h-2.9l-5.6 12.7h3.7l.8-1.9h5.4l.8 1.9h3.7L170.6.7h-.3zm14.6 5.7h-2.5V3.7h2.5c.7 0 1.3.6 1.3 1.3 0 .8-.6 1.4-1.3 1.4zm4.7-1.4c0-2.4-1.9-4.3-4.3-4.3h-6.4v12.7h3.5V9.3h1.5l2.5 4.1h3.9l-3-4.6c1.4-.7 2.3-2.1 2.3-3.8z"/> </svg> '},9709:t=>{t.exports='<svg class=kargo-svg-opt-out xmlns=http://www.w3.org/2000/svg viewBox="0 0 22 22"> <rect x=9.528 y=10.141 width=2.943 height=7.679 rx=1.472 ry=1.472 /> <circle cx=11 cy=6.076 r=1.897 /> <path d="M11 1.897A9.103 9.103 0 1 1 1.897 11 9.114 9.114 0 0 1 11 1.897M11 0a11 11 0 1 0 11 11A11 11 0 0 0 11 0z"/> </svg> '},107:(t,e,r)=>{t.exports=r(2390)},9666:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function convertNodeListToArray(t){return Array.prototype.slice.call(t)}function convertStringToFunction(str){return eval("(function() {"+str+"})")}function executeStringFunction(t,e){return convertStringToFunction(e).apply(t)}function escapeRegexString(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function fireCallbacks(t,e,r){void 0===r&&(r=[]);for(var i=0;i<e.length;i+=1)e[i].apply(t,r)}function getSafeWindowVar(t,e){var r=null;if(t&&e&&e.length){r=t;for(var i=e.split("."),n=0;n<i.length;n++)try{if(!r.hasOwnProperty(i[n])){r=null;break}r=r[i[n]]}catch(t){return null}}return r}function generateUUID(t){var e;e=t.crypto&&t.crypto.getRandomValues?function(){var e=new Uint32Array(4),r=new Array(16);t.crypto.getRandomValues(e);for(var i=0;i<16;i++)r[i]=e[i>>2]>>>8*(3&i)&255;return r}:function(){var e=0,r=new Array(16),i=new PRNG(function(){var e,r,i,n,o,a;for(o=[],r=i=0,n=(a=(new Date).getTime()+Math.random().toString()+t.location.href+t.document.cookie).length;i<n;r=++i)e=a[r],o.push(e.charCodeAt(0));return o}()),n=0;for(n=0;n<16;n++)e=68719476736*i.random(),r[n]=e>>>((3&n)<<3)&255;return r};for(var r=[],i=0;i<256;i++)r[i]=(i+256).toString(16).substr(1);var n=e();n[6]=15&n[6]|64,n[8]=63&n[8]|128;var o=function(t){var e=0,i=r;return i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]}(n);return o}function isArray(t){return t&&"[object Array]"===Object.prototype.toString.call(t)}function isDocument(t){return!(!t||!t.nodeType||9!==t.nodeType)}function isElement(t){return!(!t||!t.nodeType||1!==t.nodeType)}function isFunction(t){return t&&"[object Function]"===Object.prototype.toString.call(t)}function isObject(t){return t&&t===Object(t)&&!isArray(t)&&!isFunction(t)}function isWindow(t){return!!(t&&t.document&&t.location&&t.alert&&t.setInterval)}function getObjectSize(t){var e=0;if(isObject(t))for(var r in t)t.hasOwnProperty(r)&&e++;return e}function leftPad(t,e,r){for(t+="";t.length<e;)t=r+t;return t}function merge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!1!==arguments[arguments.length-1],i=function(t,e){if("object"!=typeof e||null===e)return t;if(!isElement(e)&&!isWindow(e)&&!isDocument(e))for(var n in e){var o=e[n];e.hasOwnProperty(n)&&void 0!==o&&(!r&&t[n]||(isElement(o)||isWindow(o)||isDocument(o)||"object"!=typeof o||null===o?t[n]=o:"object"!=typeof t[n]||null===t[n]?t[n]=i(Array.isArray(o)?[]:{},o):Array.isArray(t[n])&&Array.isArray(o)?t[n]=t[n].concat(o):i(t[n],o)))}return t},n=arguments[0]||{};if(!n||n!==Object(n))return n;for(var o=1;o<arguments.length;o++)i(n,arguments[o]);return n}function spliceString(t,e,r){return t.slice(0,r)+e+t.slice(r,t.length)}function safeStringReplace(t,e,r){return"string"!=typeof r?t.replace(e,r):t.replace(e,r.replace(/\$/g,"$$$$"))}function setIntervalWithTimeout(t,e,r,i){var n=!1,o=t.setInterval((function(){n?t.clearInterval(o):e()}),r);return t.setTimeout((function(){n=!0}),i),o}__webpack_require__.d(__webpack_exports__,{GK:()=>getSafeWindowVar,kJ:()=>isArray,TS:()=>merge})},4686:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Bg:()=>executeStringFunction,h1:()=>replaceSmartCharacters,uw:()=>escapeRegexString,if:()=>fireCallbacks,GK:()=>getSafeWindowVar,DO:()=>generateUUID,kJ:()=>isArray,U5:()=>getObjectSize,c:()=>leftPad,TS:()=>merge,XM:()=>spliceString,PY:()=>safeStringReplace});var _prng__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5224);function convertNodeListToArray(t){return Array.prototype.slice.call(t)}function convertStringToFunction(str){return eval("(function() {"+str+"})")}function executeStringFunction(t,e){return convertStringToFunction(e).apply(t)}function replaceSmartCharacters(t){return t.replace(/[\u2018\u2019]/g,"'").replace(/[\u201c\u201d]/g,'"').replace(/[\u2014]/g,"--")}function escapeRegexString(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function fireCallbacks(t,e,r){void 0===r&&(r=[]);for(var i=0;i<e.length;i+=1)e[i].apply(t,r)}function getSafeWindowVar(t,e){var r=null;if(t&&e&&e.length){r=t;for(var i=e.split("."),n=0;n<i.length;n++)try{if(!r.hasOwnProperty(i[n])){r=null;break}r=r[i[n]]}catch(t){return null}}return r}function generateUUID(t){var e;e=t.crypto&&t.crypto.getRandomValues?function(){var e=new Uint32Array(4),r=new Array(16);t.crypto.getRandomValues(e);for(var i=0;i<16;i++)r[i]=e[i>>2]>>>8*(3&i)&255;return r}:function(){var e=0,r=new Array(16),i=new _prng__WEBPACK_IMPORTED_MODULE_0__.T(function(){var e,r,i,n,o,a;for(o=[],r=i=0,n=(a=(new Date).getTime()+Math.random().toString()+t.location.href+t.document.cookie).length;i<n;r=++i)e=a[r],o.push(e.charCodeAt(0));return o}()),n=0;for(n=0;n<16;n++)e=68719476736*i.random(),r[n]=e>>>((3&n)<<3)&255;return r};for(var r=[],i=0;i<256;i++)r[i]=(i+256).toString(16).substr(1);var n=e();n[6]=15&n[6]|64,n[8]=63&n[8]|128;var o=function(t){var e=0,i=r;return i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+"-"+i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]+i[t[e++]]}(n);return o}function isArray(t){return t&&"[object Array]"===Object.prototype.toString.call(t)}function isDocument(t){return!(!t||!t.nodeType||9!==t.nodeType)}function isElement(t){return!(!t||!t.nodeType||1!==t.nodeType)}function isFunction(t){return t&&"[object Function]"===Object.prototype.toString.call(t)}function isObject(t){return t&&t===Object(t)&&!isArray(t)&&!isFunction(t)}function isWindow(t){return!!(t&&t.document&&t.location&&t.alert&&t.setInterval)}function getObjectSize(t){var e=0;if(isObject(t))for(var r in t)t.hasOwnProperty(r)&&e++;return e}function leftPad(t,e,r){for(t+="";t.length<e;)t=r+t;return t}function merge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!1!==arguments[arguments.length-1],i=function(t,e){if("object"!=typeof e||null===e)return t;if(!isElement(e)&&!isWindow(e)&&!isDocument(e))for(var n in e){var o=e[n];e.hasOwnProperty(n)&&void 0!==o&&(!r&&t[n]||(isElement(o)||isWindow(o)||isDocument(o)||"object"!=typeof o||null===o?t[n]=o:"object"!=typeof t[n]||null===t[n]?t[n]=i(Array.isArray(o)?[]:{},o):Array.isArray(t[n])&&Array.isArray(o)?t[n]=t[n].concat(o):i(t[n],o)))}return t},n=arguments[0]||{};if(!n||n!==Object(n))return n;for(var o=1;o<arguments.length;o++)i(n,arguments[o]);return n}function spliceString(t,e,r){return t.slice(0,r)+e+t.slice(r,t.length)}function safeStringReplace(t,e,r){return"string"!=typeof r?t.replace(e,r):t.replace(e,r.replace(/\$/g,"$$$$"))}function setIntervalWithTimeout(t,e,r,i){var n=!1,o=t.setInterval((function(){n?t.clearInterval(o):e()}),r);return t.setTimeout((function(){n=!0}),i),o}},5224:(t,e,r)=>{"use strict";r.d(e,{T:()=>i});var i=function(){function t(t){t||(t=[(new Date).getTime()]),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.initByArray(t)}return t.prototype.initByInt=function(t){this.mt[0]=t>>>0;var e=[];for(this.mti=1;this.mti<this.N;this.mti++){var r=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&r)>>>16)<<16)+1812433253*(65535&r)+this.mti,e.push(this.mt[this.mti]>>>=0)}return e},t.prototype.initByArray=function(t){this.initByInt(19650218);for(var e=1,r=0,i=t.length,n=this.N>i?this.N:i;n;n--){var o=this.mt[e-1]^this.mt[e-1]>>>30;this.mt[e]=(this.mt[e]^(1664525*((4294901760&o)>>>16)<<16)+1664525*(65535&o))+t[r]+r,this.mt[e]>>>=0,r++,++e>=this.N&&(this.mt[0]=this.mt[this.N-1],e=1),r>=i&&(r=0)}for(n=this.N-1;n;n--){o=this.mt[e-1]^this.mt[e-1]>>>30;this.mt[e]=(this.mt[e]^(1566083941*((4294901760&o)>>>16)<<16)+1566083941*(65535&o))-e,this.mt[e]>>>=0,++e>=this.N&&(this.mt[0]=this.mt[this.N-1],e=1)}this.mt[0]=2147483648},t.prototype.genRandInt32=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var r=void 0;for(this.mti,this.N,r=0;r<this.N-this.M;r++)t=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+this.M]^t>>>1^e[1&t];for(;r<this.N-1;r++)t=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},t.prototype.genRandInt31=function(){return this.genRandInt32()>>>1},t.prototype.random=function(){return this.genRandInt32()*(1/4294967296)},t.prototype.genRandRes53=function(){return(67108864*(this.genRandInt32()>>>5)+(this.genRandInt32()>>>6))*(1/9007199254740992)},t}()},352:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var n=(a=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[r].concat(o).concat([n]).join("\n")}var a,s,c;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,i){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(n[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);i&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},4174:(t,e,r)=>{var i="__lodash_hash_undefined__",n="[object Function]",o="[object GeneratorFunction]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,g="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,d="object"==typeof self&&self&&self.Object===Object&&self,p=g||d||Function("return this")();var f,v=Array.prototype,m=Function.prototype,k=Object.prototype,b=p["__core-js_shared__"],y=(f=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",w=m.toString,_=k.hasOwnProperty,C=k.toString,x=RegExp("^"+w.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=p.Symbol,S=v.splice,D=N(p,"Map"),I=N(Object,"create"),E=A?A.prototype:void 0,O=E?E.toString:void 0;function V(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function R(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function T(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function L(t,e){for(var r,i,n=t.length;n--;)if((r=t[n][0])===(i=e)||r!=r&&i!=i)return n;return-1}function P(t,e){var r;e=function(t,e){if(K(t))return!1;var r=typeof t;if("number"==r||"symbol"==r||"boolean"==r||null==t||B(t))return!0;return s.test(t)||!a.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:K(r=e)?r:U(r);for(var i=0,n=e.length;null!=t&&i<n;)t=t[j(e[i++])];return i&&i==n?t:void 0}function M(t){if(!q(t)||(e=t,y&&y in e))return!1;var e,r=function(t){var e=q(t)?C.call(t):"";return e==n||e==o}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?x:h;return r.test(function(t){if(null!=t){try{return w.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function F(t,e){var r,i,n=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function N(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return M(r)?r:void 0}V.prototype.clear=function(){this.__data__=I?I(null):{}},V.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},V.prototype.get=function(t){var e=this.__data__;if(I){var r=e[t];return r===i?void 0:r}return _.call(e,t)?e[t]:void 0},V.prototype.has=function(t){var e=this.__data__;return I?void 0!==e[t]:_.call(e,t)},V.prototype.set=function(t,e){return this.__data__[t]=I&&void 0===e?i:e,this},R.prototype.clear=function(){this.__data__=[]},R.prototype.delete=function(t){var e=this.__data__,r=L(e,t);return!(r<0)&&(r==e.length-1?e.pop():S.call(e,r,1),!0)},R.prototype.get=function(t){var e=this.__data__,r=L(e,t);return r<0?void 0:e[r][1]},R.prototype.has=function(t){return L(this.__data__,t)>-1},R.prototype.set=function(t,e){var r=this.__data__,i=L(r,t);return i<0?r.push([t,e]):r[i][1]=e,this},T.prototype.clear=function(){this.__data__={hash:new V,map:new(D||R),string:new V}},T.prototype.delete=function(t){return F(this,t).delete(t)},T.prototype.get=function(t){return F(this,t).get(t)},T.prototype.has=function(t){return F(this,t).has(t)},T.prototype.set=function(t,e){return F(this,t).set(t,e),this};var U=z((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(B(t))return O?O.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var r=[];return c.test(t)&&r.push(""),t.replace(l,(function(t,e,i,n){r.push(i?n.replace(u,"$1"):e||t)})),r}));function j(t){if("string"==typeof t||B(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function z(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var a=t.apply(this,i);return r.cache=o.set(n,a),a};return r.cache=new(z.Cache||T),r}z.Cache=T;var K=Array.isArray;function q(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function B(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==C.call(t)}t.exports=function(t,e,r){var i=null==t?void 0:P(t,e);return void 0===i?r:i}},4937:(t,e,r)=>{var i=r(158).Symbol;t.exports=i},7041:t=>{t.exports=function(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}},5276:t=>{t.exports=function(t,e,r,i){var n=-1,o=null==t?0:t.length;for(i&&o&&(r=t[++n]);++n<o;)r=e(r,t[n],n,t);return r}},7028:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},194:(t,e,r)=>{var i=r(4937),n=r(5401),o=r(2445),a=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?n(t):o(t)}},5653:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},430:(t,e,r)=>{var i=r(4937),n=r(7041),o=r(3706),a=r(1878),s=i?i.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return n(e,t)+"";if(a(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r}},8292:(t,e,r)=>{var i=r(5276),n=r(7567),o=r(4973),a=RegExp("['’]","g");t.exports=function(t){return function(e){return i(o(n(e).replace(a,"")),t,"")}}},8064:(t,e,r)=>{var i=r(5653)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=i},4528:(t,e,r)=>{var i="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=i},5401:(t,e,r)=>{var i=r(4937),n=Object.prototype,o=n.hasOwnProperty,a=n.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),r=t[s];try{t[s]=void 0;var i=!0}catch(t){}var n=a.call(t);return i&&(e?t[s]=r:delete t[s]),n}},405:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},2445:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},158:(t,e,r)=>{var i=r(4528),n="object"==typeof self&&self&&self.Object===Object&&self,o=i||n||Function("return this")();t.exports=o},8667:t=>{var e="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+n+"]",a="\\d+",s="[\\u2700-\\u27bf]",c="["+r+"]",l="[^\\ud800-\\udfff"+n+a+e+r+i+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",g="["+i+"]",d="(?:"+c+"|"+l+")",p="(?:"+g+"|"+l+")",f="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",m="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",k="[\\ufe0e\\ufe0f]?",b=k+m+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",u,h].join("|")+")"+k+m+")*"),y="(?:"+[s,u,h].join("|")+")"+b,w=RegExp([g+"?"+c+"+"+f+"(?="+[o,g,"$"].join("|")+")",p+"+"+v+"(?="+[o,g+d,"$"].join("|")+")",g+"?"+d+"+"+f,g+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,y].join("|"),"g");t.exports=function(t){return t.match(w)||[]}},7567:(t,e,r)=>{var i=r(8064),n=r(3270),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=n(t))&&t.replace(o,i).replace(a,"")}},3706:t=>{var e=Array.isArray;t.exports=e},1653:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},1878:(t,e,r)=>{var i=r(194),n=r(1653);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==i(t)}},3277:(t,e,r)=>{var i=r(8292)((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}));t.exports=i},3270:(t,e,r)=>{var i=r(430);t.exports=function(t){return null==t?"":i(t)}},4973:(t,e,r)=>{var i=r(7028),n=r(405),o=r(3270),a=r(8667);t.exports=function(t,e,r){return t=o(t),void 0===(e=r?void 0:e)?n(t)?a(t):i(t):t.match(e)||[]}},2390:t=>{var e=function(t){"use strict";var e,r=Object.prototype,i=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(t,e,r,i){var n=e&&e.prototype instanceof f?e:f,o=Object.create(n.prototype),a=new D(i||[]);return o._invoke=function(t,e,r){var i=u;return function(n,o){if(i===g)throw new Error("Generator is already running");if(i===d){if("throw"===n)throw o;return E()}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===u)throw i=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var c=l(t,e,r);if("normal"===c.type){if(i=r.done?d:h,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=d,r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u="suspendedStart",h="suspendedYield",g="executing",d="completed",p={};function f(){}function v(){}function m(){}var k={};k[o]=function(){return this};var b=Object.getPrototypeOf,y=b&&b(b(I([])));y&&y!==r&&i.call(y,o)&&(k=y);var w=m.prototype=f.prototype=Object.create(k);function _(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function C(t,e){function r(n,o,a,s){var c=l(t[n],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var n;this._invoke=function(t,i){function o(){return new e((function(e,n){r(t,i,e,n)}))}return n=n?n.then(o,o):o()}}function x(t,r){var i=t.iterator[r.method];if(i===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=l(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,p;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function I(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:E}}function E(){return{value:e,done:!0}}return v.prototype=w.constructor=m,m.constructor=v,m[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},_(C.prototype),C.prototype[a]=function(){return this},t.AsyncIterator=C,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var a=new C(c(e,r,i,n),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(w),w[s]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var i=e.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=I,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return s.type="throw",s.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;S(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:I(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},490:t=>{"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},9397:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},5663:(t,e,r)=>{var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++)r[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return r},n=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,o=i.length,a=String(t).replace(n,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}})),c=i[r];r<o;c=i[++r])f(c)||!y(c)?a+=" "+c:a+=" "+s(c);return a},e.deprecate=function(t,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return t;if("undefined"==typeof process)return function(){return e.deprecate(t,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),i=!0}return t.apply(this,arguments)}};var o,a={};function s(t,r){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(r)?i.showHidden=r:r&&e._extend(i,r),k(i.showHidden)&&(i.showHidden=!1),k(i.depth)&&(i.depth=2),k(i.colors)&&(i.colors=!1),k(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),u(i,t,i.depth)}function c(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function l(t,e){return t}function u(t,r,i){if(t.customInspect&&r&&C(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,t);return m(n)||(n=u(t,n,i)),n}var o=function(t,e){if(k(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(v(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(f(e))return t.stylize("null","null")}(t,r);if(o)return o;var a=Object.keys(r),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),_(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(r);if(0===a.length){if(C(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return t.stylize(Date.prototype.toString.call(r),"date");if(_(r))return h(r)}var l,y="",x=!1,A=["{","}"];(d(r)&&(x=!0,A=["[","]"]),C(r))&&(y=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(y=" "+RegExp.prototype.toString.call(r)),w(r)&&(y=" "+Date.prototype.toUTCString.call(r)),_(r)&&(y=" "+h(r)),0!==a.length||x&&0!=r.length?i<0?b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),l=x?function(t,e,r,i,n){for(var o=[],a=0,s=e.length;a<s;++a)I(e,String(a))?o.push(g(t,e,r,i,String(a),!0)):o.push("");return n.forEach((function(n){n.match(/^\d+$/)||o.push(g(t,e,r,i,n,!0))})),o}(t,r,i,s,a):a.map((function(e){return g(t,r,i,s,e,x)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(l,y,A)):A[0]+y+A[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function g(t,e,r,i,n,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),I(i,n)||(a="["+n+"]"),s||(t.seen.indexOf(c.value)<0?(s=f(r)?u(t,c.value,null):u(t,c.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),k(a)){if(o&&n.match(/^\d+$/))return s;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function f(t){return null===t}function v(t){return"number"==typeof t}function m(t){return"string"==typeof t}function k(t){return void 0===t}function b(t){return y(t)&&"[object RegExp]"===x(t)}function y(t){return"object"==typeof t&&null!==t}function w(t){return y(t)&&"[object Date]"===x(t)}function _(t){return y(t)&&("[object Error]"===x(t)||t instanceof Error)}function C(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(k(o)&&(o=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=process.pid;a[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,i)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=f,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=k,e.isRegExp=b,e.isObject=y,e.isDate=w,e.isError=_,e.isFunction=C,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(9397);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),S[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",D(),e.format.apply(e,arguments))},e.inherits=r(490),e._extend=function(t,e){if(!e||!y(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(E&&t[E]){var e;if("function"!=typeof(e=t[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,E,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,i=new Promise((function(t,i){e=t,r=i})),n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);n.push((function(t,i){t?r(t):e(i)}));try{t.apply(this,n)}catch(t){r(t)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),E&&Object.defineProperty(e,E,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=E,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var i=e.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var n=this,o=function(){return i.apply(n,arguments)};t.apply(this,e).then((function(t){process.nextTick(o,null,t)}),(function(t){process.nextTick(O,t,o)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,i(t)),e}},1616:(t,e,r)=>{var i=r(2043);t.exports="string"==typeof i?i:i.toString()},2791:(t,e,r)=>{var i=r(7614);t.exports="string"==typeof i?i:i.toString()},90:(t,e,r)=>{var i=r(6763);t.exports="string"==typeof i?i:i.toString()},7488:(t,e,r)=>{var i=r(6382);t.exports="string"==typeof i?i:i.toString()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{ABAAdhesionDisplay:()=>cn,ABADisplay:()=>an,ABAVideo:()=>sn,Anchor:()=>Ln,BannerVideo:()=>un,Billboard:()=>kn,Breakaway:()=>gn,Breakout:()=>dn,HalfPage:()=>fn,KeyArt:()=>yn,LargeLeaderboard:()=>mn,Leaderboard:()=>vn,NonVastOutstreamVideo:()=>hn,OutstreamVideo:()=>_n,Sidekick:()=>Cn,SocialCanvas:()=>Pn,SwipeUp:()=>Tn,Venti:()=>wn,VideoAnchor:()=>Sn,WideSkyscraper:()=>bn,Wrapper:()=>On});var e=__webpack_require__(4174),r=__webpack_require__.n(e);function i(t,e){var r=e.Kargo,i=t.Kargo,n=e.context;if(t!==e?r?i!==r&&(t.Kargo=r):(t.Kargo=i||{},e.Kargo=t.Kargo):e.Kargo=r||{},n&&n.master&&e!==n.master){var o=n.master;o.Kargo?o.Kargo!==e.Kargo&&(e.Kargo=o.Kargo):o.Kargo=e.Kargo}return e.Kargo}function n(t){for(var e=t,r=t.top;e!==r;){var i=void 0;try{i=e.parent.location.href}catch(t){i=!1}if(!i)break;for(var n=e.parent.document.getElementsByTagName("iframe"),o=void 0,a=null,s=0;s<n.length;s+=1)if((o=n[s]).contentWindow===e){a=o;break}if(a&&a.className.split(" ").indexOf("krg-nobust")>-1)break;e=e.parent}return e}function o(t){var e;try{e=t.top.location.href}catch(t){e=null}return!e}function a(t){return!(!t.AMP_LISTENING&&!t.AMP_CONTEXT_DATA)}function s(t){var e,r=n(t),i=null;try{if(t!==r){for(var o=t;o.parent!==r;)o=o.parent;for(var a=r.document.getElementsByTagName("iframe"),s=0;s<a.length;s+=1)if((e=a[s]).contentWindow===o){i=e;break}}}catch(t){}return i}var c=__webpack_require__(4686);function l(t,e){if(!e)return t;var r,i=t;return Object.keys(e).forEach((function(t){r=e[t],i+=(i.indexOf("?")>-1?"&":"?")+t+"="+encodeURIComponent(r)})),i}function u(t){return void 0===t&&(t=8),Math.random().toString().substr(2,t)}function h(t,e){return decodeURIComponent((new RegExp(e+"=(.+?)(&|$)","i").exec(t)||["",""])[1])}function g(t){var e="";try{e=t.location.href}catch(t){}return t.AMP_CONTEXT_DATA&&t.AMP_CONTEXT_DATA.sourceUrl?e=t.AMP_CONTEXT_DATA.sourceUrl:t.context&&t.context.sourceUrl?e=t.context.sourceUrl:o(t)&&t.document.referrer?e=t.document.referrer:h(e,"content_url")&&(e=h(e,"content_url")),e}var d,p=(d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},d(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f=function(){return f=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},f.apply(this,arguments)},v=function(t){function e(e,r){var i=this.constructor;void 0===r&&(r={});var n=t.call(this,e)||this;return Object.setPrototypeOf(n,i.prototype),n.message=n.buildErrorMessage(e||"",r),n}return p(e,t),e.prototype.addContext=function(t,e){var r=e.ctx,i=e.moduleName,n=e.prep,o=e.reason,a=t||"";(i&&(a=i+": "+a),r)&&(a=a+" "+(n||"in")+" "+r);return o&&(a+=": "+o),a},e.prototype.buildErrorMessage=function(t,e){return this.addContext(t,e)},e}(Error),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Cannot "+t,e)},e}(v),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" is disabled",e)},e}(v),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Cannot load "+t,e)},e}(v),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Cannot get "+t,e)},e}(v),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){var r=(t?"No "+t:"Empty")+" response";return this.addContext(r,e)},e}(v),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" not supported",f({prep:e.prep||"by"},e))},e}(v),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" is not set",e)},e}(v),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" is invalid",e)},e}(v),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Request for "+t+" timed out",f({prep:e.prep||"after"},e))},e}(v),S=function(){function t(t){this.moduleName=t}return t.prototype.errCant=function(t,e,r){return new m(t,{ctx:e,reason:r,moduleName:this.moduleName})},t.prototype.errDisabled=function(t,e){return new k(""+t,{ctx:e,moduleName:this.moduleName})},t.prototype.errLoad=function(t,e){return new b(""+t,{ctx:e,moduleName:this.moduleName})},t.prototype.errGet=function(t,e){return new y(""+t,{ctx:e,moduleName:this.moduleName})},t.prototype.errNew=function(t){return new v(t,{moduleName:this.moduleName})},t.prototype.errNoResponse=function(t,e){return new w(t,{ctx:e,moduleName:this.moduleName})},t.prototype.errNoSupport=function(t,e){return new _(t,{ctx:e,prep:"by",moduleName:this.moduleName})},t.prototype.errNotSet=function(t,e){return new C(t,{ctx:e,moduleName:this.moduleName})},t.prototype.errInvalid=function(t,e){return new x(t,{ctx:e,moduleName:this.moduleName})},t.prototype.errTimeout=function(t,e){return new A(t,{ctx:e,moduleName:this.moduleName})},t}(),D=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r},I=new S("ad-util/request");function E(t,e,r){void 0===r&&(r=!1);var i=e,n=t.document.createElement("img");if(n.style.position="absolute",n.style.visibility="hidden",n.style.left="-9999px",n.style.top="0",r&&(i+=(e.indexOf("?")>-1?"&":"?")+"_cb="+Date.now()*Math.random()),-1!==i.indexOf("tk.kargo.com")){var o=(0,c.GK)(t,"Kargo.Plugin.Cerberus.getLexId");o&&o()&&(i=l(i,{kid:o()}))}var a,s=function(t){t.parentNode&&t.parentNode.removeChild(t)};return n.addEventListener("load",(function(){t.clearTimeout(a),s(n)}),!1),a=t.setTimeout((function(){s(n)}),8e3),n.src=i,t.document.body.appendChild(n),n}function O(t){t&&t.start()}function V(t){t&&t.stop()}function R(t,e,r,i,n){if(void 0===n&&(n={}),t&&t.length){var o,a=e.document.head||e.document.body,s=n.latencyTracker,c=e.document.createElement("script");c.src=t;var l=!1;c.onload=function(){V(s),e.clearTimeout(o),l||i(null,c)},r&&(o=e.setTimeout((function(){l=!0,n.onTimeoutFail?i(I.errTimeout(t,r+" ms")):i(null,c)}),r)),O(s),a.appendChild(c)}else i(new Error("Invalid URL"))}function T(t,e,r,i,n,o){if(void 0===o&&(o={}),t&&t.length){var a=new XMLHttpRequest,s=o.latencyTracker;i&&(a.withCredentials=!0),r&&(a.timeout=r),a.onload=function(){if(V(s),a.status>=200&&a.status<400){var t=(a.responseText||"").trim();if(t.length){try{t=JSON.parse(t)}catch(t){}n(null,t)}else n(new Error("Empty Response"))}else n(new Error("GET Request Failed with Status: "+a.status+" - "+a.statusText))},a.ontimeout=function(t){n(t)},a.onerror=function(t){n(t)},a.open("GET",t,!0),O(s),a.send()}else n(new Error("Invalid URL"))}function L(t,e,r,i,n,o,a){if(void 0===a&&(a={}),t&&t.length){var s=new XMLHttpRequest,c=a.latencyTracker;n&&(s.withCredentials=!0),i&&(s.timeout=i),s.onload=function(){if(V(c),s.status>=200&&s.status<400){var t=(s.responseText||"").trim();if(t.length){try{t=JSON.parse(t)}catch(t){}o(null,t)}else o(new Error("Empty Response"))}else o(new Error("GET Request Failed with Status: "+s.status+" - "+s.statusText))},s.ontimeout=function(t){o(t)},s.onerror=function(t){o(t)},s.open("POST",t,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),O(c),s.send(JSON.stringify(e||{}))}else o(new Error("Invalid URL"))}function P(t,e,r){void 0===r&&(r={});var i=r.timeout,n=void 0===i?0:i,o=D(r,["timeout"]);return new Promise((function(r,i){R(t,e,n,(function(t,e){return t?i(t):r(e)}),o)}))}function M(t,e,r){return new Promise((function(i,n){if(!t||0===t.length)return n(new Error("Invalid URL"));var o=r.withCredentials,a=r.timeout,s=r.latencyTracker,c={};return o&&(c.credentials="include"),O(s),function(t,e){return t?Promise.race([e,new Promise((function(e,r){return setTimeout(r,t,new Error("timeout"))}))]):e}(a,e.fetch(t,c)).then((function(t){return t.ok?t.json():n(t)})).then((function(t){return V(s),i(t)})).catch((function(t){return n(t)}))}))}var F="Chrome",N="Safari",U="Firefox",j="Opera",z="Edge",K="Android",q="ios",B="Windows",H="MacOS",G="other",W="Mobile";function J(t){return t.toLowerCase()}function Z(t){var e=t.navigator.userAgent,r=G;return e.indexOf("Edge/")>-1?r=J(z):e.indexOf("Chrome/")>-1?r=J(F):e.indexOf("Safari/")>-1?r=J(N):e.indexOf("Firefox/")>-1?r=J(U):e.indexOf(j)>-1?r=J(j):e.indexOf("MSIE")>-1||e.indexOf("Trident/")>-1?r="ie":e.indexOf("FBAN/FBForIPhone")>-1||e.indexOf("FBAN/FBIOS")>-1||e.indexOf("facebookexternalhit/")>-1?r="facebook":e.indexOf("Twitter for iPhone")>-1?r="twitter":e.indexOf("Instagram")>-1?r="instagram":e.indexOf("Pinterest")>-1?r="pinterest":e.indexOf("LinkedInApp")>-1?r="linkedIn":e.indexOf("Snapchat")>-1&&(r="snapchat"),r}function Q(t){var e=t.navigator.userAgent,r=G;return e.indexOf(K)>-1?r=J(K):/iP(hone|od|ad)/.test(e)?r=q:/windows/i.test(e)?r=B:/macintosh/i.test(e)?r=H:/linux/i.test(e)&&(r="Linux"),r}function $(t){var e=Q(t),r={};r[J(K)]="android",r[J(q)]="os",r[J(H)]="mac os x",r[J(B)]="windows nt";var i=r[J(e)],n=new RegExp(i+"\\s+(\\d+)[_\\.](\\d+)?[_\\.]?(\\d+)?"),o=J(t.navigator.userAgent).match(n)||[0,0];return parseInt(o[1],10)}function X(t){var e=t.navigator.userAgent;return e.indexOf(W)>-1&&!/iPad|Xoom|SCH-I800|Kindle/.test(e)}function Y(t){var e=t.navigator.userAgent;return/iPad|Xoom|SCH-I800|Kindle/.test(e)||e.indexOf(K)>=0&&e.indexOf(W)<0}function tt(t){return X(t)?"MobileWeb":Y(t)?"TabletWeb":"Desktop"}function et(t){return!(X(t)||Y(t))}function rt(t){var e=Q(t),r=$(t),i=Z(t),n=function(t){var e=t.navigator.userAgent,r=Z(t),i=0;if(r===J(N))i=$(t);else{var n=r+"\\/(\\d+)\\.?";i=parseInt((J(e).match(n)||["0","0"])[1],10)}return i}(t);return e===J(K)&&i===J(F)&&n>52||e===q&&r>9||et(t)}var it="invalid",nt=function(){function t(t,e,r,i,n){void 0===n&&(n=1),this.win=t,this.dataBucket=e,this.allowedReportParamKeys=r,this.params=i,this.counter=n}return t.prototype.createReportUrl=function(){var t=this,e=this.dataBucket;return Object.keys(this.params).forEach((function(r){if(t.allowedReportParamKeys.has(r)){var i=t.params[r];if(i||0===i||!1===i){var n=t.escapeLineProtocolTagKeyOrValue(t.params[r]);e+=","+t.escapeLineProtocolTagKeyOrValue(r)+"="+n}}})),e+=" value="+this.counter,"https://ad-monitor.kargo.com?data="+encodeURIComponent(e)},t.prototype.escapeLineProtocolTagKeyOrValue=function(t){return"object"==typeof t?it:(""+t).replace(/,|\s|=/g,"\\$&")},t.prototype.report=function(){try{var t=function(t){var e=document.createElement("a");return e.href=t,/\./.test(e.host)?e.host:""}(this.win.location.host);this.params.domain=t||it,function(t,e,r,i){var n=r.timeout,o=void 0===n?0:n,a=r.withCredentials;T(t,0,o,void 0!==a&&a,i,D(r,["timeout","withCredentials"]))}(this.createReportUrl(),this.win,{timeout:1e3,withCredentials:!1},(function(){}))}catch(t){console.error(t)}},t}(),ot=new Set(["browser","creative","domain","err_code","format","msg","os","platform","slot","source","url","version","deal_id","campaign_id","line_item_id","creative_html"]),at={1:"error",2:"warn",3:"log",4:"debug"},st=function(){function t(t,e,r,i){void 0===e&&(e=""),void 0===r&&(r=3),void 0===i&&(i=true),this.label=e,this.level=r,this.reportingEnabled=i,this.win=t}return t.prototype.setLabel=function(t){this.label=t},t.prototype.setLevel=function(t){this.level=t},t.prototype.setReporting=function(t){this.reportingEnabled=t},t.prototype.getLabelString=function(){var t="[KARGO]";if(this.label)if((0,c.kJ)(this.label))for(var e=0;e<this.label.length;e+=1)t+="["+this.label[e]+"]";else t+="["+this.label+"]";return t},t.prototype.write=function(t,e){var r;if((0,c.kJ)(e)&&0!==e.length){var i=g(this.win),n=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");if(n&&n()&&n().isDebug()||h(i,"krg_debug")||t<=this.level){var o=e;4===t?o=["%c"+this.getLabelString(),"color: #FF7500"].concat(o):o.unshift(this.getLabelString());for(var a=0;a<o.length;a+=1)o[a]instanceof Error?o[a]=(o[a].name?o[a].name+" - ":"")+o[a].message:"object"!=typeof o[a]||o[a]instanceof HTMLElement||(o[a]=(0,c.TS)({},o[a]));try{(r=this.win.console)[at[t]].apply(r,o)}catch(t){}}}},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(3,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(2,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(1,t)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(4,t)},t.prototype.report=function(t,e,r,i){void 0===r&&(r={}),void 0===i&&(i=!1);try{if(this.reportingEnabled){var n={url:g(this.win),err_code:t,msg:e,platform:tt(this.win),os:Q(this.win),browser:Z(this.win)};(0,c.TS)(n,r);var o="https://s3.amazonaws.com/log.kargo.com/adtag.error",a=[];Object.keys(n).forEach((function(t){a.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]))}));var s=a.join("&");if(s.length&&(o+="?"+s),E(this.win,o),!i)new nt(this.win,"ad-tag-error",ot,n).report()}}catch(t){console.error(t)}},t.prototype.reportAdMetric=function(t,e){var r={format:t.adFormat,version:t.adTagVersion,os:Q(this.win),slot:t.adSlot,tagtype:t.tagType,platform:tt(this.win)};t.creative&&(r.creative=t.creative),""!==t.videoType&&(r.videotype=t.videoType),""!==t.errCode&&(r.err_code=t.errCode),"vpaid-clickable"===t.type&&(r.vpaid_clickable=t.vpaidClickable);var i="https://ad-metrics.kargo.com/api/v1/send?metric="+t.type+"&value="+t.value,n=[];Object.keys(r).forEach((function(t){n.push('"'+encodeURIComponent(t)+'":"'+encodeURIComponent(r[t])+'"')})),n.length&&(i+="&params={"+n+"}"),T(i,this.win,2e3,!1,(function(t){e&&e(t)}))},t}(),ct=function(){function t(t,e){this.win=t,this.logger=e,this.kael=null}return t.prototype.loadKael=function(){var t=this;return new Promise((function(e,r){if(t.kael)e(t.kael);else{t.win.Kargo=t.win.Kargo||{};var i=t.win.Kargo.AnalyticsEventsLibrary;if(i)t.kael=new i,e(t.kael);else{var n=t.win.document.createElement("script");n.type="text/javascript",n.src="https://storage.cloud.kargo.com/ad/network/kael/v1.8.1-051118.js",n.onload=function(){(i=t.win.Kargo.AnalyticsEventsLibrary)?(t.kael=new i,e(t.kael)):r(new Error("Failed to load KAEL library"))},t.win.document.head.appendChild(n)}}}))},t.prototype.getLexId=function(){var t=(0,c.GK)(this.win,"Kargo.Plugin.Cerberus.getLexId");return t&&t()?t():void 0},t.prototype.kaelImpression=function(t,e,r){var i=this;return this.loadKael().then((function(n){var o={group:e,impressionId:r,namespace:t,lexId:i.getLexId(),sessionId:n.getSessionId()};new n.Track(o).impression()}))},t.prototype.kaelCustomEvent=function(t,e,r,i,n){var o=this;return this.loadKael().then((function(a){var s={group:e,namespace:t,impressionId:n,lexId:o.getLexId(),sessionId:a.getSessionId()};new a.Track(s).custom(r,i)}))},t.prototype.kaelViewability=function(t,e,r,i){var n=this;return this.loadKael().then((function(o){var a={group:e,namespace:t,impressionId:i,lexId:n.getLexId(),sessionId:o.getSessionId()};new o.Viewability(a).inViewDuration(r)}))},t.prototype.trackEvent=function(t,e,r){void 0===r&&(r={});var i=this.getImpressionEventUrl(t,e,r);i&&E(this.win,i,!0)},t.prototype.getImpressionEventUrl=function(t,e,r){void 0===r&&(r={});var i=null;if(["start","request","response","serve","completeview","view","view-predict-in","view-predict-out","view-predict-in-confirmed","view-predict-in-confirmed-502","close","click"].indexOf(t)>-1){i="https://tk.kargo.com/t/imp_track-"+t+"-"+e,r.format&&(i+="-"+r.format),r.server&&(i+="-"+r.server);var n=r.impId||"",o={uuid:n,krg_imp_id:n,aslot:e||"",creative_source:r.creativeSource||""};false,i=l(i,o),r.creativeTemplateId&&(i=l(i,{creative_template_id:r.creativeTemplateId}))}return i},t}(),lt=__webpack_require__(3277),ut=__webpack_require__.n(lt),ht=new S("ModuleLoader"),gt=function(){function t(t,e){this.win=t,this.moduleFolder=e,this.moduleUrlRoot="https://storage.cloud.kargo.com/ad/network/tag/bundle",this.win.Kargo=this.win.Kargo||{};var r=h(this.win.location.href,"krg_module_url_root");r&&(this.moduleUrlRoot=r)}return t.prototype.filterRequiredModules=function(t){var e="string"==typeof t?[t]:t,r=this.win.Kargo;return e.filter((function(t){return!(t in r)}))},t.prototype.getModuleFolder=function(){return"function"==typeof this.moduleFolder?this.moduleFolder():this.moduleFolder},t.prototype.buildModulePaths=function(t,e){var r=this;return t.map((function(t){return r.moduleUrlRoot+"/"+r.getModuleFolder()+"/"+t+"/"+e+".js"}))},t.prototype.getModule=function(t,e,r){var i=this;void 0===r&&(r=2e3);var n="string"==typeof t?[t]:t,o=this.filterRequiredModules(n).map((function(t){return ut()(t)})),a=this.buildModulePaths(o,e);return Promise.all(a.map((function(t){return P(t,i.win,{timeout:r,onTimeoutFail:!0})}))).then((function(){for(var e=i.win.Kargo,r=[],o=0,a=n;o<a.length;o++){var s=a[o],c=e[s];if(!c)return Promise.reject(ht.errLoad(s));r.push(c)}return Promise.resolve("string"==typeof t?r[0]:r)}))},t}();function dt(t,e){return t.className.split(" ").indexOf(e)>-1}function pt(t,e){dt(t,e)||(t.className+=" "+e)}function ft(t,e,r){switch(e){case"append":r.appendChild(t);break;case"prepend":r.firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t);break;case"before":r.parentNode?r.parentNode.insertBefore(t,r):r.insertBefore(t,r);break;default:r.parentNode?r.nextSibling?r.parentNode.insertBefore(t,r.nextSibling):r.parentNode.appendChild(t):r.insertBefore(t,r)}}function vt(t,e){var r=!1;if(t.ownerDocument){var i=null;if("head"===e?i=t.ownerDocument.head:"body"===e&&(i=t.ownerDocument.body),i)for(var n=t.parentElement;n;){if(n===i){r=!0;break}n=n.parentElement}}return r}function mt(t){return vt(t,"body")}function kt(t){return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}function bt(t,e,r){var i=e.getComputedStyle(t),n=t.getBoundingClientRect(),o=kt(e),a=!0;return"0"!==i.opacity&&"none"!==i.display&&"hidden"!==i.visibility&&mt(t)&&0!==n.height&&0!==n.width&&function(t,e,r){void 0===r&&(r={});var i=r.clientRect||t.getBoundingClientRect(),n=r.viewport||kt(e);return!(i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top)}(t,e,{clientRect:n,viewport:o})&&(void 0===r||function(t,e,r,i){void 0===i&&(i={});var n=i.clientRect||t.getBoundingClientRect(),o=i.viewport||kt(e),a=t.offsetWidth*r,s=t.offsetHeight*r,c=o.right-n.left,l=n.right-o.left,u=o.bottom-n.top,h=n.bottom-o.top,g=!0;return(c<a||l<a||u<s||h<s)&&(g=!1),g}(t,e,r,{clientRect:n,viewport:o}))||(a=!1),a}function yt(t,e){var r=null,i=new RegExp("^\x3c!--(?:\\r|\\n|\\s)*?[\"']"+(0,c.uw)(e)+"[\"']:((?:\\r|\\n|.)*?)--\x3e$");if(t.indexOf(e)>0){var n=t.match(/<!--(?:\r|\n|.)*?-->/g);if(n)for(var o=0;o<n.length;o+=1){var a=n[o].match(i);if(a){var s=(a[1]||"").trim();""!==s&&(s=JSON.parse(s),r=null===r||"string"==typeof s?s:(0,c.TS)(r,s))}}}return r}function wt(t,e){var r=t.className.split(" "),i=r.indexOf(e);i>-1&&(r.splice(i,1),t.className=r.join(" "))}function _t(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ct(t,e){var r=t;if(r.indexOf(e)>-1){var i=new RegExp("\x3c!--(?:\\r|\\n|\\s)*?[\"']"+(0,c.uw)(e)+"[\"']:(?:\\r|\\n|.)*?--\x3e","g"),n=r.match(i);if(n)for(var o=0;o<n.length;o+=1)r=r.replace(n[o],"")}return r}function xt(t){var e=t.document.documentElement||t.document.body,r=t.innerWidth||e.clientWidth||t.document.body.offsetWidth,i=t.innerHeight||e.clientHeight||t.document.body.offsetHeight;return{x:r,y:i,screen:{w:t.screen.width,h:t.screen.height},total_y:e.scrollHeight,orientation:r<i?"portrait":"landscape"}}function At(t,e,r,i,n,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(i,n)}function St(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function a(t){At(o,i,n,a,s,"next",t)}function s(t){At(o,i,n,a,s,"throw",t)}a(void 0)}))}}function Dt(t,e){return Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Dt(t,e)}function It(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Dt(t,e)}var Et=__webpack_require__(107),Ot=__webpack_require__.n(Et);function Vt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Rt,Tt,Lt=__webpack_require__(5663),Pt="ABADisplay",Mt="ABAVideo",Ft="ABAAdhesionDisplay",Nt="SwipeUp",Ut="DesktopHover",jt=[{id:3,sspID:4,name:"Hover",type:"Hover",dfpShortname:"hover",size:{w:320,h:50}},{id:5,sspID:5,name:"Anchor",type:"Hover",dfpShortname:"anchor",size:{w:320,h:50}},{id:6,sspID:6,name:"Breakout",type:"Hover",dfpShortname:"breakout",size:{w:320,h:50}},{id:4,sspID:7,name:"Sidekick",type:"Hover",dfpShortname:"side",size:{w:140,h:140}},{id:10,sspID:8,name:"TopBanner",type:"Banner",dfpShortname:"top",size:{w:320,h:50}},{id:11,sspID:9,name:"MiddleBanner",type:"Banner",dfpShortname:"mid",size:{w:300,h:250}},{id:8,sspID:11,name:"BottomBanner",type:"Banner",dfpShortname:"bot",size:{w:320,h:50}},{id:17,sspID:18,name:"Venti",type:"Banner",dfpShortname:"venti",size:{w:320,h:460}},{id:19,sspID:20,name:"OutstreamVideo",type:"Banner",dfpShortname:"midvid vastm",size:{w:300,h:200}},{id:21,sspID:23,name:"VideoAnchor",type:"Hover",dfpShortname:"videoanchor",size:{w:300,h:250}},{id:23,sspID:25,name:"KeyArt",type:"Banner",dfpShortname:"keyart",size:{w:320,h:350}},{id:24,sspID:26,name:"NonVastOutstreamVideo",type:"Banner",dfpShortname:"novastmidvid",size:{w:300,h:200}},{id:25,sspID:27,name:Pt,type:"Banner",dfpShortname:"",size:{w:320,h:350}},{id:27,sspID:29,name:Mt,type:"Banner",dfpShortname:"",size:{w:320,h:350}},{id:28,sspID:30,name:Ft,type:"Hover",dfpShortname:"",size:{w:320,h:50},minSize:{w:0,h:0}},{id:29,sspID:31,name:"Breakaway",type:"Hover",dfpShortname:"breakaway",size:{w:140,h:140}},{id:30,sspID:32,name:"HighRise",type:"Banner",dfpShortname:"highrise",size:{w:320,h:460}},{id:32,sspID:33,name:"Leaderboard",type:"Banner",dfpShortname:"leaderboard",size:{w:728,h:90}},{id:33,sspID:34,name:"WideSkyscraper",type:"Banner",dfpShortname:"wskyscraper",size:{w:160,h:600}},{id:34,sspID:35,name:"HalfPage",type:"Banner",dfpShortname:"halfpage",size:{w:300,h:600}},{id:35,sspID:36,name:"LargeLeaderboard",type:"Banner",dfpShortname:"lrgleaderboard",size:{w:970,h:90}},{id:36,sspID:37,name:"Wrapper",type:"Hover",dfpShortname:"wrapper",size:{w:320,h:50}},{id:37,sspID:38,name:Nt,type:"Hover",dfpShortname:"swipeup",size:{w:320,h:100}},{id:38,sspID:39,name:"SocialCanvas",type:"Banner",dfpShortname:"socialcanvas",size:{w:320,h:180}},{id:39,sspID:40,name:"Billboard",type:"Banner",dfpShortname:"Billboard",size:{w:970,h:250}},{id:40,sspID:41,name:Ut,type:"Hover",dfpShortname:Ut,size:{w:728,h:90}}],zt=jt.reduce((function(t,e){return t[e.name]=e,t}),{}),Kt=["HalfPage","HighRise","KeyArt","Native","NativeVideoKeyArt","NonVastOutstreamVideo","OutstreamVideo","Venti",Pt,Mt,"WideSkyscraper"],qt=["HighRise","KeyArt","NonVastOutstreamVideo","OutstreamVideo","VastMiddleBanner","Venti"],Bt=["middlebanner","outstreamvideo","nonvastoutstreamvideo"],Ht=["OutstreamVideo","VideoAnchor"],Gt=["TopBanner","MiddleBanner","BottomBanner","Hover","Native",Pt,"HalfPage","Leaderboard","LargeLeaderboard","WideSkyscraper"],Wt=["KeyArt","Venti"],Jt=["Breakaway","Wrapper",Nt],Zt=["Breakaway","Sidekick","VideoAnchor","Wrapper","SwipeUp"],Qt=["HalfPage","LargeLeaderboard","Leaderboard","WideSkyscraper","SocialCanvas","Billboard",Ut],$t=["MiddleBanner"],Xt=["NonVastOutstreamVideo","NativeVideoKeyArt",Mt],Yt=["VastMiddleBanner","OutstreamVideo","VideoAnchor"],te=["VastMiddleBanner","OutstreamVideo","VideoAnchor","NonVastOutstreamVideo","NativeVideoKeyArt",Mt],ee=["HighRise","NonVastOutstreamVideo","OutstreamVideo","ABAAdhesionDisplay","ABADisplay","ABAVideo","Leaderboard","LargeLeaderboard","HalfPage","WideSkyscraper","Billboard"];!function(t){t.LINE_ITEM="{DFP_LINE_ITEM}",t.CREATIVE="{DFP_CREATIVE}"}(Rt||(Rt={})),function(t){t.CREATIVE="{KARGO_CREATIVE}",t.FORMAT="{KARGO_FORMAT}",t.SEQUENCE="{SEQUENCE}"}(Tt||(Tt={}));var re=["site","placement","advertiser","campaign","lineItem","creative"];function ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var oe=function(){function t(t,e,i){void 0===i&&(i=""),this.win=t,this.logger=e,this.slotId=i;var n=r()(this.win,"Kargo.Plugin.Cerberus"),o=r()(this.win,"Kargo.Config");this.macroConfig={slotId:i,impressionId:"",creativeId:"",lexId:n&&n.getLexId()||"",deviceId:o&&o.getDeviceId()||"",hostname:r()(this.win,"location.hostname")||"",adFormat:""},this.cachebuster=(Date.now()*Math.random()).toString().replace(".","")}var e=t.prototype;return e.replaceMacroWhenValid=function(t,e,r){return r?t.replace(e,r):t},e.buildTrackerUrl=function(t,e,r){var i=this,n=t,o=""+(zt[e.format]?zt[e.format].id:null),a={lineItem:e.dfpLineItem||null,creative:e.dfpCreative||null},s=e.creativeId||null,c=e.sequenceKey||null;return[[Rt.LINE_ITEM,a.lineItem],[Rt.CREATIVE,a.creative],[Tt.FORMAT,o],[Tt.CREATIVE,s],[Tt.SEQUENCE,c],["{AD_TAG_VERSION}","6.37.0"],["{CONTEXT}",r]].forEach((function(t){var e=t[0],r=t[1];n=i.replaceMacroWhenValid(n,e,r)})),n},e.replaceAllMacros=function(t,e){var r=this;if(this.macroConfig.creativeId=e.creativeId||"",this.macroConfig.adFormat=e.adFormat||"",this.macroConfig.impressionId=e.impressionId,"string"==typeof t&&t.length){var i=ne(ne({},this.getDfpMacros()),this.getKargoMacros());t&&"string"==typeof t&&i&&Object.keys(i).forEach((function(e){var n=i[e]();t=r.replaceMacroHelper(t,e,n)}))}return t},e.replaceMacroHelper=function(t,e,r){try{if(this.macroExists(t,e))return"{ad_format}"===e&&(r=this.convertToSnakeCase(r)),t.replace(new RegExp((0,c.uw)(e),"gi"),r)}catch(t){this.logger.error(t)}return t},e.macroExists=function(t,e){return!(!t||!e||"string"!=typeof t||"string"!=typeof e)&&(t.indexOf(e)>-1||t.indexOf(e.toUpperCase())>-1||t.indexOf(e.toLowerCase())>-1)},e.getDfpMacros=function(){var t=this,e=this.macroConfig;return{"%%CLICK_URL%%":function(){return""},"%%CLICK_URL_ESC%%":function(){return""},"%%CLICK_URL_ESC_ESC%%":function(){return""},"%%CLICK_URL_UNESC%%":function(){return""},"%%VIEW_URL_UNESC%%":function(){return""},"%%CACHEBUSTER%%":function(){return t.cachebuster},"%%PATTERN:kid%%":function(){return e.lexId},"%%PATTERN:uuid%%":function(){return e.impressionId},"%%PATTERN:krg_imp_id%%":function(){return e.impressionId},"%%SITE%%":function(){return e.hostname},"%%ADVERTISING_IDENTIFIER_PLAIN%%":function(){return e.deviceId},"%%PATTERN:id%%":function(){return e.deviceId}}},e.getKargoMacros=function(){var t=this,e=Date.now().toString(),r=this.macroConfig;return{"{timestamp}":function(){return e},"{cachebuster}":function(){return t.cachebuster},"{uuid}":function(){return r.impressionId},"{imp_id}":function(){return r.impressionId},"{ad_slot}":function(){return r.slotId},"{site}":function(){return r.hostname},"{ad_format}":function(){return r.adFormat},"{creative_id}":function(){return r.creativeId}}},e.convertToSnakeCase=function(t){return(t=(t=t.replace(/([a-z])([A-Z])/g,"$1-$2")).replace(/([A-Z])([A-Z][a-z])/g,"$1-$2")).toLowerCase()},t}();function ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ce=function(){function t(t,e,r){this.win=t,this.target=e,this.infoOverride=r,this.logger=e&&e.logger||new st(this.win),e||this.logger.error("Reporting target is not ready, reporting result might be affected");var i=this.collectReporterInfo();this.reporterInfo=se(se({},i),r)}var e=t.prototype;return e.collectReporterInfo=function(){var t=this.target||{},e=t.dfpCreativeData||t.krakenCreativeData||t.krakenResponse||{};"string"==typeof e&&(e=(e=yt(e,"krg_ad_info"))||{});var r="unknown",i=t.type||e.source||r;return this.reporterInfo=se({version:"6.37.0",slot:t.slotConfig&&t.slotConfig.getId?t.slotConfig.getId():r,format:e.format||r,source:"KrakenAdRequest"===i?"Kraken":i,creative:e.creative||e.id||r,deal_id:e.dealId||e.deal_id||r,campaign_id:e.campaign||r,line_item_id:e.lineItem||r},this.infoOverride),this.reporterInfo},e.report=function(t,e,r,i){void 0===i&&(i=!1),this.target&&this.collectReporterInfo();var n=se(se({},this.reporterInfo),r);n.source="KrakenAdRequest"===n.source?"Kraken":n.source,this.logger.debug("ErrorReporter: ","Code: "+t+",","Message: "+e+",","isWarning: "+i+",","Payload:",n),this.logger.report(t,e,n,i)},t}(),le=function(){function t(){}return t.getSupportedPMPFormats=function(t){var e=[];return Object.keys(t).forEach((function(r){t[r]&&t[r].isApprovedForPMP&&t[r].isApprovedForPMP()&&e.push(r)})),e},t.getApprovedOpenFormatsPerSlot=function(t,e){for(var r=[],i=0;i<e.length;i+=1)t.includes(e[i])&&r.push(e[i]);return r},t}(),ue=function(){function t(){}return t.getDimensionsByFormat=function(t){var e=jt.filter((function(e){return e.name===t}))[0],i=r()(e,"size.w",null),n=r()(e,"size.h",null);return i&&n?e.size:{w:300,h:250}},t.getFormatFromSize=function(t){if(!t)return null;var e=null,i=t.split("x"),n=i[0],o=i[1];return jt.forEach((function(t){var i=r()(t.size,"w",null),a=r()(t.size,"h",null);i===Number(n)&&a===Number(o)&&(e=t.name)})),e},t.determineFormat=function(e,r,i){var n=r.vast_url;if(r.vast_xml||n)return le.getApprovedOpenFormatsPerSlot(i,Ht)[0];var o=t.getFormatFromSize(e),a=le.getApprovedOpenFormatsPerSlot(i,Gt);return o&&a.includes(o)?o:a[0]},t.getFormatBySspId=function(t){return"number"!=typeof t&&(t=+t),jt.filter((function(e){return e.sspID===t}))[0]},t.isVideoFormat=function(t){return te.indexOf(t)>=0},t.isVastFormat=function(t){return Yt.indexOf(t)>=0},t.isKapVideoFormat=function(t){return Xt.indexOf(t)>=0},t.getFormatByShortname=function(t){t=t||"";var e=jt.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return e.length?e[0]:null},t}(),he="CONFIG",ge="CREATIVE",de="IDENT",pe="KRAKEN",fe="KIT",ve="HEPHAESTUS";function me(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function ke(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?me(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var be=function(){function t(t,e,r){this.logger=e,this.win=t,this.slotConfig=r,this.type=null,this.requestUrl=null,this.usingCustomRequestUrl=!1,this.impressionId=null,this.extraMacros={impressionId:"",creativeId:"",adFormat:""},this.rawResponse=null,this.creativeData={prefix:null,suffix:null,format:null,execution:null,content:"",positionElement:null,positionLocation:null,settings:{}},this.extraContent={prefix:"",suffix:""},this.kargoCreative=!1,this.kargoCreativeData={sid:null,creativeId:null,vendor:null,vendorId:null,placement:null,krakenViewabilityTracker:null},this.errorReporter=new ce(this.win,this),this.macroUtil=new oe(this.win,this.logger,this.slotConfig.getId()||"")}var e=t.prototype;return e.getType=function(){return this.type},e.setImpressionId=function(t){this.impressionId=t,this.extraMacros.impressionId=t},e.getImpressionId=function(){return this.impressionId},e.setExtraMacrosCreativeId=function(t){this.extraMacros.creativeId=t},e.getExtraMacrosCreativeId=function(){return this.extraMacros.creativeId},e.setExtraMacrosAdFormat=function(t){this.extraMacros.adFormat=t},e.getExtraMacrosAdFormat=function(){return this.extraMacros.adFormat},e.setRequestUrl=function(t){this.requestUrl=t,this.usingCustomRequestUrl=!0},e.getRequestUrl=function(){return this.requestUrl},e.isCustomRequestUrl=function(){return this.usingCustomRequestUrl},e.getCreativeData=function(){return this.creativeData},e.fetchResponse=function(t){t()},e.isKargoCreative=function(){return this.kargoCreative},e.getKargoCreativeData=function(){return this.kargoCreativeData},e.extractCreativeData=function(){var t=St(Ot().mark((function t(e){var r,i,n,o,a,s,l,u,h,g,d,p,f,v;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},e.includes("kit-version=")&&(i=e.match(/data-ad-format="(.*?)"/)||[],(n=i[1])?(this.creativeData.format=n,this.setExtraMacrosAdFormat(this.creativeData.format)):this.errorReporter.report(fe,"No Format in KIT"),o=e.match(/data-ad-execution="(.*?)"/)||[],(a=o[1])?this.creativeData.execution=a:this.errorReporter.report(fe,"No Execution in KIT"),s=e.match(/data-ad-settings="(.*?)"/)||[],l=s[1]))try{r.settings=JSON.parse(window.atob(l))}catch(t){this.errorReporter.report(fe,t.message)}u=e.replace(/\r/g,""),0===Object.keys(r).length&&(r=yt(u,"krg_ad_info")),!r&&u.includes('""krg_ad_info""')&&(h="Extra quotes found in creative. Trafficking error - creative may not display",this.logger.warn(h),this.errorReporter.report(ge,h)),g=yt(u,"settings_overrides"),d=Ct(u,"krg_ad_type"),p=Ct(d,"krg_ad_info"),f=Ct(p,"settings_overrides"),r&&(this.kargoCreative=!0,r.format&&(this.creativeData.format=r.format,this.setExtraMacrosAdFormat(this.creativeData.format)),r.execution&&(this.creativeData.execution=r.execution),r.settings&&(0,c.TS)(this.creativeData.settings,r.settings),r.sid&&(this.kargoCreativeData.sid=r.sid),r.creativeId&&(this.kargoCreativeData.creativeId=r.creativeId),r.vendor&&r.vendor.id&&(this.kargoCreativeData.vendorId=r.vendor.id),r.vendor&&r.vendor.code&&(this.kargoCreativeData.vendor=r.vendor.code),r.placement&&r.placement.type&&(this.kargoCreativeData.placement=r.placement.type),r.asdata&&r.asdata.verid&&(this.kargoCreativeData.verticals=r.asdata.verid),r.settings&&r.settings.creative_origin&&(this.kargoCreativeData.creativeOrigin=r.settings.creative_origin)),g&&(0,c.TS)(this.creativeData.settings,g),f=this.replaceMacroValues(f),0===(v=f.trim()).indexOf("<VAST")||0===v.indexOf("&lt;VAST")||0===v.indexOf("<?xml")||0===v.indexOf("&lt;?xml")?this.creativeData.settings.vast_xml=f:this.creativeData.content=f;case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.addTrackers=function(t,e){var r=this,i=[],n=ke(ke({},e),{},{format:this.creativeData.format||null}),o=function(e,i){return r.combineTrackers(e,i).map((function(e){return r.macroUtil.buildTrackerUrl(e,n,t.context)}))};if(t.tracking){this.creativeData.settings.tracking=this.creativeData.settings.tracking||{};var a=this.creativeData.settings.tracking;t.tracking.serve&&(i=o(i,t.tracking.serve)),t.tracking.win&&(i=o(i,t.tracking.win)),t.tracking.video_start&&(a.start=o(a.start,t.tracking.video_start)),t.tracking.video_first_quartile&&(a.firstQuartile=o(a.firstQuartile,t.tracking.video_first_quartile)),t.tracking.video_midpoint&&(a.midpoint=o(a.midpoint,t.tracking.video_midpoint)),t.tracking.video_third_quartile&&(a.thirdQuartile=o(a.thirdQuartile,t.tracking.video_third_quartile)),t.tracking.video_complete&&(a.complete=o(a.complete,t.tracking.video_complete)),t.tracking.video_load&&this.determineVideoLoadNeeded(t)&&(i=o(i,t.tracking.video_load)),t.tracking.click&&(a.click=o(a.click,t.tracking.click)),t.tracking.view&&(a.view=o(a.view,t.tracking.view)),t.tracking.blocked&&(a.blocked=o(a.blocked,t.tracking.blocked));var s=t.format||this.creativeData.format;if(t.tracking.billable)ue.isVastFormat(s)||ue.isKapVideoFormat(s)&&"direct"===t.auction_type?a.start=o(a.start,t.tracking.billable):i=o(i,t.tracking.billable)}t.krk_imp_tracker&&(i=o(i,t.krk_imp_tracker)),this.creativeData.content+=i.map((function(t){return'<img style="display:none" src="'+t+'"/>'})).join("")},e.determineVideoLoadNeeded=function(t){var e=t.format||this.creativeData.format;t.ad_format&&(e=ue.getFormatBySspId(parseInt(t.ad_format,10)).name);var r,i,n=!1;e?n=ue.isVideoFormat(e):n="video"===(null==(r=t.ext)?void 0:r.response_type)||"vast"===(null==(i=t.ext)?void 0:i.response_type);return n},e.replaceMacroValues=function(t){return t=this.macroUtil.replaceAllMacros(t,this.extraMacros)},e.combineTrackers=function(t,e){var r,i;r=(0,Lt.isArray)(t)?t:[t],i=(0,Lt.isArray)(e)?e:[e];var n=r.concat(i).filter((function(t){return"string"==typeof t&&t.length>0}));return Array.from(new Set(n))},e.isValidAdMarkup=function(t){return void 0===t&&(t=""),!!t&&""!==t},t}(),ye=["middlebanner","outstreamvideo","nonvastoutstreamvideo"],we=new S("SSP"),_e=function(t){function e(e,r,i,n){var o;return(o=t.call(this,e,r,i)||this).tracking=n,o.type="SSP",o.openResponse=null,o.sspCreativeData={size:null,type:null,auctionType:"pmp",comment:null,dealId:null,dealName:null,advertiserDomain:null,rtbCreativeId:null,dspId:null,dspSeat:null,creativeId:null},o}It(e,t);var i=e.prototype;return i.getSSPCreativeData=function(){return this.sspCreativeData},i.getFormatBySspID=function(t){for(var e=parseInt(""+t,10),r=0;r<jt.length;r+=1)if(e===jt[r].sspID)return jt[r];return null},i.getRequestParams=function(){var t=this.slotConfig.getPlatform(),e=g(this.win);"MobileApp"===t&&this.win.__krg_page_url_override&&(e=this.win.__krg_page_url_override);var i={asize:this.slotConfig.getSSPConfig().getAdditionalSizes(),page:e,mobile:1,iframebuster:"ALL",adtag_version:"6.37.0",uuid:this.getImpressionId(),krg_imp_id:this.getImpressionId()},n=(0,c.GK)(this.win,"Kargo.Config");n&&n.getDeviceId()&&(i.idfa=n.getDeviceId());var o=xt(this.win);i.screen_size=o.screen.w+"x"+o.screen.h;var a=h(e,"ssp_id")||h(e,"SSP_ID");if(a){var s=h(e,"ssp_slot")||h(e,"SSP_SLOT");s?parseInt(this.slotConfig.getSSPConfig().getSlotId(),10)===parseInt(s,10)&&(i.creative_id=a):i.creative_id=a}var l=r()(this.win,"Kargo.Plugin.Cerberus");if(l){var u=l.getLexId(),d=l.getSyncIds();if(u&&(i.kargo_id=u),d){var p="";Object.keys(d).forEach((function(t){p.length&&(p+=";"),p+=t+":"+d[t]})),i.mt=p}var f=l.getSegments();f&&(i.mas=f.join(","))}return i},i.getRequestUrl=function(){if(!this.requestUrl&&this.slotConfig.getSSPConfig().getSlotId()&&this.slotConfig.getSSPConfig().getSize()){var t=this.getRequestParams(),e="ads",r=this.slotConfig.getPlatform();"MobileApp"!==r&&"TabletApp"!==r||(e="app_ads"),t.creative_id&&(e="pr_ads");var i=h(g(this.win),"ssp_dev")?"prg-dev.kargo.com":"prg.kargo.com",n="";Object.keys(t).forEach((function(e){var r=t[e];n+=(0===n.length?"?":"&")+encodeURIComponent(e)+"="+encodeURIComponent(r)})),this.requestUrl="//"+i+"/"+e+"/"+this.slotConfig.getSSPConfig().getSlotId()+"/"+this.slotConfig.getSSPConfig().getSize()+"/"+n}return this.requestUrl},i.extractCreativeData=function(){var e=St(Ot().mark((function e(i){var n,o,a,s,l;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.rawResponse=i,"object"==typeof i.adm&&(i.adm=JSON.stringify(i.adm)),t.prototype.extractCreativeData.call(this,i.adm),n=null,i.tracking&&(this.creativeData.settings.tracking?(0,c.TS)(this.creativeData.settings.tracking,i.tracking):this.creativeData.settings.tracking=i.tracking),i.ad_format&&(n=this.getFormatBySspID(i.ad_format)),!this.creativeData.format){e.next=11;break}"VastMiddleBanner"===this.creativeData.format&&(this.creativeData.format="OutstreamVideo"),n&&n.name.toLowerCase()!==this.creativeData.format.toLowerCase()&&this.errorReporter.report("SSP","Format Mismatch "+i.id+" ("+this.creativeData.format+" | "+n.name+")",{creative:i.id}),e.next=40;break;case 11:if("native"!==r()(i,"ext.response_type",null)){e.next=39;break}o=null;try{o=JSON.parse(i.adm)}catch(t){this.errorReporter.report("SSP","Error parsing Native JSON",{creative:i.id,format:n?n.name:"unknown"})}if(!o){e.next=39;break}if(this.creativeData.content="",this.creativeData.settings.native=o,i.creative_optimizer&&(this.creativeData.settings.native.creativeOptimizer=i.creative_optimizer),!this.slotConfig.getFormatConfig("NativeAnchor")){e.next=23;break}this.creativeData.format="NativeAnchor",e.next=39;break;case 23:if(!this.slotConfig.getFormatConfig(Ft)){e.next=27;break}this.creativeData.format=Ft,e.next=39;break;case 27:if(this.creativeData.format=Pt,!(a=o.assets)||!a.length){e.next=39;break}s=0;case 31:if(!(s<a.length)){e.next=39;break}if(!a[s].video||!a[s].video.vasttag){e.next=36;break}return this.creativeData.settings.native.vast=a[s].video.vasttag,this.creativeData.format=Mt,e.abrupt("break",39);case 36:s+=1,e.next=31;break;case 39:n&&(this.creativeData.format=n.name);case 40:i.size&&(this.sspCreativeData.size=i.size),i.type&&(this.sspCreativeData.type=i.type),i._comment&&(this.sspCreativeData.comment=i._comment),i.deal_id&&(this.sspCreativeData.dealId=i.deal_id),i.deal_name&&(this.sspCreativeData.dealName=i.deal_name),i.adomain&&(this.sspCreativeData.advertiserDomain=i.adomain),i.auction_type&&(this.sspCreativeData.auctionType=i.auction_type),i.id&&(this.sspCreativeData.rtbCreativeId=i.id,(l=this.sspCreativeData.rtbCreativeId.match(/(\d+)(?:_(\d+))?_(.+)/))&&(this.sspCreativeData.dspId=l[1]||null,this.sspCreativeData.dspSeat=l[2]||null,this.sspCreativeData.creativeId=l[3]||null));case 48:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.validAmpFormat=function(){return ye.includes(this.creativeData.format.toLowerCase())},i.fetchResponse=function(t){var e=this;this.logger.debug("SSP - Ad Request\n    Slot ID: "+this.slotConfig.getSSPConfig().getSlotId()+"\n    Size: "+this.slotConfig.getSSPConfig().getSize()+"\n    Request Params:",this.getRequestParams()),this.isCustomRequestUrl()&&this.logger.debug("SSP - Using Custom Request Url: "+this.getRequestUrl());T(this.getRequestUrl(),this.win,0,!0,(function(r,i){r?(e.logger.debug("SSP - No Ad Response"),t(r)):i.type&&"noad"===i.type?t(we.errNoResponse()):i.adm?i.auction_type&&"open"===i.auction_type?(e.openResponse=i,e.logger.debug("SSP - No PMP Response"),t(we.errNoResponse("PMP"))):(e.rawResponse=i,e.extractCreativeData(i),a(e.win)&&!e.validAmpFormat()&&(e.logger.debug("SSP - Invalid Amp Format "+e.creativeData.format),t(we.errInvalid("Amp Format"))),e.logger.debug("SSP - Ad Response",e.getCreativeData()),t()):(e.logger.debug("SSP - No Ad Response"),t(we.errNoResponse("JSON")))}))},e}(be),Ce=new S("SSPOpen"),xe=function(t){function e(e,r,i,n){var o;return(o=t.call(this,e,r,i)||this).type="SSPOpen",o.sspSource=n,o}It(e,t);var i=e.prototype;return i.extractCreativeData=function(){var e=St(Ot().mark((function e(i){var n,o,a,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.prototype.extractCreativeData.call(this,i);case 2:this.creativeData.settings.branding="advertisement",this.creativeData.format||(n=this.slotConfig.getAllFormatConfigs?this.slotConfig.getAllFormatConfigs():{},o=le.getSupportedPMPFormats(n),a=r()(this.creativeData,"settings",{}),s=ue.determineFormat(i.size,a,o),this.creativeData.format=s);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.fetchResponse=function(t){var e=this;this.logger.debug("SSP Open - Ad Request already made by SSP Source");var r="https://tk.kargo.com/t/ssp-open";r=l(r,{slot:this.slotConfig.getId(),uuid:this.getImpressionId(),krg_imp_id:this.getImpressionId()}),E(this.win,r,!0),this.sspSource.openResponse?(this.rawResponse=this.sspSource.openResponse,this.rawResponse.control_pix_open&&E(this.win,this.rawResponse.control_pix_open),this.extractCreativeData(this.rawResponse).then((function(){e.logger.debug("SSP Open - Ad Response",e.getCreativeData()),t()}))):(this.logger.debug("SSP Open - No Open Response"),t(Ce.errNoResponse("Open")))},e}(_e),Ae=new S("KATS"),Se=function(t){function e(e,r,i,n){var o;return(o=t.call(this,e,r,i)||this).type="KATS",o.katsConfig=n,o.responseType=null,o}It(e,t);var r=e.prototype;return r.getResponseType=function(){return this.responseType},r.getRequestUrl=function(){var t;if(this.katsConfig.response_time&&10===this.katsConfig.response_time.length)t=this.katsConfig.response_time;else{var e=new Date,r=("0"+e.getDate()).slice(-2),i=("0"+(e.getMonth()+1)).slice(-2);t=""+e.getFullYear()+i+r+"00"}return this.requestUrl="https://kats.prod.kargo.com/api/kssp-creative-response?creative_id="+this.katsConfig.creative_id+"&response_time_id="+t+"&limit=1",this.requestUrl},r.extractCreativeData=function(){var t=St(Ot().mark((function t(e){var r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.katsConfig.sspSource,this.responseType="SSP",e.auction_type&&"open"===e.auction_type.toLowerCase()&&(r=this.katsConfig.sspOpenSource,this.responseType="SSPOpen"),!r){t.next=9;break}if(this.logger.debug("KATS - "+this.responseType),!e.adm){t.next=8;break}return t.next=8,r.extractCreativeData(e);case 8:this.copyCreativeData(r);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.copyCreativeData=function(t){this.creativeData=t.creativeData,this.kargoCreative=t.kargoCreative,this.kargoCreativeData=t.kargoCreativeData,t.sspCreativeData&&(this.sspCreativeData=t.sspCreativeData)},r.addDummyTrackers=function(t){var e="https://krk.kargo.com/api/v1/event/billable?ctx=kats-demo-site";this.creativeData.settings.tracking=this.creativeData.settings.tracking||{};var r=this.creativeData.settings.tracking,i=[];r.click=["https://krk.kargo.com/api/v1/event/click?ctx=kats-demo-site"];var n=this.creativeData.format;ue.isVastFormat(n)||ue.isKapVideoFormat(n)&&"direct"===t.auction_type?r.start=[e]:(i.push(e),this.creativeData.content+=i.map((function(t){return'<img style="display:none" src="'+t+'"/>'})).join(""))},r.fetchResponse=function(t){var e=this;this.logger.debug("KATS - Ad Request"),this.logger.debug("KATS - Using Custom Request Url: "+this.getRequestUrl());T(this.getRequestUrl(),this.win,0,!1,(function(r,i){if(r)e.logger.debug("KATS - No Ad Response"),t(r);else if(i.data&&i.data.length>0){var n=i.data[0].RESPONSE_BODY,o=JSON.parse(n);e.extractCreativeData(o).then((function(){e.addDummyTrackers(o),e.logger.debug("KATS - Ad Response",e.getCreativeData()),t()}))}else e.logger.debug("KATS - Empty Response"),t(Ae.errNoResponse())}))},e}(be),De=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i)||this).type="OverrideUrl",n}It(e,t);var r=e.prototype;return r.getRequestUrl=function(){return this.requestUrl||(this.requestUrl=this.slotConfig.getOverrideUrl(),this.requestUrl+=(this.requestUrl.indexOf("?")>-1?"&":"?")+"_cb="+u()),this.requestUrl},r.setRequestUrl=function(t){this.requestUrl=t,this.requestUrl+=(this.requestUrl.indexOf("?")>-1?"&":"?")+"_cb="+u()},r.fetchResponse=function(t){var e=this;this.logger.debug("OVERRIDE URL - Ad Request\n    Request Url: "+this.requestUrl);T(this.getRequestUrl(),this.win,0,!0,(function(r,i){return r?(e.logger.debug("OVERRIDE URL - No Ad Response"),t(r)):(e.rawResponse=i,e.extractCreativeData(i).then((function(){return e.logger.debug("OVERRIDE URL - Ad Response",e.getCreativeData()),t()})))}))},e}(be),Ie=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i)||this).type="Html",n.htmlResponse=null,n}It(e,t);var r=e.prototype;return r.setResponse=function(t){var e;try{e=this.win.atob(t)}catch(r){e=t}this.htmlResponse=e},r.fetchResponse=function(t){var e=this;this.logger.debug("HTML - Ad Request Html: ",this.htmlResponse);var r=this.htmlResponse;return this.rawResponse=r,this.extractCreativeData(r).then((function(){e.logger.debug("HTML - Ad Response",e.getCreativeData()),t()}))},e}(be),Ee="err-encdng-crtve";var Oe={reportAdMetric:function(t,e,r){var i="unknown";e.source&&(i="Kraken"===e.source.type?"header":"allocation");var n={value:t.value||1,type:t.type,adFormat:e.format||"unknown",adTagVersion:t.version,adSlot:e.slot||"unknown",tagType:i||"unknown",errCode:t.errCode||"",videoType:t.videoType||"",vpaidClickable:t.vpaidClickable||0};r.reportAdMetric(n,(function(e){null===e?r.debug("Ad Metrics reported for "+t.type):r.debug("Failed reporting Ad Metrics for "+t.type)}))}};function Ve(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Te=new S("Kraken"),Le=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i)||this).AD_METRIC_RATE=20,n.type="Kraken",n.responseType=null,n.dfpSource=null,n.sspSource=null,n.openSource=null,n.hephaestusSource=null,n.hephaestusData={creativeId:null,advertiser:null,campaign:null,lineItem:null,placement:null,site:null,format:null,sequenceKey:"ul"},n.krakenRequestUrl=null,n.krakenResponse=null,n}It(e,t);var i=e.prototype;return i.setDfpSource=function(t){this.dfpSource=t},i.getDfpSource=function(){return this.dfpSource},i.setSspSource=function(t){this.sspSource=t},i.getSspSource=function(){return this.sspSource},i.setOpenSource=function(t){this.openSource=t},i.getOpenSource=function(){return this.openSource},i.setHephaestusSource=function(t){this.hephaestusSource=t},i.getHephaestusSource=function(){return this.hephaestusSource},i.isHephaestusSource=function(t){return this.getHephaestusSource()&&(t.adms||t.adm)&&"direct"===t.auction_type},i.setKrakenRequestUrl=function(t){this.krakenRequestUrl=t},i.getKrakenRequestUrl=function(){var t=null;return this.krakenRequestUrl&&(t=this.krakenRequestUrl,this.uuid&&(t=l(t,{imp_id:this.uuid}))),t},i.setKrakenResponse=function(t){if(this.krakenResponse=t,this.krakenResponse&&this.krakenResponse.adm)try{this.krakenResponse.adm=this.win.atob(this.krakenResponse.adm)}catch(t){}},i.getKrakenResponse=function(){return this.krakenResponse},i.setImpressionId=function(e){this.getSspSource()&&this.getSspSource().setImpressionId(e),this.getDfpSource()&&this.getDfpSource().setImpressionId(e),this.getHephaestusSource()&&this.getHephaestusSource().setImpressionId(e),t.prototype.setImpressionId.call(this,e)},i.getResponseType=function(){return this.responseType},i.getHephData=function(){if("Hephaestus"===this.responseType&&this.getHephaestusSource())return this.getHephaestusSource().getHephData()},i.getSSPCreativeData=function(){return"SSP"===this.responseType&&this.getSspSource()?this.getSspSource().getSSPCreativeData():"SSPOpen"===this.responseType&&this.getOpenSource()?this.getOpenSource().getSSPCreativeData():null},i.getDFPCreativeData=function(){return"DFP"===this.responseType&&this.getDfpSource()?this.getDfpSource().getDFPCreativeData():null},i.reportByteMetric=function(t,e){var r=new Blob([t]).size,i={format:e,slot:this.slotConfig.getId(),source:{type:this.type}};(!!h(g(this.win),"krg_debug")||1===Math.floor(Math.random()*this.AD_METRIC_RATE))&&Oe.reportAdMetric({value:r,type:"admarkup-size",version:"6.37.0"},i,this.logger)},i.extractCreativeData=function(){var e=St(Ot().mark((function e(i){var n,o,a,s,c,l,u=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i.pageViewId&&"isBrandedTakeover"in i&&setTimeout((function(){var t=r()(u.win,"Kargo.Plugin.Cerberus");t&&t.handleBrandedTakeover(i.isBrandedTakeover,i.pageViewId)})),n=i.adm_prefix,o=i.adm_suffix,a=i.auction_type,s="direct"===a,n&&(this.extraContent.prefix=this.win.atob(n)),o&&(this.extraContent.suffix=this.win.atob(o)),!i.markup){e.next=13;break}return this.responseType="HTML",e.next=11,t.prototype.extractCreativeData.call(this,i.markup);case 11:e.next=33;break;case 13:if(!this.getSspSource()||!i.adm&&!i.data||s){e.next=24;break}if(this.responseType="SSP",c=i.adm?i:i.data,l=this.getSspSource(),"open"===c.auction_type&&this.getOpenSource()&&(l=this.getOpenSource(),this.responseType="SSPOpen"),!c){e.next=22;break}return e.next=21,l.extractCreativeData(c);case 21:this.copyCreativeData(l);case 22:e.next=33;break;case 24:if(!(this.getHephaestusSource()&&i.adms||i.adm&&s)){e.next=31;break}return this.responseType="Hephaestus",e.next=28,this.getHephaestusSource().extractCreativeData(i);case 28:this.creativeData&&this.copyCreativeData(this.getHephaestusSource()),e.next=33;break;case 31:this.errorReporter.report(pe,"Unable to extract creative data from any source"),Oe.reportAdMetric({type:"failure",version:"6.37.0",errCode:"no-crtve-data"},this.slotConfig,this.logger);case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),this.logger.error(e.t0);case 38:case"end":return e.stop()}}),e,this,[[0,35]])})));return function(t){return e.apply(this,arguments)}}(),i.copyCreativeData=function(t){this.creativeData=Re(Re({},t.creativeData),this.extraContent),this.kargoCreative=t.kargoCreative,this.kargoCreativeData=t.kargoCreativeData,t.sspCreativeData&&(this.sspCreativeData=t.sspCreativeData),t.dfpCreativeData&&(this.dfpCreativeData=t.dfpCreativeData),t.hephaestusData&&(this.hephaestusData=t.hephaestusData)},i.fetchDfpResponse=function(t,e){var r=this;this.responseType="DFP";var i=this.getDfpSource(),n=t.adm_prefix,o=t.adm_suffix;n&&(this.extraContent.prefix=this.win.atob(n)),o&&(this.extraContent.suffix=this.win.atob(o)),i?(t.targeting?i.customTargeting=t.targeting:i.customTargeting={kraken_id:t.kraken_id},i.fetchResponse((function(n){if(n)r.logger.debug("Kraken - No Ad Response"),r.errorReporter.report(pe,"No Kraken creative received from DFP",{creative:i.customTargeting?i.customTargeting.kraken_id:""}),Oe.reportAdMetric({type:"failure",version:"6.37.0",errCode:"no-rsp-dfp"},r.slotConfig,r.logger),e(n);else{r.copyCreativeData(i);var o={dfpCreative:r.dfpCreativeData.creative,dfpLineItem:r.dfpCreativeData.lineItem};r.addTrackers(t,o),t.kraken_slot_id&&(r.kargoCreativeData.kraken_slot_id=t.kraken_slot_id),r.logger.debug("Kraken - Ad Response",r.getCreativeData());var a=r.getSSPCreativeData();a&&r.logger.debug("Kraken - KSSP Metadata",a);var s=r.getDFPCreativeData();s&&r.logger.debug("Kraken - DFP Metadata",s),e()}}))):e(Te.errNotSet("DFP Source"))},i.processKrakenRequestUrl=function(t,e){var r=this;T(t,this.win,0,!0,(function(t,i){t?(r.logger.debug("Kraken - No Ad Response"),e(t)):(r.rawResponse=i,i.targeting&&r.getDfpSource()?r.fetchDfpResponse(i,e):r.extractCreativeData(i).then((function(){r.reportByteMetric(i.adm,r.getCreativeData().format),r.logger.debug("Kraken - Ad Response",r.getCreativeData()),e()})))}))},i.processKrakenResponse=function(){var t=St(Ot().mark((function t(e,i){var n,o;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.rawResponse=e,!e.adm&&!e.adms){t.next=9;break}return t.next=4,this.extractCreativeData(e);case 4:this.isHephaestusSource(e)||(this.reportByteMetric(e.adm,this.getCreativeData().format),n=yt(e.adm,"krg_ad_info"),o={},"direct"===e.auction_type&&(o={creativeId:r()(n,"asdata.creid",null)}),this.addTrackers(e,o)),this.logger.debug("Kraken - Ad Response",this.getCreativeData()),i(),t.next=10;break;case 9:this.fetchDfpResponse(e,i);case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),i.fetchResponse=function(){var t=St(Ot().mark((function t(e){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.logger.debug("Kraken - Ad Request\n    Serve Url: "+this.getKrakenRequestUrl()+"\n    Pre-Populated Response:",this.getKrakenResponse()),!this.getKrakenRequestUrl()){t.next=5;break}this.processKrakenRequestUrl(this.getKrakenRequestUrl(),e),t.next=11;break;case 5:if(!this.getKrakenResponse()){t.next=10;break}return t.next=8,this.processKrakenResponse(this.getKrakenResponse(),e);case 8:t.next=11;break;case 10:e(Te.errCant("Make Ad Request"));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(be);var Pe=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i)||this).sourceElement=null,n.sequenceId=null,n.type="Hephaestus",n.ordered=!0,n.hephaestusData={creativeId:null,advertiser:null,campaign:null,lineItem:null,placement:null,site:null,format:null,sequenceKey:"ul"},n.SLOT_TIMEOUT=500,n.errorReporter=new ce(n.win,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}It(e,t);var r=e.prototype;return r.getHephData=function(){return this.hephaestusData},r.setSourceElement=function(t){this.sourceElement=t,this.win.__krg_sourceElements=this.win.__krg_sourceElements||[],this.win.__krg_sourceElements.push(t)},r.extractCreativeData=function(){var e=St(Ot().mark((function e(r){var i,n,o,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.adms||r.adm){e.next=4;break}return this.creativeData=null,this.errorReporter.report(ve,"Missing ad markup (adm or adms)"),e.abrupt("return");case 4:if(i=null,!r.adms||!r.isBrandedTakeover){e.next=17;break}if(r.adms.ol||r.adms.ul){e.next=9;break}return this.errorReporter.report(ve,"Missing both ol and ul in adms"),e.abrupt("return");case 9:return r.sequenceId&&(this.sequenceId=r.sequenceId),e.next=12,this.handleSequential(r.adms);case 12:if(i=e.sent){e.next=17;break}return this.creativeData=null,this.errorReporter.report(ve,"Unable to choose sequential adm",{}),e.abrupt("return");case 17:if(r.adm?(n=r.adm,this.logger.debug("Hephaestus - Standard adm")):i&&(n=i,this.logger.debug("Hephaestus - Special adms sequential response")),!n){e.next=26;break}return o=yt(n,"krg_ad_info"),a=null,o&&o.asdata&&(this.hephaestusData.creativeId=o.asdata.creid||o.creativeId||null,a=o.asdata.creid,this.hephaestusData.advertiser=o.asdata.advid||null,this.hephaestusData.campaign=o.asdata.camid||null,this.hephaestusData.lineItem=o.asdata.linid||null,this.hephaestusData.placement=o.asdata.aduid||null,this.hephaestusData.site=o.asdata.sitid||null),this.hephaestusData.creativeId=a||o.creativeId||null,e.next=25,t.prototype.extractCreativeData.call(this,n);case 25:this.addTrackers(r,this.hephaestusData);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.handleSequential=function(){var t=St(Ot().mark((function t(e){var r,i,n=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.win.__krg_adms=this.win.__krg_adms||e,r=e,t.next=4,new Promise((function(t){return setTimeout(t,n.SLOT_TIMEOUT)}));case 4:return i=this.win.__krg_sourceElements,t.abrupt("return",this.chooseAdm(r,i));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.chooseAdm=function(t,e){var r=this,i=this.sortSources(e);this.handleSequenceId()&&this.win.__krg_used_sources&&(this.logger.debug("New sequence found in response"),this.win.__krg_used_sources.forEach((function(t){i=i.filter((function(e){return e!==t}))})),this.win.__krg_sourceElements=i);var n=this.createSequentialMap(i,t),o=null,a=null;if(Object.keys(n).forEach((function(t){n[t].source===r.sourceElement&&(o=n[t].creative,a=t)})),o){var s="randomly chosen from ordered";if(t.ul&&t.ul.includes(o))s="chosen randomly from unordered";else if(this.ordered&&t.ol){s="#"+a+" from ordered chosen";var c=Object.keys(t.ol).find((function(e){return t.ol&&t.ol[e]===o}));c&&(this.hephaestusData.sequenceKey="ol"+c)}this.assignWindowSources(),o=this.replaceMacroValues(this.win.atob(o));var l={slot:this.slotConfig.getId(),creativeHtml:o};this.logger.debug("Hephaestus - Sequential Adm "+s,l)}else this.errorReporter.report(ve,"Unable to choose sequential adm");return o},r.sortSources=function(t){var e=[];return Object.keys(t).length?e=t.slice(0).sort((function(t,e){return t.parentNode.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top})):this.errorReporter.report(ve,"No source elements found for slots on page"),e},r.createSequentialMap=function(t,e){var r=this,i={};return t.map((function(n,o){var a=o+1;i[a]={source:t[o],creative:e.ol[a]||function(){if(e.ul&&e.ul.length||e.ol&&Object.keys(e.ol).length){if(e.ul&&e.ul.length)return e.ul[Math.floor(Math.random()*e.ul.length)];if(e.ol&&Object.keys(e.ol).length){r.ordered=!1,r.logger.debug("No unordered adms found, using random ordered adm");var t=Object.values(e.ol);return t[Math.floor(Math.random()*t.length)]}}else r.errorReporter.report(ve,"No creatives in response")}()}})),i},r.handleSequenceId=function(){var t=!1;this.win.__krg_sequence_id&&(this.win.__krg_sequence_id!==this.sequenceId&&(t=!0));return this.win.__krg_sequence_id=this.sequenceId,t},r.assignWindowSources=function(){this.win.__krg_used_sources=this.win.__krg_used_sources||new Set([]),this.win.__krg_used_sources.add(this.sourceElement)},e}(be);function Me(t,e){for(var r,i=t.document.cookie.split(";"),n=null,o=e+"=",a=0;a<i.length;a+=1){for(;" "===i[a].charAt(0);)i[a]=i[a].substring(1,i[a].length);if(0===i[a].indexOf(o)){r=i[a].substring(o.length,i[a].length);try{n=JSON.parse(r)}catch(t){n=r}return n}}return null}function Fe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ue=new S("DFP"),je="krg_ppid",ze=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i)||this).type="DFP",n.customTargeting=null,n.dfpCreativeData={size:null,site:null,placement:null,advertiser:null,campaign:null,lineItem:null,creative:null},n}It(e,t);var i=e.prototype;return i.getPpid=function(){var t,e=r()(this.win,"Kargo.Plugin.Cerberus");return e&&e.getLexId()?t=e.getLexId():Me(this.win,je)?t=Me(this.win,je):(t=(0,c.DO)(this.win),function(t,e,r,i){void 0===i&&(i=0);var n=e+"=";n+="object"==typeof r?JSON.stringify(r):r,i&&(n+="; expires="+new Date(Date.now()+i).toUTCString()),n+="; path=/";var o=Q(t),a=$(t),s=n;(o!==q||a>=13)&&(s+="; SameSite=None; Secure"),t.document.cookie=s,null===Me(t,e)&&(t.document.cookie=n)}(this.win,je,t)),t},i.getDFPCreativeData=function(){return this.dfpCreativeData},i.getApprovedFormats=function(t){var e=this.slotConfig.getAllFormatConfigs(),r=o(this.win),i=a(this.win),n=[];return Object.keys(e).filter((function(t){return r&&!i?Bt.includes(t.toLowerCase()):t})).forEach((function(r){var i=zt[r],o=e[r].isApprovedForDirect();i&&("true"===t||o)&&n.push(i.dfpShortname)})),n.join(" ")},i.getPluginsParams=function(){var t={},e=r()(this.win,"Kargo.Plugin.Cerberus");if(e){e.getLexId()&&(t.kid=e.getLexId());var i=e.getSegments();i&&(t.mas=i.join(" "))}return t},i.getTargetParams=function(){var t,e=g(this.win),r=h(e,"krg_qa"),i=Q(this.win),n={OS:i,AUTOPLAY:rt(this.win),BROWSER:Z(this.win),format:this.getApprovedFormats(r),OS_VERSION:i+" "+$(this.win),PAGE_URL:this.win.location.href,Position:this.slotConfig.getPosition(),SUPPORTS:this.win.navigator.cookieEnabled?"COOKIES":"",https:"https:"===this.win.location.protocol,krg_imp_id:this.getImpressionId(),slot:this.slotConfig.getId(),uuid:this.getImpressionId(),version:"6.37.0"};t=this.win,/^[^\/]*\/\/[^\/]*($|(\/|\?.*|\#.*)*$|\/index\.(.*)$)/i.test(g(t))&&(n.IS_HOMEPAGE=!0,n.SECTION="homepage");var o=h(e,"dfpKeyval")&&h(e,"dfpKeyval").split(";");if(o)for(var a=0;a<o.length;a+=1){var s=o[a].split(":"),c=s[0],l=s[1];n[c]=l}var u=this.getPluginsParams();n=Ne(Ne({},n),u);var d=this.customTargeting;d&&Object.keys(d).forEach((function(t){n[t]=d[t]}));return n},i.getRequestUrl=function(){if(!this.requestUrl&&this.slotConfig.getDFPConfig().getUnitId()&&this.slotConfig.getDFPConfig().getSize()){var t=[],e=this.getTargetParams();Object.keys(e).forEach((function(r){var i=e[r];t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}));var r=t.join("&");this.requestUrl="https://pubads.g.doubleclick.net/gampad/adx?iu="+encodeURIComponent(this.slotConfig.getDFPConfig().getUnitId())+"&sz="+encodeURIComponent(this.slotConfig.getDFPConfig().getSize())+"&t="+encodeURIComponent(r)+"&mob=js&ppid="+this.getPpid()+"&c="+u()}return this.requestUrl},i.extractCreativeData=function(){var e=St(Ot().mark((function e(r){var i,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=yt(r,"krg_ad_info"))&&i.asdata&&((n=i.asdata.size)&&n.h&&n.w&&(this.dfpCreativeData.size=n.w+"x"+n.h),this.dfpCreativeData.site=i.asdata.sitid||null,this.dfpCreativeData.placement=i.asdata.aduid||null,this.dfpCreativeData.advertiser=i.asdata.advid||null,this.dfpCreativeData.campaign=i.asdata.camid||null,this.dfpCreativeData.lineItem=i.asdata.linid||null,this.dfpCreativeData.creative=i.asdata.creid||null),e.next=4,t.prototype.extractCreativeData.call(this,r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.replaceKrakenDfpMacros=function(t){return t.replace(Rt.LINE_ITEM,this.dfpCreativeData.lineItem).replace(Rt.CREATIVE,this.dfpCreativeData.creative)},i.fetchResponse=function(t){var e=this;this.logger.debug("DFP - Ad Request\n    Ad Unit: "+this.slotConfig.getDFPConfig().getUnitId()+"\n    Size: "+this.slotConfig.getDFPConfig().getSize()+"\n    Target Params:",this.getTargetParams()),this.isCustomRequestUrl()&&this.logger.debug("DFP - Using Custom Request Url: "+this.getRequestUrl());T(this.getRequestUrl(),this.win,0,!0,(function(r,i){r?(e.logger.debug("DFP - No Ad Response"),t(r)):"string"!=typeof i?(e.logger.debug("DFP - No Ad Response"),t(Ue.errInvalid("Response"))):(e.rawResponse=i,e.extractCreativeData(i).then((function(){e.logger.debug("DFP - Ad Response",e.getCreativeData()),t()})))}))},e}(be),Ke=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).type="KrakenAdRequest",e.hephaestusSource=null,e.socialCanvasSegments=[],e.socialEmbedUrl="",e.KRAKEN_AD_REQUEST_URL="https://krk.kargo.com/api/v1/getad",e.TIMEOUT=3e3,e.errFactory=new S("KrakenAdRequest"),e.krakenCreativeData={krgImpId:"",size:"",auctionType:"pmp",dealId:"",dealName:"",advertiserDomain:"",site:"",placement:"",advertiser:"",campaign:"",lineItem:"",creative:"",admRequestUrl:"",biddableId:""},e.discardOpenTracker=null,e.dfpData={size:null,site:null,placement:null,advertiser:null,campaign:null,creative:null,lineItem:null},e.hephCreativeId=null,e}It(e,t);var i=e.prototype;return i.getRequestJson=function(){if(this.requestJson)return this.requestJson;var t=this.slotConfig.getPlatform(),e=g(this.win),i=!!h(e,"krg_debug");h(e,"ad_id")||h(e,"AD_ID");"MobileApp"===t&&this.win.__krg_page_url_override&&(e=this.win.__krg_page_url_override);var n={kargoID:null,clientID:"",tdID:"",crbIDs:{},optOut:!1,usp:null,gdpr:{applies:!1,consent:""}},o=r()(this.win,"Kargo.Plugin.Cerberus");o&&(n.optOut=o.isOptOut(),n.clientID=o.getClientId()||"",n.usp=o.getUSPrivacy(),n.gdpr.applies=o.gdprApplies(),n.gdpr.consent=o.gdprConsent(),n.optOut||(n.kargoID=o.getLexId(),n.crbIDs=o.getSyncIds()||{},n.tdID=o.getTdID()||""));var a=Me(this.win,"krg_crb")||"";return this.requestJson={debug:i,adSlotIDs:[this.slotConfig.getId()],timestamp:Date.now(),timeout:this.TIMEOUT,userIDs:n,pageURL:e,rawCRB:a,socialCanvasSegments:this.socialCanvasSegments,socialEmbedUrl:this.socialEmbedUrl},this.requestJson},i.getKrakenCreativeData=function(){return this.krakenCreativeData},i.setResponse=function(t){this.responseJson=t},i.setHephaestusSource=function(t){this.hephaestusSource=t},i.getHephaestusSource=function(){return this.hephaestusSource},i.isHephaestusSource=function(t){return this.getHephaestusSource()&&t.adms},i.setSocialCanvasSegments=function(t){this.socialCanvasSegments=t},i.setSocialEmbedUrl=function(t){this.socialEmbedUrl=t},i.getRequestUrl=function(){if(!this.requestUrl){var t=this.win.JSON.stringify(this.getRequestJson()),e=a(this.win)?1:0,r=g(this.win),i=h(r,"dfp_id")||h(r,"DFP_ID")||h(r,"ad_id")||h(r,"AD_ID"),n={json:encodeURIComponent(t),adtag_version:"6.37.0",include_direct:1,google_amp:e};i&&(n.ad_id=i);var o=Object.entries(n).map((function(t){return t.join("=")})).join("&");this.requestUrl=this.KRAKEN_AD_REQUEST_URL+"?"+o}return this.requestUrl},i.validateDfpId=function(t){return"string"!=typeof t&&(t=""+t),!(t&&!t.match(/^\d+$/))},i.extractCreativeData=function(){var e=St(Ot().mark((function e(i){var n,o,a,s,c,l,u,h,g,d,p,f,v,m,k,b,y,w=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="direct"===i.auction_type&&i.adm_request_url,o=i.adms&&this.getHephaestusSource(),a={},i.adm&&(a=yt(i.adm,"krg_ad_info")),(s=r()(a,"asdata"))&&(this.hephCreativeId=a.asdata.creid||null),n&&s&&((c=a.asdata.size)&&c.h&&c.w&&(this.dfpData.size=c.w+"x"+c.h),this.dfpData.site=a.asdata.sitid||null,this.dfpData.placement=a.asdata.aduid||null,this.dfpData.advertiser=a.asdata.advid||null,this.dfpData.campaign=a.asdata.camid||null,this.dfpData.lineItem=a.asdata.linid||null,this.dfpData.creative=a.asdata.creid||null,l=!1,Object.keys(this.dfpData).forEach((function(t){if(re.includes(t)){var e=w.dfpData[t];e&&!w.validateDfpId(e)&&(l=!0,e=w.dfpData[t]=null),e&&!w.krakenCreativeData[t]&&(w.krakenCreativeData[t]=e)}})),l&&this.errorReporter.report(de,"DFP ID field value invalid",{creative:this.krakenCreativeData.creative,deal_id:this.krakenCreativeData.dealId,campaign_id:this.krakenCreativeData.campaign,line_item_id:this.krakenCreativeData.lineItem})),u=i.adm_prefix,h=i.adm_suffix,u&&(this.creativeData.prefix=u),h&&(this.creativeData.suffix=h),!o){e.next=18;break}return e.next=13,this.getHephaestusSource().extractCreativeData(i);case 13:this.creativeData=this.getHephaestusSource().creativeData,this.kargoCreative=this.getHephaestusSource().kargoCreative,this.kargoCreativeData=this.getHephaestusSource().kargoCreativeData,e.next=20;break;case 18:return e.next=20,t.prototype.extractCreativeData.call(this,i.adm);case 20:if(i.pageViewId&&"isBrandedTakeover"in i&&setTimeout((function(){var t=r()(w.win,"Kargo.Plugin.Cerberus");t&&t.handleBrandedTakeover(i.isBrandedTakeover,i.pageViewId)})),i.format||"open"===i.auction_type){e.next=26;break}this.errorReporter.report(pe,"No Format in Response"),e.next=38;break;case 26:if(this.creativeData.format||!i.format){e.next=30;break}this.creativeData.format=i.format,e.next=38;break;case 30:if(!i.format||i.format.toLowerCase()===this.creativeData.format.toLowerCase()){e.next=38;break}if(g="Format Mismatch "+i.creative_id+" (Creative: "+this.creativeData.format+" | Reported: "+i.format+")",this.errorReporter.report(pe,g,{format:this.creativeData.format,source:"SSP"}),this.slotConfig.getFormatConfig(this.creativeData.format)){e.next=38;break}if(this.creativeData.format=i.format,this.slotConfig.getFormatConfig(i.format)){e.next=38;break}return this.logger.debug("Slot supports neither response format nor creative format - destroying"),e.abrupt("return",Promise.reject(new Error(g)));case 38:if("open"===i.auction_type&&(this.creativeData.settings.branding="advertisement",i.format||(d=r()(this.creativeData,"settings",{}),p=this.slotConfig.getAllFormatConfigs?this.slotConfig.getAllFormatConfigs():{},f=le.getSupportedPMPFormats(p),v=ue.determineFormat(i.size,d,f),this.creativeData.format=v)),"native"!==i.creative_type||!i.adm){e.next=58;break}m=null;try{m=JSON.parse(i.adm)}catch(t){this.errorReporter.report(pe,"Error parsing Native JSON: "+t.message,{creative:i.krg_imp_id,format:i.format||"unknown"}),this.creativeData=null}if(null===m){e.next=58;break}if(this.creativeData.content="",this.creativeData.settings.native=m,i.creative_optimizer&&(this.creativeData.settings.native.creativeOptimizer=i.creative_optimizer),this.slotConfig.getFormatConfig(Ft)?this.creativeData.format=Ft:this.creativeData.format=Pt,!(k=m.assets)||!k.length){e.next=58;break}b=0;case 50:if(!(b<k.length)){e.next=58;break}if(!k[b].video||!k[b].video.vasttag){e.next=55;break}return this.creativeData.settings.native.vast=k[b].video.vasttag,this.creativeData.format=Mt,e.abrupt("break",58);case 55:b+=1,e.next=50;break;case 58:(y=r()(i.tracking,"view",null))&&(this.kargoCreativeData.krakenViewabilityTracker=y.replace("{CONTEXT}",i.context)),this.krakenCreativeData.advertiserDomain=i.advertiser_domain,this.krakenCreativeData.auctionType=i.auction_type,this.krakenCreativeData.creative||(this.krakenCreativeData.creative=i.creative_id),this.krakenCreativeData.krgImpId=i.krg_imp_id,this.krakenCreativeData.dealId=i.deal_id,this.krakenCreativeData.dealName=i.deal_name,this.krakenCreativeData.size=i.size,this.krakenCreativeData.admRequestUrl=i.adm_request_url,this.krakenCreativeData.biddableId=i.biddable_id;case 69:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.validateResponse=function(t){var e=this,i=function(t){e.errorReporter.report(pe,"Kraken response validation error: "+t)};if("number"==typeof t.format?(i("Format number instead of string"),delete t.format):"pmp"!==t.auction_type||t.format||this.creativeData.format||i("PMP missing format"),t.auction_type||(t.adms&&this.hephaestusSource?t.auction_type="direct":(i("Missing auction type"),t.auction_type="open")),!t.adm&&!t.adms){var n=null;n="Missing ad markup (adm)",""===t.adm&&(n="Empty ad markup (adm)",delete t.adm),i(n)}var o=r()(t,"tracking.billable");return o&&0!==o.length||i("No billable trackers"),t},i.fetchResponse=function(e){var r=this;this.logger.debug("KrakenAdRequest - Ad Request\n    Request Params:",this.getRequestJson());var i=this.getRequestUrl();return this.isCustomRequestUrl()&&this.logger.debug("KrakenAdRequest - Using Custom Request Url: "+i),(void 0!==this.responseJson?Promise.resolve(this.responseJson):this.requestUrlPromisify(i)).then((function(t){if(!t||"noad"===t.creative_type||0===Object.entries(t).length)return r.win.socialCanvas&&r.win.socialCanvas.recordBidResult&&r.win.socialCanvas.recordBidResult(),Promise.reject(r.errFactory.errNoResponse("JSON"));"SocialCanvas"===t.format&&r.win.socialCanvas&&r.win.socialCanvas.recordBidResult&&r.win.socialCanvas.recordBidResult({creative_id:t.creative_id,deal_id:t.deal_id,biddable_id:t.biddable_id});var e=t.adm_request_url||null;return e?r.requestUrlPromisify(e).then((function(e){return t.adm=e,t})).catch((function(t){return Promise.reject(t)})):t})).then(function(){var i=St(Ot().mark((function i(n){var o,a;return Ot().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r.rawResponse=n,o=r.validateResponse(n),t.prototype.setImpressionId.call(r,n.krg_imp_id),t.prototype.setExtraMacrosCreativeId.call(r,n.creative_id),r.rawResponse=o,i.next=7,r.extractCreativeData(o);case 7:a={dfpCreative:r.dfpData.creative,dfpLineItem:r.dfpData.lineItem,creativeId:r.hephCreativeId},r.addTrackers(o,a),r.logger.debug("KrakenAdRequest - Ad Response",r.getCreativeData()),r.logger.debug("KrakenAdRequest - Metadata",r.getKrakenCreativeData()),e();case 12:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()).catch((function(t){r.logger.debug("KrakenAdRequest - No Ad Response"),r.requestError=t||r.errFactory.errNoResponse("JSON"),e(r.requestError)}))},i.requestUrlPromisify=function(t){var e=this;return new Promise((function(r,i){T(t,e.win,0,!0,(function(t,e){t?i(t):r(e)}))}))},e}(be),qe=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i)||this).type="Passback",n.passbackCreativeData={html:null,size:null,format:null},n}It(e,t);var r=e.prototype;return r.getPassbackCreativeData=function(){return this.passbackCreativeData},r.extractCreativeData=function(){var e=St(Ot().mark((function e(r){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.prototype.extractCreativeData.call(this,r);case 2:this.passbackCreativeData.html=this.slotConfig.getPassbackConfig().getHtml(),this.passbackCreativeData.size=this.slotConfig.getPassbackConfig().getSize(),this.passbackCreativeData.format=this.slotConfig.getPassbackConfig().getFormat(),this.creativeData.format=this.creativeData.format||this.slotConfig.getPassbackConfig().getFormat(),this.creativeData.settings.branding="none";case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.fetchResponse=function(t){var e=this;this.logger.debug("PASSBACK - Ad Request\n    Format: "+this.slotConfig.getPassbackConfig().getFormat()+"\n    Size: "+this.slotConfig.getPassbackConfig().getSize()+"\n    Html: ",this.slotConfig.getPassbackConfig().getHtml());var r=this.slotConfig.getPassbackConfig().getHtml();this.rawResponse=r,this.extractCreativeData(r).then((function(){e.logger.debug("PASSBACK - Ad Response",e.getCreativeData()),t()})).catch((function(t){return e.logger.debug("PASSBACK - Exception",t)}))},e}(be),Be=function(){function t(t){this.win=t,this.active=!1,this.api=null,this.status=null,this.lastEventData=null,this.isRegistered=!1,this.initialSize={width:0,height:0},this.win.$sf&&this.win.$sf.ext&&(this.active=!0,this.api=this.win.$sf.ext)}return t.prototype.isActive=function(){return this.active},t.prototype.findContainerApi=function(){return Promise.resolve(this.isActive())},t.prototype.getApi=function(){return this.api},t.prototype.getApiStatus=function(){return this.status},t.prototype.getContainerStatus=function(){return this.api?this.api.status():null},t.prototype.getLastEventData=function(){return this.lastEventData},t.prototype.getSize=function(){var t={width:0,height:0};if(this.api){var e=this.api.geom();t={width:e.self.w,height:e.self.h}}return t},t.prototype.getContainerSize=function(){return this.getSize()},t.prototype.getSupport=function(){return this.api?this.api.supports():null},t.prototype.setInitialSize=function(t,e){var r=this;this.api&&(this.initialSize.width=t,this.initialSize.height=e,this.isRegistered=!0,this.api.register(t,e,(function(t,e){r.status=t,r.lastEventData=e})))},t.prototype.setExpandedSize=function(t,e){if(this.api){var r=this.getSize();if(r.width!==t||r.height!==e){var i=this.getSupport();this.api.expand({b:e,r:t,push:!!i&&i["exp-push"]})}return Promise.resolve()}return Promise.reject(new Error("SafeFrame API not set"))},t.prototype.setContainerSize=function(t,e){return this.api&&t&&e&&t>0&&e>0?(this.isRegistered||this.setInitialSize(t,e),this.setExpandedSize(t,e)):Promise.reject(new Error("SafeFrame API not set or invalid size of "+t+"x"+e))},t.prototype.noAdToDisplay=function(){},t.prototype.getInViewPercentage=function(){return this.api?this.api.inViewPercentage():0},t.prototype.isVisible=function(){return this.getInViewPercentage()>0},t}(),He=function(){function t(t){this.win=t,this.active=!1,this.renderStarted=!1,this.api=null,this.size={width:0,height:0},this.percentInView=0}return t.prototype.findContainerApi=function(){var t=this;return new Promise((function(e){var r,i,n,o=function(r){r&&r.observeIntersection&&r.requestResize&&(t.setApi(r),t.active=!0),e(t.active)};if(t.win.context)o(t.win.context);else if(t.win.AMP_CONTEXT_DATA&&t.win.AMP_CONTEXT_DATA.ampcontextFilepath){var a=t.win.AMP_CONTEXT_DATA.ampcontextFilepath;r=a,i=t.win,R(r,i,(n={}).timeout||null,(function(){o(t.win.context||null)}),D(n,["timeout"]))}else o(null)}))},t.prototype.setApi=function(t){var e=this;this.api=t,this.size.width=this.win.innerWidth,this.size.height=this.win.innerHeight,this.api.observeIntersection((function(t){e.api.hidden?e.percentInView=0:e.percentInView=100*t[t.length-1].intersectionRatio}))},t.prototype.isActive=function(){return this.active},t.prototype.getApi=function(){return this.api},t.prototype.getContainerSize=function(){return this.size},t.prototype.isVisible=function(){return this.getInViewPercentage()>0},t.prototype.getInViewPercentage=function(){return this.percentInView},t.prototype.setContainerSize=function(t,e){var r=this,i=!1;return this.api?(!this.renderStarted&&this.api.renderStart&&(this.api.renderStart({width:t,height:e}),this.renderStarted=!0,i=!0),i||this.size.width!==t||this.size.height!==e?this.api.requestResize(t,e).then((function(){r.size.width=t,r.size.height=e,i&&r.api.signalInteractive()})).catch((function(t){return i&&r.api.signalInteractive(),Promise.reject(t)})):Promise.resolve()):Promise.reject(new Error("GoogleAmp API not set"))},t.prototype.noAdToDisplay=function(){this.api&&this.api.noContentAvailable()},t.prototype.getMasterWindow=function(){return this.api?this.api.master:null},t}(),Ge=function(){function t(t){this.type=null,this.ready=!1,this.win=n(t),this.safeFrame=new Be(this.win),this.googleAmp=new He(this.win)}return t.prototype.getType=function(){return this.type},t.prototype.detectEnvironment=function(){var t=this;return this.ready?Promise.resolve(this.type):Promise.all([this.googleAmp.findContainerApi(),this.safeFrame.findContainerApi()]).then((function(e){var r=e[0],i=e[1];return t.type=r?"GoogleAmp":i?"SafeFrame":null,t.ready=!0,t.type}))},t.prototype.isInContainer=function(){return null!==this.type},t.prototype.callContainerMethod=function(t,e,r){void 0===r&&(r=null);var i=r;switch(this.type){case"GoogleAmp":this.googleAmp[t]&&(i=this.googleAmp[t].apply(this.googleAmp,e));break;case"SafeFrame":this.safeFrame[t]&&(i=this.safeFrame[t].apply(this.safeFrame,e))}return i},t.prototype.isVisible=function(){return this.callContainerMethod("isVisible",[],!1)},t.prototype.getInViewPercentage=function(){return this.callContainerMethod("getInViewPercentage",[],0)},t.prototype.setContainerSize=function(t,e){return this.callContainerMethod("setContainerSize",[t,e])},t.prototype.getContainerSize=function(){return this.callContainerMethod("getContainerSize",[],{height:null,width:null})},t.prototype.noAdToDisplay=function(){this.callContainerMethod("noAdToDisplay",[])},t}(),We=function(){function t(){}return t.extractCreativeInfoFromConfig=function(t){var e=t.source;if(e){if(e.dfp)return{source:"dfp",id:e.dfp.creative};if(e.hephaestus)return{source:"hephaestus",id:e.hephaestus.creativeId};if(e.ssp)return{source:"ssp",id:e.ssp.rtbCreativeId};if(e.kraken)return{source:"kraken",id:e.kraken.creative}}return{}},t}(),Je=new S("AdRequest"),Ze=["companion_div","sc_background_div","sc_foreground_div","debug","externalId","getAdTimestamp","positionElement","positionLocation","previewMode","sourceElement","sourceWindow","waitForLoad","onCreate","onLoad","onDisplay","onSizeChange","onVisible","onNotVisible","onViewable","onDestroy","platform_version"],Qe=function(){function t(t,e,i,n,o,a){this.FAKE_UUID="00000000-0000-0000-0000-000000000000",this.win=t,this.logger=e,this.tracking=i,this.slotConfig=n,this.sources=o,this.params=a,this.failedResponse=!1,this.resolvedSource=null,this.creativeConfig=null,this.formatConfig=null,this.startTimestamp=Date.now(),this.resolvedTimestamp=null,this.isMeasuringViewability=!1,this.id=r()(this.params,"kraken.krg_imp_id",this.FAKE_UUID),this.creativeId=r()(this.params,"kraken.creative_id",""),this.adFormat=r()(this.params,"kraken.format","");for(var s=0;s<this.sources.length;s+=1)this.sources[s].setImpressionId(this.id),this.sources[s].setExtraMacrosCreativeId(this.creativeId),this.sources[s].setExtraMacrosAdFormat(this.adFormat)}var e=t.prototype;return e.getId=function(){return this.id},e.getSlotConfig=function(){return this.slotConfig},e.getFormatConfig=function(){return this.formatConfig},e.getResolvedSource=function(){return this.resolvedSource},e.getCreativeConfig=function(){return this.creativeConfig},e.getParams=function(){return this.params},e.generateCreativeConfig=function(){var t=this;if(!this.creativeConfig&&this.resolvedSource){if(this.creativeConfig=this.resolvedSource.getCreativeData(),this.isMeasuringViewability&&(this.creativeConfig.isMeasuringViewability=this.isMeasuringViewability),this.slotConfig&&(this.creativeConfig.slot=this.slotConfig.getId(),this.creativeConfig.format)){"VastMiddleBanner"===this.creativeConfig.format&&(this.creativeConfig.format="OutstreamVideo");var e=this.slotConfig.getAllFormatConfigs();if(Object.keys(e).forEach((function(e){e.toLowerCase()===t.creativeConfig.format.toLowerCase()&&(t.creativeConfig.format=e)})),this.formatConfig=this.slotConfig.getFormatConfig(this.creativeConfig.format),this.formatConfig){var r=this.formatConfig.getCreativeConfig();if(r){var i=this.creativeConfig.settings;i&&(i.branding&&(r.branding=i.branding),r.wrapper_fill&&"wrapper_fill"in i&&(r.wrapper_fill=i.wrapper_fill)),this.creativeConfig.settings=(0,c.TS)(this.creativeConfig.settings||{},r)}}else this.logger.debug("Format "+this.creativeConfig.format+" not set in slot config!")}if(this.creativeConfig.source={},this.creativeConfig.source.tag="adtag",this.creativeConfig.source.type=this.resolvedSource.getType(),this.resolvedSource.getHephData&&(this.creativeConfig.source.hephaestus=this.resolvedSource.getHephData()),this.resolvedSource.getKargoCreativeData&&(this.creativeConfig.source.kargo=this.resolvedSource.getKargoCreativeData()),this.resolvedSource.getSSPCreativeData&&(this.creativeConfig.source.ssp=this.resolvedSource.getSSPCreativeData()),this.resolvedSource.getDFPCreativeData&&(this.creativeConfig.source.dfp=this.resolvedSource.getDFPCreativeData()),this.resolvedSource.getPassbackCreativeData&&(this.creativeConfig.source.passback=this.resolvedSource.getPassbackCreativeData()),this.resolvedSource.getKrakenCreativeData){var n=this.resolvedSource.getKrakenCreativeData();n.krgImpId&&(this.id=n.krgImpId),this.creativeConfig.source.kraken=n}this.creativeConfig.id=this.id,this.creativeConfig.css="",this.slotConfig.getCss()&&(this.creativeConfig.css=this.slotConfig.getCss()),this.formatConfig&&this.formatConfig.getCss&&this.formatConfig.getCss()&&(this.formatConfig.isIgnoreSlotCss&&this.formatConfig.isIgnoreSlotCss()?this.creativeConfig.css=this.formatConfig.getCss():this.creativeConfig.css+=this.formatConfig.getCss()),Ze.forEach((function(e){void 0!==t.params[e]&&(t.creativeConfig[e]=t.params[e])}))}},e.fail=function(){var t=this,e=new Ge(this.params.sourceWindow||this.win);return e.detectEnvironment().then((function(r){if(null!==r&&e.noAdToDisplay(),t.slotConfig&&t.slotConfig.getFailedRequestFunc())try{(0,c.Bg)(t.win,t.slotConfig.getFailedRequestFunc())}catch(e){var i="Error in Slot Fail Callback:";t.logger.error(i,e),t.logger.report(he,i+" "+e.name+" - "+e.message,{slot:t.slotConfig?t.slotConfig.getId():"unknown",version:"6.37.0"})}t.failedResponse=!0}))},e.fetchResponse=function(t){var e=this;if(this.resolvedSource)t();else if(this.sources&&this.sources.length){if(this.slotConfig&&this.slotConfig.getConditionalCheckFunc())try{if(!1===(0,c.Bg)(this.win,this.slotConfig.getConditionalCheckFunc()))return void this.fail().then((function(){return t(Je.errNew("Ad Request failed Conditional Check"))}))}catch(t){var r="Error in Slot Conditional Check:";this.logger.error(r,t),this.logger.report(he,r+" "+t.name+" - "+t.message,{slot:this.slotConfig?this.slotConfig.getId():"unknown",version:"6.37.0"})}var i=null,n=null;!function r(o){var a=e.sources[o];a?a.fetchResponse((function(s){if(s){var c=o+1,l="DFP"===(e.sources[o]||{}).type;i=a.openResponse&&a.openResponse.control_pix_dfp&&l?a.openResponse.control_pix_dfp:null,r(c)}else if("KrakenAdRequest"===a.type&&"open"===a.getKrakenCreativeData().auctionType&&e.sources[o+1]&&"DFP"===e.sources[o+1].type)a.discardOpenTracker&&(n=a.discardOpenTracker),r(o+1);else{i&&E(e.win,i),"DFP"===a.type&&n&&E(e.win,n),e.resolvedTimestamp=Date.now(),e.resolvedSource=a,e.generateCreativeConfig();var u=e.creativeConfig,h=We.extractCreativeInfoFromConfig(u);if(e.slotConfig&&e.slotConfig.getId()){var g={format:e.creativeConfig.format,creativeSource:h.source,creativeId:h.id};e.trackEvent("response",e.slotConfig.getId(),g)}if(e.formatConfig)t();else{h.id;var d=u.format,p="Format '"+u.format+"' not set in '"+u.slot+"' slot config!";if(!e.creativeConfig.format){p="Cannot determine format from ad response";var f=(e.creativeConfig.content||"").match(/"creid":\s*"(\d*?)"/);f&&f[1];var v=(e.creativeConfig.content||"").match(/"format":\s*"([\s\S]*?)"/);d=v&&v[1]||e.getFormatFromSlot()}e.logger.warn(p),e.fail().then((function(){d?(e.creativeConfig.format=d,t()):t(Je.errNew(p))}))}}})):e.fail().then((function(){return t(Je.errNoResponse("","any source"))}))}(0)}else this.fail().then((function(){return t(Je.errNotSet("Sources to get Response"))}))},e.getFormatFromSlot=function(){var t=["TopBanner","MiddleBanner","BottomBanner"],e=["OutstreamVideo","VideoAnchor"],r=this.slotConfig.getAllFormatConfigs(),i=Object.keys(r),n=this.creativeConfig.settings;if(n&&(n.vast_xml||n.vast_url)){for(var o=0;o<i.length;o+=1)if(e.indexOf(i[o])>-1)return i[o]}else if(this.creativeConfig.content)for(var a=0;a<i.length;a+=1)if(t.indexOf(i[a])>-1)return i[a]},e.trackEvent=function(t,e,r){void 0===r&&(r={});var i=Object.assign({impId:this.id},r);this.tracking.trackEvent(t,e,i)},t}(),$e=function(){function t(t,e,r){this.win=t,this.logger=e,this.tracking=r}return t.prototype.create=function(t,e){void 0===e&&(e=null),e&&"object"==typeof e||(e={});var r=g(this.win),i=h(r,"krg_ssp_url")||e.ssp_request_url,n=h(r,"krg_dfp_url")||e.dfp_request_url,o=e.kraken_request_url,a=e.kraken_response,s=h(r,"krg_creative_id"),c=h(r,"krg_time"),l=e.social_canvas_segments,u=e.social_embed_url,d=[],p=this.win.Kargo.Config.getGlobalConfig(),f=p.isSSPEnabled()&&t.getSSPConfig().isEnabled(),v=p.isDFPEnabled()&&t.getDFPConfig().isEnabled();if(s){var m={sspSource:f?new _e(this.win,this.logger,t):null};p.isSSPOpenEnabled()&&m.sspSource&&(m.sspOpenSource=new xe(this.win,this.logger,t,m.sspSource)),m.creative_id=s,c&&(m.response_time=c);var k=new Se(this.win,this.logger,t,m);d.push(k)}else if(t.getOverrideUrl()||e.override_url){var b=new De(this.win,this.logger,t);e.override_url&&b.setRequestUrl(e.override_url),d.push(b)}else if(e.html){var y=new Ie(this.win,this.logger,t);y.setResponse(e.html),d.push(y)}else if(e.kraken_serve_url||e.kraken){var w=new Le(this.win,this.logger,t),_=new Pe(this.win,this.logger,t);if(w.setHephaestusSource(_),v){var C=new ze(this.win,this.logger,t);n&&C.setRequestUrl(n),w.setDfpSource(C)}if(f){var x=new _e(this.win,this.logger,t);if(w.setSspSource(x),p.isSSPOpenEnabled&&p.isSSPOpenEnabled()){var A=new xe(this.win,this.logger,t,x);w.setOpenSource(A)}}e.kraken_serve_url&&w.setKrakenRequestUrl(e.kraken_serve_url),e.kraken&&w.setKrakenResponse(e.kraken),e.sourceElement&&_.setSourceElement(e.sourceElement),d.push(w)}else if(i){var S=new _e(this.win,this.logger,t);if(S.setRequestUrl(i),d.push(S),p.isSSPOpenEnabled&&p.isSSPOpenEnabled()){var D=new xe(this.win,this.logger,t,S);d.push(D)}}else if(n){var I=new ze(this.win,this.logger,t);I.setRequestUrl(n),d.push(I)}else if(o||a){var E=new Ke(this.win,this.logger,t);if(o)E.setRequestUrl(o);else{var O=new Pe(this.win,this.logger,t);E.setHephaestusSource(O),E.setResponse(a),e.sourceElement&&O.setSourceElement(e.sourceElement)}l&&E.setSocialCanvasSegments(l),u&&E.setSocialEmbedUrl(u),d.push(E)}else{var V=new Ke(this.win,this.logger,t);if(l&&V.setSocialCanvasSegments(l),u&&V.setSocialEmbedUrl(u),d.push(V),t.getPassbackConfig().isEnabled()){var R=new qe(this.win,this.logger,t);d.push(R)}}return new Qe(this.win,this.logger,this.tracking,t,d,e)},t}(),Xe=function(){function t(t,e){this.win=t,this.logger=e,this.name="",this.ready=!1,this.readyCallbacks=[],this.readyTimeout=1e3}var e=t.prototype;return e.load=function(){var t=this;return new Promise((function(e){t.setReady(),e()}))},e.isEnabled=function(){var t=!1,e=r()(this.win,"Kargo.Config.getGlobalConfig",(function(){return null}))();e&&(r()(e,"getEnabledPlugins",(function(){return[]}))().indexOf(this.name)>-1&&(t=!0));return t},e.setReady=function(){this.ready=!0;for(var t=0;t<this.readyCallbacks.length;t++)this.readyCallbacks[t]();this.readyCallbacks=[]},e.onReady=function(){var t=this;return new Promise((function(e){t.ready?e():t.readyCallbacks.push((function(){e()}))}))},e.setReadyOnTimeout=function(t){var e=this;void 0===t&&(t=this.readyTimeout),this.win.setTimeout((function(){e.isReady()||e.setReady()}),t)},e.isReady=function(){return this.ready},t}(),Ye=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).name="IframeBuster",e.errFactory=new S("IframeBuster"),e.TIMEOUT=2e3,e.active=!1,e}It(e,t);var i=e.prototype;return i.load=function(){var t=this;return new Promise((function(e){o(t.win)?(new Ge(t.win).detectEnvironment().then((function(r){null===r&&(t.active=!0),t.setReady(),e()})),t.setReadyOnTimeout()):(t.setReady(),e())}))},i.isActive=function(){return this.active},i.requestAd=function(t,e){var i=this;return new Promise((function(n,o){i.logger.report("IFRAME","AdTag loaded in Cross Origin Iframe",{slot:t,version:"6.37.0"});var a=g(i.win).match(/^https?:\/\/[\.a-z0-9-]+\.[a-z]+(?::\d+)?/),s="";if(a&&a[0]&&(s=a[0]),s){var c=s+"/krg_iframebuster.html",l=null,u=r()(i.win,"Kargo.Config.getGlobalConfig",(function(){return null}))();u&&(l=u.getAdTagUrl())&&(e.adTagUrl=l);var h=r()(i.win,"Kargo.self_url",null);if(!l&&h&&(l=h),l){var d,p=i.win.document.createElement("iframe");p.style.visibility="hidden",p.style.position="absolute",p.style.width="1px",p.style.height="1px",p.style.top="0px",p.style.left="0px",p.src=c;var f=function a(s){var c=function(t){i.win.clearTimeout(d),i.win.removeEventListener("message",a),o(i.errFactory.errGet("Source Iframe"))};if(s.origin.indexOf("krg_iframebuster.html")>-1&&s.data&&s.data.status){if(!s.source)return void c(i.errFactory.errGet("Source Iframe"));var u=r()(s.source,"Kargo.IframeBuster");if(!u)return void c(i.errFactory.errGet("IframeBuster","Iframe"));"ready"===s.data.status&&u.loadAdTag(l,(function(r){if(i.win.removeEventListener("message",a),r)c();else{var o=u.getTopNamespace();o&&o.AdTag?o.AdTag.requestAd(t,e,(function(){n()})):c(i.errFactory.errGet("Top Namespace"))}}))}};i.win.addEventListener("message",f),i.win.document.body.appendChild(p),d=i.win.setTimeout((function(){i.win.document.body.removeChild(p),i.win.addEventListener("message",f),o(i.errFactory.errLoad("IframeBuster"))}),i.TIMEOUT)}else o(i.errFactory.errCant("determine AdTag Url"))}else o(i.errFactory.errCant("use iFrameBuster","","no referring domain"))}))},e}(Xe),tr=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).name="Mraid",e.active=!1,e.api=null,e.SCRIPT_URL="https://storage.cloud.kargo.com/ad/network/thirdparty/mraid.js",e.IN_VIEW_PERCENT=.5,e}It(e,t);var r=e.prototype;return r.load=function(){var t=this,e=function(e){return new Promise((function(r){e?(t.active=!0,t.api=e,t.logger.debug("API v"+t.api.getVersion()+" found"),"loading"===t.api.getState()?t.api.addEventListener("ready",(function(){t.api.useCustomClose(!0),t.setReady(),r()})):(t.api.useCustomClose(!0),t.setReady(),r())):(t.setReady(),r())}))};return this.setReadyOnTimeout(),this.win.mraid?e(this.win.mraid):P(this.SCRIPT_URL,this.win,{}).then((function(r){return r&&r.parentNode&&_t(r),e(t.win.mraid)})).catch((function(r){return e(t.win.mraid)}))},r.isActive=function(){return this.active},r.getApi=function(){return this.api},r.getVersion=function(){return this.api&&parseFloat(this.api.getVersion())},r.isVisible=function(){var t=!1;if(this.api&&!this.api.hidden()){var e=this.api.getMaxSize(),r=this.api.getPosition();0!==r.height&&0!==r.width&&r.x<=e.width&&r.x+r.width>=0&&r.y<=e.height&&r.y+r.height>=0&&(t=!0)}return t},r.isInView=function(t){void 0===t&&(t=.5);var e=!1;if(this.isVisible()){var r=this.api.getMaxSize(),i=this.api.getPosition();r.width-i.x>=i.width*t&&i.x+i.width>=i.width*t&&r.height-i.y>=i.height*t&&i.y+i.height>=i.height*t&&(e=!0)}return e},r.isInCompleteView=function(){return this.isInView(1)},r.expand=function(){this.api&&this.api.expand()},r.close=function(){this.api&&this.api.close()},e}(Xe),er="Chrome",rr="Safari",ir="Firefox",nr="Opera",or="Edge",ar="Android",sr="ios",cr="Windows",lr="MacOS",ur="other",hr="Mobile";function gr(t){return t.toLowerCase()}function dr(t){var e=t.navigator.userAgent,r=ur;return e.indexOf("Edge/")>-1?r=gr(or):e.indexOf("Chrome/")>-1?r=gr(er):e.indexOf("Safari/")>-1?r=gr(rr):e.indexOf("Firefox/")>-1?r=gr(ir):e.indexOf(nr)>-1?r=gr(nr):e.indexOf("MSIE")>-1||e.indexOf("Trident/")>-1?r="ie":e.indexOf("FBAN/FBForIPhone")>-1||e.indexOf("FBAN/FBIOS")>-1||e.indexOf("facebookexternalhit/")>-1?r="facebook":e.indexOf("Twitter for iPhone")>-1?r="twitter":e.indexOf("Instagram")>-1?r="instagram":e.indexOf("Pinterest")>-1?r="pinterest":e.indexOf("LinkedInApp")>-1?r="linkedIn":e.indexOf("Snapchat")>-1&&(r="snapchat"),r}function pr(t){var e=t.navigator.userAgent,r=ur;return e.indexOf(ar)>-1?r=gr(ar):/iP(hone|od|ad)/.test(e)?r=sr:/windows/i.test(e)?r=cr:/macintosh/i.test(e)?r=lr:/linux/i.test(e)&&(r="Linux"),r}function fr(t){var e=pr(t),r={};r[gr(ar)]="android",r[gr(sr)]="os",r[gr(lr)]="mac os x",r[gr(cr)]="windows nt";var i=r[gr(e)],n=new RegExp(i+"\\s+(\\d+)[_\\.](\\d+)?[_\\.]?(\\d+)?"),o=gr(t.navigator.userAgent).match(n)||[0,0];return parseInt(o[1],10)}function vr(t){var e=t.navigator.userAgent;return e.indexOf(hr)>-1&&!/iPad|Xoom|SCH-I800|Kindle/.test(e)}function mr(t){var e=t.navigator.userAgent;return/iPad|Xoom|SCH-I800|Kindle/.test(e)||e.indexOf(ar)>=0&&e.indexOf(hr)<0}function kr(t,e){for(var r,i=t.document.cookie.split(";"),n=null,o=e+"=",a=0;a<i.length;a+=1){for(;" "===i[a].charAt(0);)i[a]=i[a].substring(1,i[a].length);if(0===i[a].indexOf(o)){r=i[a].substring(o.length,i[a].length);try{n=JSON.parse(r)}catch(t){n=r}return n}}return null}function br(t,e,r,i){void 0===i&&(i=0);var n=e+"=";(n+="object"==typeof r?JSON.stringify(r):r,i)&&(n+="; expires="+new Date(Date.now()+i).toUTCString());n+="; path=/";var o=pr(t),a=fr(t),s=n;(o!==sr||a>=13)&&(s+="; SameSite=None; Secure"),t.document.cookie=s,null===kr(t,e)&&(t.document.cookie=n)}function yr(t){for(var e=t,r=t.top;e!==r;){var i=void 0;try{i=e.parent.location.href}catch(t){i=!1}if(!i)break;for(var n=e.parent.document.getElementsByTagName("iframe"),o=void 0,a=null,s=0;s<n.length;s+=1)if((o=n[s]).contentWindow===e){a=o;break}if(a&&a.className.split(" ").indexOf("krg-nobust")>-1)break;e=e.parent}return e}var wr=yr(window),_r=__webpack_require__(9666);function Cr(t,e){return decodeURIComponent((new RegExp(e+"=(.+?)(&|$)","i").exec(t)||["",""])[1])}function xr(t){var e="";try{e=t.location.href}catch(t){}return t.AMP_CONTEXT_DATA&&t.AMP_CONTEXT_DATA.sourceUrl?e=t.AMP_CONTEXT_DATA.sourceUrl:t.context&&t.context.sourceUrl?e=t.context.sourceUrl:function(t){var e;try{e=t.top.location.href}catch(t){e=null}return!e}(t)&&t.document.referrer?e=t.document.referrer:Cr(e,"content_url")&&(e=Cr(e,"content_url")),e}var Ar=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Sr=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Dr=function(t){function e(e,r){var i=this.constructor;void 0===r&&(r={});var n=t.call(this,e)||this;return Object.setPrototypeOf(n,i.prototype),n.message=n.buildErrorMessage(e||"",r),n}return Ar(e,t),e.prototype.addContext=function(t,e){var r=e.ctx,i=e.moduleName,n=e.prep,o=e.reason,a=t||"";(i&&(a=i+": "+a),r)&&(a=a+" "+(n||"in")+" "+r);return o&&(a+=": "+o),a},e.prototype.buildErrorMessage=function(t,e){return this.addContext(t,e)},e}(Error),Ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Cannot "+t,e)},e}(Dr),Er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" is disabled",e)},e}(Dr),Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Cannot load "+t,e)},e}(Dr),Vr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Cannot get "+t,e)},e}(Dr),Rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){var r=(t?"No "+t:"Empty")+" response";return this.addContext(r,e)},e}(Dr),Tr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" not supported",Sr({prep:e.prep||"by"},e))},e}(Dr),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" is not set",e)},e}(Dr),Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext(t+" is invalid",e)},e}(Dr),Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.buildErrorMessage=function(t,e){return this.addContext("Request for "+t+" timed out",Sr({prep:e.prep||"after"},e))},e}(Dr),Fr=function(){function t(t){this.moduleName=t}return t.prototype.errCant=function(t,e,r){return new Ir(t,{ctx:e,reason:r,moduleName:this.moduleName})},t.prototype.errDisabled=function(t,e){return new Er(""+t,{ctx:e,moduleName:this.moduleName})},t.prototype.errLoad=function(t,e){return new Or(""+t,{ctx:e,moduleName:this.moduleName})},t.prototype.errGet=function(t,e){return new Vr(""+t,{ctx:e,moduleName:this.moduleName})},t.prototype.errNew=function(t){return new Dr(t,{moduleName:this.moduleName})},t.prototype.errNoResponse=function(t,e){return new Rr(t,{ctx:e,moduleName:this.moduleName})},t.prototype.errNoSupport=function(t,e){return new Tr(t,{ctx:e,prep:"by",moduleName:this.moduleName})},t.prototype.errNotSet=function(t,e){return new Lr(t,{ctx:e,moduleName:this.moduleName})},t.prototype.errInvalid=function(t,e){return new Pr(t,{ctx:e,moduleName:this.moduleName})},t.prototype.errTimeout=function(t,e){return new Mr(t,{ctx:e,moduleName:this.moduleName})},t}(),Nr=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&(r[i[n]]=t[i[n]])}return r};new Fr("ad-util/request");function Ur(t,e,r){void 0===r&&(r=!1);var i=e,n=t.document.createElement("img");if(n.style.position="absolute",n.style.visibility="hidden",n.style.left="-9999px",n.style.top="0",r&&(i+=(e.indexOf("?")>-1?"&":"?")+"_cb="+Date.now()*Math.random()),-1!==i.indexOf("tk.kargo.com")){var o=(0,_r.GK)(t,"Kargo.Plugin.Cerberus.getLexId");o&&o()&&(i=function(t,e){if(!e)return t;var r,i=t;return Object.keys(e).forEach((function(t){r=e[t],i+=(i.indexOf("?")>-1?"&":"?")+t+"="+encodeURIComponent(r)})),i}(i,{kid:o()}))}var a,s=function(t){t.parentNode&&t.parentNode.removeChild(t)};return n.addEventListener("load",(function(){t.clearTimeout(a),s(n)}),!1),a=t.setTimeout((function(){s(n)}),8e3),n.src=i,t.document.body.appendChild(n),n}function jr(t){t&&t.start()}function zr(t){t&&t.stop()}function Kr(t,e,r,i){var n=r.timeout,o=void 0===n?0:n,a=r.withCredentials;return function(t,e,r,i,n,o){if(void 0===o&&(o={}),t&&t.length){var a=new XMLHttpRequest,s=o.latencyTracker;i&&(a.withCredentials=!0),r&&(a.timeout=r),a.onload=function(){if(zr(s),a.status>=200&&a.status<400){var t=(a.responseText||"").trim();if(t.length){try{t=JSON.parse(t)}catch(t){}n(null,t)}else n(new Error("Empty Response"))}else n(new Error("GET Request Failed with Status: "+a.status+" - "+a.statusText))},a.ontimeout=function(t){n(t)},a.onerror=function(t){n(t)},a.open("GET",t,!0),jr(s),a.send()}else n(new Error("Invalid URL"))}(t,0,o,void 0!==a&&a,i,Nr(r,["timeout","withCredentials"]))}var qr="invalid",Br=function(){function t(t,e,r,i,n){void 0===n&&(n=1),this.win=t,this.dataBucket=e,this.allowedReportParamKeys=r,this.params=i,this.counter=n}return t.prototype.createReportUrl=function(){var t=this,e=this.dataBucket;return Object.keys(this.params).forEach((function(r){if(t.allowedReportParamKeys.has(r)){var i=t.params[r];if(i||0===i||!1===i){var n=t.escapeLineProtocolTagKeyOrValue(t.params[r]);e+=","+t.escapeLineProtocolTagKeyOrValue(r)+"="+n}}})),e+=" value="+this.counter,"https://ad-monitor.kargo.com?data="+encodeURIComponent(e)},t.prototype.escapeLineProtocolTagKeyOrValue=function(t){return"object"==typeof t?qr:(""+t).replace(/,|\s|=/g,"\\$&")},t.prototype.report=function(){try{var t=function(t){var e=document.createElement("a");return e.href=t,/\./.test(e.host)?e.host:""}(this.win.location.host);this.params.domain=t||qr,Kr(this.createReportUrl(),this.win,{timeout:1e3,withCredentials:!1},(function(){}))}catch(t){console.error(t)}},t}(),Hr=new Set(["browser","creative","domain","err_code","format","msg","os","platform","slot","source","url","version","deal_id","campaign_id","line_item_id"]),Gr={1:"error",2:"warn",3:"log",4:"debug"},Wr=function(){function t(t,e,r,i){void 0===e&&(e=""),void 0===r&&(r=3),void 0===i&&(i=true),this.label=e,this.level=r,this.reportingEnabled=i,this.win=t}return t.prototype.setLabel=function(t){this.label=t},t.prototype.setLevel=function(t){this.level=t},t.prototype.setReporting=function(t){this.reportingEnabled=t},t.prototype.getLabelString=function(){var t="[KARGO]";if(this.label)if((0,_r.kJ)(this.label))for(var e=0;e<this.label.length;e+=1)t+="["+this.label[e]+"]";else t+="["+this.label+"]";return t},t.prototype.write=function(t,e){var r;if((0,_r.kJ)(e)&&0!==e.length){var i=xr(this.win),n=(0,_r.GK)(this.win,"Kargo.Config.getGlobalConfig");if(n&&n()&&n().isDebug()||Cr(i,"krg_debug")||t<=this.level){var o=e;4===t?o=["%c"+this.getLabelString(),"color: #FF7500"].concat(o):o.unshift(this.getLabelString());for(var a=0;a<o.length;a+=1)o[a]instanceof Error?o[a]=(o[a].name?o[a].name+" - ":"")+o[a].message:"object"!=typeof o[a]||o[a]instanceof HTMLElement||(o[a]=(0,_r.TS)({},o[a]));try{(r=this.win.console)[Gr[t]].apply(r,o)}catch(t){}}}},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(3,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(2,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(1,t)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.write(4,t)},t.prototype.report=function(t,e,r,i){void 0===r&&(r={}),void 0===i&&(i=!1);try{if(this.reportingEnabled){var n={url:xr(this.win),err_code:t,msg:e,platform:(c=this.win,vr(c)?"MobileWeb":mr(c)?"TabletWeb":"Desktop"),os:pr(this.win),browser:dr(this.win)};(0,_r.TS)(n,r);var o="https://s3.amazonaws.com/log.kargo.com/adtag.error",a=[];Object.keys(n).forEach((function(t){a.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]))}));var s=a.join("&");if(s.length&&(o+="?"+s),Ur(this.win,o),!i)new Br(this.win,"ad-tag-error",Hr,n).report()}}catch(t){console.error(t)}var c},t}(),Jr=new Wr(wr,"Ad Data"),Zr=function(){function t(){this.STORE_PREFIX="krg_",this.COOKIE_LIFE_TIME=31536e6,this.data={expireTime:Date.now()},this.isCookieStorageEnabled=!1}return t.supportsLocalStorage=function(){var t=!1;try{var e="__storage_test__";wr.localStorage.setItem(e,e),wr.localStorage.removeItem(e),t=!0}catch(t){}return t},t.prototype.enableCookieStorage=function(t){this.isCookieStorageEnabled=t},t.prototype.getData=function(){return this.data},t.prototype.getExpireTime=function(){return this.data.expireTime},t.prototype.saveData=function(){this.data.expireTime=Date.now()+this.DATA_LIFE_TIME,t.supportsLocalStorage()&&this.updateStorageData(),this.isCookieStorageEnabled?this.updateCookieData():this.removeCookieData()},t.prototype.removeData=function(){t.supportsLocalStorage()&&this.removeStorageData(),this.removeCookieData()},t.prototype.clearData=function(){this.data=this.EMPTY_DATA,this.saveData()},t.prototype.isExpired=function(){return Date.now()>this.data.expireTime},t.prototype.fetchData=function(){this.isCookieStorageEnabled&&(this.fetchCookieData(),this.data.segments&&delete this.data.segments),t.supportsLocalStorage()&&this.fetchStorageData(),this.isCookieStorageEnabled&&this.updateCookieData()},t.prototype.getStoreName=function(){return this.STORE_PREFIX+this.STORE_NAME},t.prototype.encodeDataForStorage=function(t){return btoa(JSON.stringify(t))},t.prototype.decodeDataFromStorage=function(t){var e=null;try{e=JSON.parse(atob(t))}catch(t){}return e},t.prototype.encodeDataForCookie=function(t){return this.encodeDataForStorage(t)},t.prototype.decodeDataFromCookie=function(t){return this.decodeDataFromStorage(t)},t.prototype.fetchStorageData=function(){var t=wr.localStorage.getItem(this.getStoreName());if(t){var e=this.decodeDataFromStorage(t);e&&(this.data=e)}},t.prototype.updateStorageData=function(){try{var t=this.cleanDataForLocalStorage(this.data);wr.localStorage.setItem(this.getStoreName(),this.encodeDataForStorage(t))}catch(t){Jr.report("DATA",t.message)}},t.prototype.removeStorageData=function(){wr.localStorage.removeItem(this.getStoreName())},t.prototype.fetchCookieData=function(){var t=kr(wr,this.getStoreName());if(t){var e=this.decodeDataFromCookie(t);e&&(delete e.segments,this.data=e)}},t.prototype.updateCookieData=function(){var t=this.cleanDataForCookie(this.data);br(wr,this.getStoreName(),this.encodeDataForCookie(t),this.COOKIE_LIFE_TIME)},t.prototype.removeCookieData=function(){br(wr,this.getStoreName(),"",1)},t.prototype.cleanDataForCookie=function(t){return delete t.segments,t},t.prototype.cleanDataForLocalStorage=function(t){return t},t}(),Qr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MAX_COOKIE_SEGMENTS=75,e.UID_STORE_NAME=e.STORE_PREFIX+"uid",e.OLD_STORE_NAME=e.STORE_PREFIX+"cerberus",e.STORE_NAME="crb",e.DATA_LIFE_TIME=864e5,e.EMPTY_DATA={clientId:null,tdID:null,lexId:null,segments:[],syncIds:{},ktcId:null,expireTime:Date.now()+e.DATA_LIFE_TIME,lastSyncedAt:null,pageViewId:"",pageViewTimestamp:null,pageViewUrl:null,usp:null},e.data=Object.assign({},e.EMPTY_DATA),e.isCookieStorageEnabled=!0,e}return Qr(e,t),e.prototype.saveData=function(){if(t.prototype.saveData.call(this),this.isCookieStorageEnabled){var e={clientId:this.data.clientId,userId:this.data.lexId,optOut:"optout"===this.data.lexId};br(wr,this.UID_STORE_NAME,this.encodeUIDCookieData(e),this.COOKIE_LIFE_TIME)}this.removeOldData()},e.prototype.removeData=function(){t.prototype.removeData.call(this),br(wr,this.UID_STORE_NAME,"",1),this.removeOldData()},e.prototype.removeOldData=function(){kr(wr,this.OLD_STORE_NAME)&&br(wr,this.OLD_STORE_NAME,"",1),e.supportsLocalStorage()&&wr.localStorage.removeItem(this.OLD_STORE_NAME)},e.prototype.clearData=function(){if(t.prototype.clearData.call(this),this.isCookieStorageEnabled){br(wr,this.UID_STORE_NAME,this.encodeUIDCookieData({clientId:null,userId:null,optOut:!1}),this.COOKIE_LIFE_TIME)}},e.prototype.getData=function(){return t.prototype.getData.call(this)},e.prototype.cleanDataForCookie=function(t){var e=Object.assign({},t);return delete e.segments,e},e.prototype.encodeDataForCookie=function(t){return encodeURIComponent(JSON.stringify({v:btoa(JSON.stringify(t))}))},e.prototype.encodeUIDCookieData=function(t){return encodeURIComponent(JSON.stringify({v:t}))},e.prototype.decodeDataFromCookie=function(t){var e=null;try{e=JSON.parse(atob(JSON.parse(decodeURIComponent(t)).v))}catch(t){}return e},e.prototype.getClientId=function(){return this.data.clientId},e.prototype.setClientId=function(t){this.data.clientId=t,this.saveData()},e.prototype.getUserId=function(){return this.data.lexId},e.prototype.setUserId=function(t){this.data.lexId=t,this.saveData()},e.prototype.getSegments=function(){return this.data.segments||null},e.prototype.setSegments=function(t){this.data.segments=t,this.saveData()},e.prototype.getSyncIds=function(){return this.data.syncIds},e.prototype.setSyncIds=function(t){this.data.syncIds=t,this.saveData()},e.prototype.getKtcId=function(){return this.data.ktcId},e.prototype.getTdID=function(){return this.data.tdID},e.prototype.getUSPrivacy=function(){return this.data.usp},e.prototype.setKtcId=function(t){this.data.ktcId=t,this.saveData()},e.prototype.getLastSyncTime=function(){return this.data.lastSyncedAt},e.prototype.setLastSyncTime=function(t){this.data.lastSyncedAt=t,this.saveData()},e.prototype.isOptOut=function(){return"optout"===this.getUserId()},e.prototype.setOptOut=function(t){t?(this.data=Object.assign({},this.EMPTY_DATA),this.data.lexId="optout"):"optout"===this.data.lexId&&(this.data.lexId=null),this.saveData()},e.prototype.setTimeAndUrl=function(){this.data.pageViewTimestamp=Date.now(),this.data.pageViewUrl=wr.location.origin+wr.location.pathname,this.saveData()},e.prototype.setBrandedTakeover=function(t,e){this.data.pageViewId=t?e:"",this.saveData()},e.prototype.setUSPrivacy=function(t){this.data.usp=t,this.saveData()},e.prototype.setTdID=function(t){this.data.tdID=t,this.saveData()},e}(Zr),Xr=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).name="Cerberus",e.errFactory=new S("Cerberus"),e.HOSTNAME="crb.kargo.com",e.SEGMENT_HOSTNAME="cma.kargo.com",e.RESYNC_IN=864e5,e.GVLID="972",e.cerberusData=new $r,e}It(e,t);var i=e.prototype;return i.doNotTrack=function(){return"1"===this.win.navigator.doNotTrack},i.isOptOut=function(){return this.doNotTrack()||this.cerberusData.isOptOut()},i.getClientId=function(){return this.cerberusData.getClientId()},i.getDeviceId=function(){return r()(this.win,"Kargo.Config.getDeviceId",(function(){return null}))()},i.getLexId=function(){return this.isOptOut()?null:this.cerberusData.getUserId()},i.getSyncIds=function(){return this.isOptOut()?{}:this.cerberusData.getSyncIds()},i.getSegments=function(){return this.isOptOut()?[]:this.cerberusData.getSegments()},i.getUSPrivacy=function(){return this.cerberusData.getUSPrivacy()},i.getTdID=function(){return this.cerberusData.getTdID()},i.gdprApplies=function(){return!!this.tcdata&&!!this.tcdata.gdprApplies},i.gdprConsent=function(){return this.tcdata&&this.tcdata.tcString?this.tcdata.tcString:""},i.gdprHaveConsent=function(){return!this.gdprApplies()||!!r()(this.tcdata,"vendor.consents"+this.GVLID,(function(){return!1}))()},i.handleBrandedTakeover=function(t,e){this.cerberusData.setBrandedTakeover(t,e)},i.restoreData=function(){this.cerberusData.fetchData(),this.logger.debug("Restored Cookie Data: ",this.cerberusData.getData())},i.needsToResync=function(){var t=!0,e=this.cerberusData.getLastSyncTime(),r="Need to Resync - ";return e?this.cerberusData.isExpired()?this.logger.debug(r+"Expiration Time Reached"):Date.now()-e>this.RESYNC_IN?this.logger.debug(r+"Over 24 Hours Since Last Sync"):t=!1:this.logger.debug(r+"No Last Sync Time Set"),t},i.load=function(){var t=this;return new Promise((function(e){if(t.restoreData(),t.win.__krg_cerberus_disable_cookies&&t.cerberusData.enableCookieStorage(!1),t.cerberusData.setTimeAndUrl(),t.isOptOut())return t.logger.debug("User has Opted Out, Emptying Cookie"),t.setReady(),void e();var i=Me(t.win,"usprivacy");!i&&t.win.__uspapi?t.win.__uspapi("getUSPData",1,(function(e,r){i=r?e.uspString:"",t.cerberusData.setUSPrivacy(i)})):i&&t.cerberusData.setUSPrivacy(i),t.win.__tcfapi&&t.win.__tcfapi("getTCData",2,(function(e,r){r&&(t.tcdata=e)})),t.getClientId()||t.cerberusData.setClientId((0,c.DO)(t.win));var n=t.getClientId();t.logger.debug("Client Id: "+t.getClientId());var o=Me(t.win,"pbjs-unifiedid");if(o)try{var a=JSON.parse(decodeURIComponent(o));a&&a.TDID&&("string"==typeof a.TDID?t.cerberusData.setTdID(a.TDID):t.cerberusData.setTdID(""))}catch(e){t.logger.debug("Unable to parse prebid tdID")}else{var s=localStorage.getItem("IXWRAPPERAdserverOrgIp");if(s){var l=r()(JSON.parse(s),"d.data.uids","");if(l.length){var u=l.find((function(t){return"TDID"===t.ext.rtiPartner}));u&&"object"==typeof u&&u.id&&(u="string"==typeof u.id?u.id:""),t.cerberusData.setTdID(u)}}}t.needsToResync()&&t.makeSyncRequest(n).then((function(){t.fetchSyncIds(n).catch((function(e){t.logger.warn("Error fetching Sync Ids: "+e.message)}))})),t.fetchSegments(n).then((function(){t.setReady(),e()})).catch((function(r){t.logger.warn("Error fetching Segments: "+r.message),t.setReady(),e()})),t.setReadyOnTimeout()}))},i.getConsentParams=function(){return"gdpr="+(this.gdprApplies()?"1":"0")+"&gdpr_consent="+this.gdprConsent()+"&us_privacy="+(this.getUSPrivacy()?this.getUSPrivacy():"")},i.makeSyncRequest=function(t){var e=this;return new Promise((function(r){var i=e.win.__krg_cerberus_partners?"&partners="+e.win.__krg_cerberus_partners.toString():"",n=e.win.document.createElement("iframe");n.style.display="none",n.src="https://"+e.HOSTNAME+"/api/v1/initsync/"+t+"?"+e.getConsentParams(),n.src+=i,e.getDeviceId()&&(n.src+="&deviceID="+e.getDeviceId()),e.logger.debug("Initiating ID syncing..."),n.addEventListener("load",(function(){e.win.setTimeout((function(){_t(n)}),1e3),r()})),e.win.document.body.appendChild(n)}))},i.fetchSyncIds=function(t){var e=this;return new Promise((function(r,i){var n="https://"+e.HOSTNAME+"/api/v1/ids/"+t+"?"+e.getConsentParams();e.getDeviceId()&&(n+="&deviceId="+e.getDeviceId()),e.logger.debug("Fetching Sync IDs...");T(n,e.win,0,!0,(function(t,n){if(t)i(t);else if(n){var o=null,a=null,s=null;try{o=(n=JSON.parse(atob(n))).ex_ids||null,a=n.lex_id||n.lexID||null,s=n.ktcid||null}catch(t){}var l=!(!a||!e.getLexId()||a===e.getLexId());a&&e.logger.debug((l?"Updated ":"")+"Lex ID from Cerberus: "+a),e.isOptOut()?e.logger.debug("User has Opted Out, Emptying Cookie"):(s&&e.logger.debug("KTC ID: "+s),o&&(0,c.U5)(o)&&e.logger.debug("Sync IDs: ",o)),o&&e.cerberusData.setSyncIds(o),a&&e.cerberusData.setUserId(a),s&&e.cerberusData.setKtcId(s),e.cerberusData.setLastSyncTime(Date.now()),r()}else i(e.errFactory.errNoResponse())}))}))},i.fetchSegments=function(t){var e=this;return new Promise((function(r,i){var n="https://"+e.SEGMENT_HOSTNAME+"/api/v1/segments/"+t+"?"+e.getConsentParams();e.getDeviceId()&&(n+="&deviceId="+e.getDeviceId()),e.logger.debug("Fetching segments...");T(n,e.win,0,!0,(function(t,n){if(t)i(t);else if(n){var o=null,a=null;try{o=n.segments||null,a=n.lex_id||n.lexID||null}catch(t){}var s=!(!a||!e.getLexId()||a===e.getLexId());a&&e.logger.debug((s?"Updated ":"")+"Lex ID from CMA: "+a),e.isOptOut()?e.logger.debug("User has Opted Out, Emptying Cookie"):o&&e.logger.debug("Segments: "+o),o&&e.cerberusData.setSegments(o),a&&e.cerberusData.setUserId(a),r()}else i(e.errFactory.errNoResponse())}))}))},e}(Xe),Yr=new S("AdTag"),ti=function(){function t(t,e,r,i){this.pluginsLoaded=!1,this.selfUrl="",this.AD_METRIC_RATE=20,this.win=t,this.logger=e,this.adRequestFactory=r,this.creativeFactory=i,this.disabled=!1,this.adRequests={},this.queuedRequests=[]}var e=t.prototype;return e.init=function(t){var e=this;void 0===t&&(t=null);var r=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");if(r&&r()){var i=r();if(i){if(i.getConditionalCheckFunc&&i.getConditionalCheckFunc())try{!1===(0,c.Bg)(this.win,i.getConditionalCheckFunc())&&(this.logger.debug("AdTag disabled by Global Conditional Check!"),this.disabled=!0)}catch(t){var n="Error in Global Conditional Check:";this.logger.error(n,t),this.logger.report(he,n+" "+t.name+" - "+t.message,{version:"6.37.0"})}if(i.getPreLoadFunc&&i.getPreLoadFunc())try{(0,c.Bg)(this.win,i.getPreLoadFunc())}catch(t){var o="Error in Global Javascript:";this.logger.error(o,t),this.logger.report(he,o+" "+t.name+" - "+t.message,{version:"6.37.0"})}if(i.getPreLoadCss&&i.getPreLoadCss()){var a=this.win.document.createElement("style");a.type="text/css",a.className="kargo-css",a.textContent=i.getPreLoadCss(),this.win.document.head.appendChild(a)}i.checkPageVars(this.win)}}var s=new Ge(this.win);s.detectEnvironment().then((function(t){if("SafeFrame"===t){e.logger.report("SAFEFRAME","AdTag loaded in SafeFrame",{version:"6.37.0"},true)}})),this.loadPlugins().then((function(){for(var r=0;r<e.queuedRequests.length;r+=1){var i=e.queuedRequests[r];e.processAdRequest(i.request,i.callback)}e.queuedRequests=[],t&&t()})).catch((function(r){e.logger.error(r),t&&t(r)}))},e.createPlugin=function(t){this.win.Kargo.Plugin=this.win.Kargo.Plugin||{};var e=new st(this.win),r=new t(this.win,e),i=r.name.replace(/([A-Z])/g," $1").toUpperCase().trim();return e.setLabel(["PLUGIN",i]),this.win.Kargo.Plugin[r.name]||(this.win.Kargo.Plugin[r.name]=r),r.load().then((function(){e.debug("Loaded")})),r},e.loadPlugins=function(){var t=this;if(this.pluginsLoaded)return Promise.resolve();var e=r()(this.win,"Kargo.Config.getGlobalConfig",(function(){return null}))();if(e){var i=[this.createPlugin(Ye),this.createPlugin(tr)];e.getConfig().settings.enable_cerberus&&i.push(this.createPlugin(Xr));var n=1500,o=h(g(this.win),"krg_plugin_timeout"),a=parseInt(o,10);this.win.__krg_plugin_timeout?n=this.win.__krg_plugin_timeout:a&&(n=a);var s=new Promise((function(e){t.win.setTimeout((function(){t.pluginsLoaded||(t.pluginsLoaded=!0,t.logger.debug("Plugin Loading Timed out after "+n+"ms"),e())}),n)})),c=Promise.all(i.map((function(t){return t.onReady()}))).then((function(){t.pluginsLoaded=!0,t.logger.debug("All Plugins Loaded")}));return Promise.race([c,s])}return Promise.resolve()},e.createAdRequest=function(t,e){void 0===e&&(e=null);var r=null;if(this.logger.debug("New Ad Request for slot "+t+" with params:",e),t)if((0,c.GK)(this.win,"Kargo.Config"))if((0,c.GK)(this.win,"Kargo.Config.getSlotConfig")(t)){var i=(0,c.GK)(this.win,"Kargo.Config");i&&!i.getDeviceId()&&(e.dpf_pattern_id&&-1===e.dpf_pattern_id.indexOf("%")?i.setDeviceId(e.dpf_pattern_id):e.dfp_ad_id_plain&&-1===e.dfp_ad_id_plain.indexOf("%")&&i.setDeviceId(e.dfp_ad_id_plain));var n=(0,c.GK)(this.win,"Kargo.Config.getSlotConfig")(t);e&&"object"==typeof e||(e={}),r=this.adRequestFactory.create(n,e),this.adRequests[r.getId()]=r}else this.logger.error("No Kargo SlotConfig for '"+t+"' set");else this.logger.error("No Kargo Config instance");else this.logger.error("Slot Id is required");return r},e.requestAd=function(t,e,r){var i=this;void 0===r&&(r=null);var n=e,o=r||function(t){t&&i.logger.warn(t)};if("source_element"in n&&(n.sourceElement=n.source_element),"source_window"in n&&(n.sourceWindow=n.source_window),delete n.source_element,delete n.source_window,n.sourceElement||(n.sourceElement=this.determineSourceElement(t,n.sourceWindow),n.sourceElement||this.logger.report(ge,"Could not determine source element",{slot:t,version:"6.37.0"})),n.positionElement=n.sourceElement,n.positionElement){var a=n.positionElement.getAttribute("data-external-id");a&&(n.externalId=a)}var s=(0,c.GK)(this.win,"Kargo.Config.onSlotReady");if(s){var l,u=!1;l=this.win.setTimeout((function(){u=!0,i.logger.debug("Slot Loading Timed out after 2000ms");var e="Ad Request timed out waiting for Ad Slot";i.logger.error(e),i.logger.report(he,e,{slot:t,version:"6.37.0"}),o()}),2e3),s(t,(function(){if(!u){i.win.clearTimeout(l);var e=i.createAdRequest(t,n);i.pluginsLoaded||n.kraken?i.processAdRequest(e,o):i.queuedRequests.push({request:e,callback:o})}}))}else o(Yr.errNotSet("Config"))},e.determineSourceElement=function(t,e){var r=function e(r){for(var i=null,n=r.document.getElementsByTagName("script"),o=0;o<n.length;o+=1)if(n[o].textContent&&n[o].textContent.indexOf(t)>-1&&n[o].textContent.indexOf("Kargo")>-1){i=n[o];break}if(r.AMP_LISTENING){var a=r.document.querySelector("#c > script");if(a)i=a;else{var s=r.document.body.getElementsByTagName("*");s.length?i=s[0]:((i=r.document.createElement("div")).style.display="none",r.document.body.appendChild(i))}}if(!i)for(var c=r.document.getElementsByTagName("iframe"),l=0;l<c.length;l+=1)if(c[l].contentWindow){try{i=e(c[l].contentWindow)}catch(t){}if(i)break}return i};return(e?r(e):null)||r(this.win)},e.processAdRequest=function(t,e){var r=this;this.disabled?e(Yr.errDisabled("AdTag")):t.fetchResponse((function(i){if(i)e(i);else if(t.getCreativeConfig()){var n=t.getCreativeConfig(),o="";n.source.dfp?o=n.source.dfp.creative:n.source.ssp?o=n.source.ssp.rtbCreativeId:n.source.kraken&&(o=n.source.kraken.creative);var a=t.getResolvedSource()||{},s=new ce(r.win,a,{slot:n&&n.slot?n.slot:"unknown",creative:o,format:n&&n.format?n.format:"unknown"});if(t.getFormatConfig()&&t.getFormatConfig().getPreDrawFunc&&t.getFormatConfig().getPreDrawFunc())try{(0,c.Bg)(r.win,t.getFormatConfig().getPreDrawFunc())}catch(t){var l="Error in '"+n.format+"' Format PreDraw Javascript: ";l=l+" "+t.name+" - "+t.message,r.logger.error(l,t),s.report(he,l)}if(t.getSlotConfig()&&t.getSlotConfig().getPreDrawFunc&&t.getSlotConfig().getPreDrawFunc()&&!(t.getFormatConfig()&&t.getFormatConfig().isIgnoreSlotPreDrawFunc&&t.getFormatConfig().isIgnoreSlotPreDrawFunc()))try{(0,c.Bg)(r.win,t.getSlotConfig().getPreDrawFunc())}catch(t){var u="Error in '"+n.slot+"' Slot PreDraw Javascript: ";u=u+" "+t.name+" - "+t.message,r.logger.error(u,t),s.report(he,u)}r.creativeFactory.createCreative(n,a).then((function(i){if(!i)return e(Yr.errCant("create creative"));if(t.getFormatConfig()&&t.getFormatConfig().getPostDrawFunc&&t.getFormatConfig().getPostDrawFunc())try{(0,c.Bg)(r.win,t.getFormatConfig().getPostDrawFunc())}catch(t){var o="Error in '"+n.format+"' Format PostDraw Javascript: ";o=o+" "+t.name+" - "+t.message,r.logger.error(o,t),s.report(he,o)}if(t.getSlotConfig()&&t.getSlotConfig().getPostDrawFunc&&t.getSlotConfig().getPostDrawFunc()&&!(t.getFormatConfig()&&t.getFormatConfig().isIgnoreSlotPostDrawFunc&&t.getFormatConfig().isIgnoreSlotPostDrawFunc()))try{(0,c.Bg)(r.win,t.getSlotConfig().getPostDrawFunc())}catch(t){var a="Error in '"+n.slot+"' Slot PostDraw Javascript: ";a=a+" "+t.name+" - "+t.message,s.report(he,a)}e()}))}else e(Yr.errNotSet("Creative Config"))}))},e.getAd=function(t,e){var r=this;if("object"!=typeof t||e||(t=(e=t).kargo_id||"",delete e.kargo_id),e.getAdTimestamp=Date.now(),!!h(g(this.win),"krg_debug")||1===Math.floor(Math.random()*this.AD_METRIC_RATE)){var i={slot:t};Oe.reportAdMetric({type:"loaded",version:"6.37.0"},i,this.logger)}return new Promise((function(i,n){r.requestAd(t,e,(function(e){e?(r.logger.warn("Request for Slot "+t+" Failed with error: "+e.message),n(e)):i()}))}))},e.loadAds=function(){var t=this.win.Kargo;if(t.ads&&t.ads.length){var e=t.ads.slice(0);for(t.ads=[];e.length;)this.getAd(e.shift())}},e.getVersion=function(){return"6.37.0"},e.getSelfUrl=function(){return this.selfUrl},e.setSelfUrl=function(t){this.selfUrl=t},t}();const ei=ti;var ri="production",ii=new S("CreativeFactory"),ni="Banner",oi="Hover",ai={BottomBanner:ni,HalfPage:ni,LargeLeaderboard:ni,Leaderboard:ni,MiddleBanner:ni,OutstreamVideo:ni,TopBanner:ni,VastMiddleBanner:ni,Venti:ni,WideSkyscraper:ni,HighRise:ni,KeyArt:ni,NonVastOutstreamVideo:ni,Native:ni,ABADisplay:ni,NativeVideoKeyArt:ni,ABAVideo:ni,SocialCanvas:ni,Anchor:oi,Breakaway:oi,Breakout:oi,Hover:oi,NativeAnchor:oi,ABAAdhesionDisplay:oi,Sidekick:oi,VideoAnchor:oi,Wrapper:oi,SwipeUp:oi,Billboard:ni,DesktopHover:oi},si=function(){function t(t,e,r){this.win=t,this.logger=e,this.moduleLoader=r}t.getCreativeTypeFromFormat=function(t){return ai[t]};var e=t.prototype;return e.cleanFormat=function(t){if(!ai[t])for(var e in ai)if(t.toLowerCase()===e.toLowerCase()){t=e;break}return t},e.createCreative=function(e,r){var i=this;e.format=this.cleanFormat(e.format);var n=t.getCreativeTypeFromFormat(e.format);return n||(n="Banner",this.logger.report(ge,"Unable to determine format type, default to Banner")),this.moduleLoader.getModule(n,"6.37.0").then((function(t){return t(e,r)})).catch((function(t){i.logger.error(ii.errCant("Create creative"),t)}))},t}();const ci=si;const li=function(){function t(){this.globalConfig=null,this.slotConfigs={},this.globalCallbacks=[],this.slotCallbacks={},this.deviceId=null}var e=t.prototype;return e.setGlobalConfig=function(t){if("object"==typeof t){this.globalConfig=t;for(var e=0;e<this.globalCallbacks.length;e+=1)this.globalCallbacks[e]();this.globalCallbacks=[]}},e.getGlobalConfig=function(){return this.globalConfig},e.setSlotConfig=function(t){if("object"==typeof t&&t.getId&&"function"==typeof t.getId){var e=t.getId();if(e&&(this.slotConfigs[t.getId()]=t,this.slotCallbacks[e])){for(var r=0;r<this.slotCallbacks[e].length;r+=1)this.slotCallbacks[e][r]();this.slotCallbacks[e]=[]}}},e.getSlotConfig=function(t){return this.slotConfigs[t]||null},e.onGlobalReady=function(t){"function"==typeof t&&(this.globalConfig?t():this.globalCallbacks.push(t))},e.onSlotReady=function(t,e){"function"==typeof e&&(this.slotConfigs[t]?e():(this.slotCallbacks[t]=this.slotCallbacks[t]||[],this.slotCallbacks[t].push(e)))},e.setDeviceId=function(t){this.deviceId=t},e.getDeviceId=function(){return this.deviceId},t}();var ui=function(){function t(){this.config={debug:!1,environment:ri,trackLatency:!0,publisher_id:null,property_id:null,conditional_check:null,pre_js:null,pre_css:null,settings:{enable_active_view_rewrite:!0,enable_cerberus:!0,enable_comscore:!1,enable_moat_content:!1,enable_moat_viewability:!1,enable_ssp:!0,enable_open:!1,enable_dfp:!1,enable_trackers:!1,disable_hover_hiding:!1}}}var e=t.prototype;return e.setConfig=function(t){(0,c.TS)(this.config,t)},e.getConfig=function(){return this.config},e.checkPageVars=function(t){var e=g(t),r=h(e,"krg_disable_hiding");void 0!==t.__krg_cerberus&&(this.config.settings.enable_cerberus=t.__krg_cerberus),(t.__krg_disable_hiding||"true"===r)&&(this.config.settings.disable_hover_hiding=!0),h(e,"krg_debug")&&(this.config.debug=!0),void 0!==t.__krg_track_latency&&(this.config.trackLatency=t.__krg_track_latency);var i=h(e,"krg_latency");"true"===i?this.config.trackLatency=!0:"false"===i&&(this.config.trackLatency=!1)},e.getEnvironment=function(){return this.config.environment},e.isDebug=function(){return this.config.debug},e.isLatencyTracked=function(){return this.config.trackLatency},e.getPublisherId=function(){return this.config.publisher_id},e.getPropertyId=function(){return this.config.property_id},e.getConditionalCheckFunc=function(){return this.config.conditional_check},e.getPreLoadCss=function(){return this.config.pre_css},e.getPreLoadFunc=function(){return this.config.pre_js},e.getEnabledPlugins=function(){var t=["IframeBuster","Mraid"];return this.config.settings.enable_cerberus&&t.push("Cerberus"),this.config.settings.enable_moat_content&&t.push("MoatContent"),t},e.isActiveViewRewriteEnabled=function(){return this.config.settings.enable_active_view_rewrite},e.isMoatViewabilityEnabled=function(){return this.config.settings.enable_moat_viewability},e.isComScoreEnabled=function(){return this.config.settings.enable_comscore},e.isDFPEnabled=function(){return this.config.settings.enable_dfp},e.isSSPEnabled=function(){return this.config.settings.enable_ssp},e.isSSPOpenEnabled=function(){return this.config.settings.enable_open},e.isIntegrationTrackersEnabled=function(){return this.config.settings.enable_trackers},e.isHoverHidingDisabled=function(){return this.config.settings.disable_hover_hiding},t}();const hi=ui;var gi=function(){function t(){this.config={kargo_id:null,platform:null,position:null,allow_responsive:!0,call_automatically:!1,allow_multiple:!1,ssp_id:null,dfp_unit:null,override_url:null,passback_js:null,fail_callback:null,conditional_check:null,pre_js:null,post_js:null,pre_css:null},this.forceSource=null,this.formatConfigs={}}var e=t.prototype;return e.setConfig=function(t){t.settings=t.settings&&this.renameToABA(t.settings),(0,c.TS)(this.config,t)},e.renameToABA=function(t){var e=this;return Array.isArray(t)?t.map((function(t){return t.format=e.replaceFormatName(t.format),t})):(t.format=this.replaceFormatName(t.format),t)},e.replaceFormatName=function(t){var e=t;return"Native"===t?e=Pt:"NativeVideoKeyArt"===t?e=Mt:"NativeAnchor"===t&&(e=Ft),e},e.getConfig=function(){return this.config},e.checkPageVars=function(t){var e=g(t);h(e,"ad_id")||h(e,"dfp_id")?this.forceSource="dfp":h(e,"ssp_id")?this.forceSource="ssp":h(e,"krg_server")&&(this.forceSource=h(e,"krg_server"))},e.setFormatConfig=function(t){t.getFormat&&"function"==typeof t.getFormat&&(this.formatConfigs[t.getFormat()]=t)},e.getFormatConfig=function(t){var e=null;return this.formatConfigs[t]&&(e=this.formatConfigs[t]),e},e.getAllFormatConfigs=function(){return this.formatConfigs},e.getId=function(){return this.config.kargo_id},e.getPlatform=function(){return this.config.platform},e.getPosition=function(){return this.config.position},e.getOverrideUrl=function(){return this.config.override_url},e.getSSPConfig=function(){var t=this,e=this;return{isEnabled:function(){return(null===t.forceSource||"ssp"===t.forceSource)&&null!=e.config.ssp_id},getSlotId:function(){return e.config.ssp_id},getSize:function(){var t="320x50";return"mid"!==e.config.position&&"int"!==e.config.position||(t="300x250"),t},getAdditionalSizes:function(){return null!==e.getFormatConfig("MiddleBanner")&&"mid"===e.config.position&&!1===e.getFormatConfig("MiddleBanner").config.enable_320x50?["320x50"]:[]}}},e.getDFPConfig=function(){var t=this,e=this;return{isEnabled:function(){return(null===t.forceSource||"dfp"===t.forceSource)&&null!=e.config.dfp_unit},getUnitId:function(){return e.config.dfp_unit},getSize:function(){return null!==e.getFormatConfig("MiddleBanner")&&!1===e.getFormatConfig("MiddleBanner").config.enable_320x50?"320x250|300x250|1x1":"320x250|320x50|300x250|300x50|1x1"}}},e.getPassbackConfig=function(){var t=this,e=this;return{isEnabled:function(){return(null===t.forceSource||"passback"===t.forceSource)&&null!=e.config.passback_js},getHtml:function(){return e.config.passback_js},getFormat:function(){var t;switch(e.config.position){case"top":t="TopBanner";break;case"mid":t="MiddleBanner";break;case"bottom":t="BottomBanner";break;case"hover":t="Hover"}return e.config.passback_format||t},getSize:function(){var t="320x50";return"mid"!==e.config.position&&"int"!==e.config.position||(t="300x250"),t}}},e.allowsResponsiveCreatives=function(){return this.config.allow_responsive},e.allowsMultiple=function(){return this.config.allow_multiple},e.isCallAutomatically=function(){return this.config.call_automatically},e.getFailedRequestFunc=function(){return this.config.fail_callback},e.getConditionalCheckFunc=function(){return this.config.conditional_check},e.getCss=function(){return this.config.pre_css},e.getPreDrawFunc=function(){return this.config.pre_js},e.getPostDrawFunc=function(){return this.config.post_js},t}();const di=gi;var pi=["type","format","approved","custom_css","preload_callback","success_callback","ignore_slot_pre_css","ignore_slot_pre_js","ignore_slot_post_js","enable_320x50"],fi=function(){function t(){this.config={format:null,approved:{direct:!1,pmp:!1},custom_css:null,preload_callback:null,success_callback:null,ignore_slot_pre_css:!1,ignore_slot_pre_js:!1,ignore_slot_post_js:!1,enable_320x50:!0}}var e=t.prototype;return e.setConfig=function(t){(0,c.TS)(this.config,t)},e.getConfig=function(){return this.config},e.getFormat=function(){return this.config.format},e.isApprovedForDirect=function(){return this.config.approved.direct},e.isApprovedForPMP=function(){return this.config.approved.pmp},e.getCss=function(){return this.config.custom_css},e.getPreDrawFunc=function(){return this.config.preload_callback},e.getPostDrawFunc=function(){return this.config.success_callback},e.isIgnoreSlotCss=function(){return this.config.ignore_slot_pre_css},e.isIgnoreSlotPreDrawFunc=function(){return this.config.ignore_slot_pre_js},e.isIgnoreSlotPostDrawFunc=function(){return this.config.ignore_slot_post_js},e.getCreativeConfig=function(){var t=this,e={};return Object.keys(this.config).forEach((function(r){pi.indexOf(r)<0&&(e[r]=t.config[r])})),e},t}();const vi=fi;var mi="new-template-after-click",ki="new-template",bi={newTemplate:function(t){pt(t.rootElement.querySelector(".kargo-ad-content"),ki)},closeSwipeUp:function(t){r()(t.config.settings.tracking,"dismiss",[]).forEach((function(e){E(t.win,e)})),t.onClose(),t.destroy()},clickCreative:function(t){var e=t.rootElement.querySelector(".new-template");e&&pt(e,mi);t.onClick({},{format:t.config.format,event:"click"})},clickSwipeUp:function(t){var e=t.rootElement.querySelector(".new-template");e&&pt(e,mi);t.onClick({},{format:t.config.format,event:"click"})},swipeCreative:function(t){var e=t.rootElement.querySelector(".new-template");e&&pt(e,mi);t.onClick({},{format:t.config.format,event:"swipe"})},hideCloseBtn:function(t){t.hideCloseBtn()},showCloseBtn:function(t){t.showCloseBtn()}},yi=function(){function t(t,e,r,i){void 0===i&&(i={once:!0}),this.win=t,this.logger=e,this.rootElement=r,this.options=i,this.LISTENER_INTERVAL_PERIOD=100,this.clickDetected=!1,this.watchingItems=[],this.callbacks=[]}var e=t.prototype;return e.eventHandler=function(t){this.clickDetected&&this.options.once||(this.logger.debug("Click Detected"),this.clickDetected=!0,this.callbacks.forEach((function(e){return e(t)})),this.options.once&&this.removeListener())},e.onClick=function(t){this.callbacks.includes(t)||this.callbacks.push(t)},e.attachListener=function(){var t=this;if(!this.listenerInterval){var e=this.eventHandler.bind(this),r=function r(i){t.watchingItems.includes(i)?(i.removeEventListener("click",e),i.addEventListener("click",e,{passive:!0})):(i.addEventListener("click",e,{passive:!0}),i.kargoClickHandler=e,t.watchingItems.push(i));(i.document?Array.from(i.document.getElementsByTagName("iframe")):Array.from(i.getElementsByTagName("iframe"))).forEach((function(t){if(t.contentWindow)try{t.contentWindow.location.href,r(t.contentWindow)}catch(t){}}))};r(this.rootElement),this.listenerInterval=this.win.setInterval((function(){r(t.rootElement)}),this.LISTENER_INTERVAL_PERIOD)}},e.removeListener=function(){this.win.clearInterval(this.listenerInterval),this.watchingItems.forEach((function(t){try{t.kargoClickHandler&&t.removeEventListener("click",t.kargoClickHandler)}catch(t){}})),this.listenerInterval=void 0,this.watchingItems=[]},t}();function wi(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return _i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _i(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var Ci=new S("Creative"),xi=".kargo-ad-content",Ai="kargo-ad-hidden",Si=".kargo-creative",Di={debug:!1,localId:null,id:null,type:null,format:null,execution:null,css:null,vendor:null,placement:null,slot:null,content:null,prefix:null,suffix:null,positionElement:window.document.body,positionLocation:"after",isMeasuringViewability:!1,source:{},sourceElement:null,sourceWindow:null,externalId:null,onCreate:null,onLoad:null,onDisplay:null,onSizeChange:null,onVisible:null,onNotVisible:null,onViewable:null,onClose:null,onDestroy:null,settings:{}},Ii=function(){function t(t,e){this.clickMonitor=null,this.template=null,this.container=null,this.adelaide=null,this.moat=null,this.hand=null,this.resolvedSource=null,this.AD_METRIC_RATE=20,this.SLOT_REFRESHED_REPORT_RATE=100,this.win=t,this.logger=e,this.components={},this.socialCanvasCreatives={},this.socialCanvasCreatives.companion=null,this.socialCanvasCreatives.socanCeltraBack=null,this.socialCanvasCreatives.socanCeltraFront=null;var r=+h(g(this.win),"krg_debug");this.win.__krg_v6_proxy_enabled||5===r?(this._config=(0,c.TS)({},Di),this.config=this._config,this.logger.debug("Creative config is proxified")):this.config=(0,c.TS)({},Di),this.creativeInfo={},this.isDisplayed=!1,this.isCreativeLoaded=!1,this.creativeWrittenMetricReported=!1,this.isDestroyed=!1,this.isVisible=!1,this.isViewable=!1,this.isHidden=!0,this.sizeMonitor=null,this.visibilityMonitor=null,this.comscore=null,this.timestamps={start:Date.now(),displayed:null,firstVisible:null,viewable:null,destroyed:null}}var e=t.prototype;return e.getRenderConfig=function(){},e.setComponents=function(t){this.components=t,this.components.Moat&&(this.moat=new this.components.Moat(this.win,this.logger),this.moat.setCreative(this)),this.template=this.template||new this.components.Template(this.win,this.templateHtml,this.templateCss),this.components.Adelaide&&(this.adelaide=new this.components.Adelaide(this.win,this.logger,this.config.source)),this.components.ActiveView&&(this.activeView=new this.components.ActiveView(this.win,this.logger))},e.detectContainerEnvironment=function(){var t=this;return this.container=new Ge(this.config.sourceWindow||this.win),this.container.detectEnvironment().then((function(e){null!==e&&t.logger.debug("Detected Container Type: "+e)}))},e.setConfig=function(t){var e=this.validateConfig(t);(0,c.TS)(this.config,e),this.creativeInfo=We.extractCreativeInfoFromConfig(this.config),this.win.__krg_creatives=this.win.__krg_creatives||0,this.win.__krg_creatives+=1,this.config.localId=this.win.__krg_creatives,h(g(this.win),"krg_debug")&&(this.config.debug=!0),this.config.id||(this.config.id=this.resolvedSource&&this.resolvedSource.impressionId?this.resolvedSource.impressionId:(0,c.DO)(this.win),this.logger.report(de,"Impression ID unset in creative, regenerated a new one "+this.config.id)),this.config.debug&&this.logger.setLevel(4),this.logger.setLabel(["CREATIVE",this.config.localId+" - "+(this.config.format||this.config.type).toUpperCase()]),this.logger.debug("Created with config:",this.config)},e.getConfig=function(){return this.config},e.validateConfig=function(t){var e=(0,c.TS)({},t);if(e.content&&(e.content=e.content.replace(/[\s]+src[\s]*=[\s]*['|"]mraid.js['|"]/gi,' src="https://storage.cloud.kargo.com/ad/network/thirdparty/mraid.js"'),e.content.indexOf("celtra-ad")>-1)){var i='<div class="celtra-ad-v3">';if(e.content.indexOf(i)>-1&&e.content.indexOf("\x3c!-- externalSupplierId")<0){if(e.id){var n="\n\t\x3c!-- passthroughParameters[impressionId] = raw "+e.id+" --\x3e",o="\n\t\x3c!-- externalSessionId = raw "+e.id+" --\x3e";e.content=e.content.replace(i,i+n+o)}if(r()(e,"source.kargo.creativeId")){var a=e.source.kargo.creativeId,l="\x3c!-- passthroughParameters[creativeId] = raw "+a+" --\x3e";-1===e.content.indexOf("passthroughParameters[creativeId]")&&null!=a&&(e.content=(0,c.XM)(e.content,l,e.content.indexOf(i)+i.length))}if((e.source||{}).type){var u=e.source.type.toUpperCase(),h="\x3c!-- passthroughParameters[network] = raw "+u+" --\x3e";null!=u&&(e.content=(0,c.XM)(e.content,h,e.content.indexOf(i)+i.length))}e.content=e.content.replace(/'preferredClickThroughWindow':'.*?'/,"'preferredClickThroughWindow':'new'"),e.content=e.content.replace(/'externalAdServer':'.*?'/,"'externalAdServer':'DFPKargo'")}}var g=r()(e,"positionElement.ownerDocument.defaultView",null);if(g&&g!==this.win){var d=s(g);d&&(d.style.display="none",e.positionElement=d,e.positionLocation="before")}else e.positionElement&&!mt(e.positionElement)&&(e.positionElement=e.positionElement.ownerDocument.body,e.positionLocation="prepend");return e},e.reportError=function(t,e){void 0===e&&(e={});var r=null;if(this.config.source){var i=this.config.source;i.dfp?r=i.dfp.creative:i.ssp?r=i.ssp.rtbCreativeId:i.kraken&&(r=i.kraken.creative)}r=r||"";var n=t.krg_err_code||"CREATIVE";new ce(this.win,this.resolvedSource||{logger:this.logger}).report(n,t.message||t,{creative:r,format:this.config.format,slot:this.config.slot,source:(this.config.source||{}).type},e.isWarning)},e.determineFormat=function(t,e,r){for(var i=0;i<r.length;i++)if(r[i].toLowerCase()===t.toLowerCase())return r[i];return e},e.preventResponsive=function(t){var e=(0,c.GK)(this.win,"Kargo.Config.getSlotConfig");if(e){var r=e(t);if(r&&r.allowsResponsiveCreatives&&!r.allowsResponsiveCreatives())return!0}return!1},e.confirmStartFullView=function(t){var e=this;return M("https://storage.cloud.kargo.com/ad/network/tag/start-full-view.json",this.win,{timeout:1e3}).then((function(e){return Promise.resolve(e.data.includes(t))})).catch((function(t){return e.logger.error(t),Promise.resolve(!1)}))},e.getVideoConfig=function(){var t=this,e=this.config,i=e.source,n=e.settings,o=n.tracking||{},a=null,s=null,c=Promise.resolve(!1);i&&(i.kargo&&i.kargo.creativeId?(a="km",s=i.kargo.creativeId):i.ssp?"pmp"===i.ssp.auctionType&&(c=this.confirmStartFullView(i.ssp.dealId),a="iow",s=i.ssp.rtbCreativeId):i.kraken&&i.kraken.dealId&&(s=i.kraken.creative,a=i.kraken.auctionType,c=this.confirmStartFullView(i.kraken.dealId)));var l=!1;"true"===h(g(this.win),"krg_qa")&&(l=!0);var u=!0,d=r()(this.win,["Kargo","Config","getGlobalConfig"],null);return d&&!d().isMoatViewabilityEnabled()&&(u=!1),c.then((function(e){var r={test:n.va_test||l||!1,impressionId:t.config.id,click_url_prefix:n.click_url_prefix||null,click_url:n.click_destination_url||null,videoPlayerLocation:".kargo-ad-"+t.config.localId+" .kargo-ad-content",endcardUrl:n.endcard_label,tracking:{start:o.start||[],firstQuartile:o.firstQuartile||[],midpoint:o.midpoint||[],thirdQuartile:o.thirdQuartile||[],complete:o.complete||[],mute:o.mute||[],unmute:o.unmute||[],replay:o.replay||[],error:o.error||[],expand:o.expand||[],dismiss:o.dismiss||[],load:o.receive||[],click:o.click||[]},moat:t.moat&&u?t.moat.getVideoData():null,creative_origin:a,creative_id:s,disableOutOfViewPause:!!n.disable_out_of_view_pause,startOnFullView:e,format:t.config.format,destroyAd:function(){return t.destroy()}};return Promise.resolve(r)}))},e.display=function(){var t=St(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isDisplayed){t.next=2;break}return t.abrupt("return");case 2:if(this.config.positionElement){t.next=6;break}return this.reportError(Ci.errNotSet("positionElement","config")),this.destroy(),t.abrupt("return");case 6:this.setUpTemplateVars(),this.setUpRootElement(),this.onCreate(),this.setUpVisibilityMonitoring(),this.setUpSizeMonitoring(),this.setUpClickMonitoring(),this.hideSourceIframe(),this.config.content=this.config.content||"",this.setUpThirdParties(),this.showContent();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.setUpTemplateVars=function(){this.template.setTemplateVar("ID",this.config.id),this.template.setTemplateVar("LOCAL_ID",this.config.localId)},e.setUpRootElement=function(){this.rootElement=this.win.document.createElement("div"),this.rootElement.className="kargo-ad-v5 kargo-ad-"+this.config.localId+" kargo-ad-preload",this.config.externalId&&(pt(this.rootElement,this.config.externalId),this.rootElement.setAttribute("data-external-id",this.config.externalId)),this.rootElement.setAttribute("data-id",this.config.id),this.rootElement.setAttribute("data-format",this.config.format),this.rootElement.setAttribute("data-slot",this.config.slot),this.rootElement.innerHTML=this.template.replaceTemplateVars("html")+'<style type="text/css">'+this.template.replaceTemplateVars("css")+(this.config.css||"")+"</style>",ft(this.rootElement,this.config.positionLocation,this.config.positionElement)},e.setUpVisibilityMonitoring=function(){var t=this,e=te.indexOf(this.config.format)>-1;this.components.VisibilityMonitor&&(this.visibilityMonitor=new this.components.VisibilityMonitor(this.getVisibilityCheckElement(),this.config.sourceElement,e),this.visibilityMonitor.onVisibleChange((function(e){e?(t.onVisible(),t.logger.debug("Visible")):(t.onNotVisible(),t.logger.debug("Not Visible"))})),this.visibilityMonitor.onViewable((function(){t.reportAdInViewMetric(),t.onViewable(),t.logger.debug("Viewable")})),this.visibilityMonitor.onMrcVideoViewable((function(){t.onMrcVideoViewable(),t.logger.debug("MRC Video Viewable")})),this.visibilityMonitor.onCompleteViewable((function(){t.onCompleteViewable(),t.logger.debug("Complete Viewable")})),this.visibilityMonitor.onMissingScript((function(){t.logger.debug("Current script removed from DOM"),t.destroy()})),this.visibilityMonitor.start())},e.reportAdInViewMetric=function(){(this.isDebugMode()||1===Math.floor(100*Math.random()))&&this.adMetricReport("inview-50-percent",1)},e.setUpSizeMonitoring=function(){var t=this;if(this.components.SizeMonitor){var e=this.rootElement.querySelector(xi);this.sizeMonitor=new this.components.SizeMonitor(e),this.sizeMonitor.onSizeChange((function(e,r){t.logger.debug("Size Change: "+e+"x"+r),t.checkSizeConstraints(),!t.isCreativeLoaded&&r>25&&e>25&&(t.logger.debug("Creative Successfully Loaded"),t.setAsLoaded(),t.onLoad()),t.onSizeChange(e,r)})),this.sizeMonitor.start()}},e.setUpClickMonitoring=function(){var t=this;if(!this.clickMonitor){var e=this.rootElement.querySelector(xi);this.clickMonitor=new yi(this.win,this.logger,e),this.config.format!==Nt&&this.clickMonitor.onClick((function(e){t.onClick(e)})),this.clickMonitor.attachListener()}},e.hideSourceIframe=function(){if(this.config.sourceWindow){var t=s(this.config.sourceWindow);t&&(t.style.display="block",t.style.visibility="hidden",t.style.height="1px")}},e.setUpThirdParties=function(){var t=this.win.__krg_disable_adelaide;if(this.adelaide&&!t&&this.shouldAddMoatAdelaide()){var e={slot:this.config.slot,format:this.config.format||"",execution:this.config.execution||""};this.config.content+=this.adelaide.getTrackingTag(e)}this.moat&&this.moat.isTrackingViewability()&&this.shouldAddMoatAdelaide()&&(this.config.content+=this.moat.getTrackingTag()),this.shouldAddComScore()&&(this.comscore=this.comscore||new this.components.Comscore(this.win,this.logger,{source:this.config.source}),this.config.content+=this.comscore.getImpressionTrackerHtml())},e.showContent=function(){var t=this,e=this.rootElement.querySelector(xi);this.config.content?(this.logger.debug("Writing content to contentWrapper"),this.write(e,this.config.content).then((function(){t.onDisplay()})).catch((function(e){t.reportError(e),t.logger.error(e),t.destroy()}))):(this.setAsLoaded(),this.onDisplay(),this.onLoad())},e.destroy=function(){this.logger.debug("Destroying"),this.isDestroyed=!0,this.isVisible=!1,this.isHidden=!0,this.sizeMonitor&&this.sizeMonitor.stop(),this.visibilityMonitor&&this.visibilityMonitor.stop(),null!=this.rootElement&&_t(this.rootElement),this.onDestroy();var t=(0,c.GK)(this.win,"Kargo.Plugin.Mraid");t&&t.isActive()&&t.close()},e.bindEvents=function(){},e.write=function(t,e){var i=this;if(this.config.settings.companion&&this.config.companion_div){var n=this.win.atob(this.config.settings.companion),o=et(this.win);this.socialCanvasCreatives.companion={creative:n||null,renderDiv:this.config.companion_div,dimensions:{width:o?"500":"320",height:o?"86":"50"}}}if(this.config.settings.socanCeltraBack&&this.config.sc_background_div){var a=this.win.atob(this.config.settings.socanCeltraBack);this.socialCanvasCreatives.socanCeltraBack={creative:a||null,renderDiv:this.config.sc_background_div,dimensions:{width:"460",height:"320"}}}if(this.config.settings.socanCeltraFront&&this.config.sc_foreground_div){var s=this.win.atob(this.config.settings.socanCeltraFront);this.socialCanvasCreatives.socanCeltraFront={creative:s||null,renderDiv:this.config.sc_foreground_div,dimensions:{width:"420",height:"320"}}}if(this.config.previewMode){var l=null;(l=e.match(/<div class="celtra-ad-v3">[\s\S]*?<\/div>/gi))&&(this.logger.debug("Preview Mode - Writing Ad Content Outside of Iframe"),this.getRenderConfig=function(){return{hide:!0}},l.map((function(r){t.innerHTML+=r,e=e.replace(r,"")})))}var u=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");if(u&&u().isActiveViewRewriteEnabled())try{this.activeView&&this.activeView.isActiveViewWrapped(e)&&(this.activeView.moveUp(t,e),e=this.activeView.remove(e))}catch(t){t instanceof Error||t instanceof v||"string"==typeof t?this.reportError(t):this.reportError(String(t))}e=this.addPrefixAndSuffix(e);var h=this.win;t.ownerDocument&&t.ownerDocument.defaultView&&(h=t.ownerDocument.defaultView);var g=new this.components.CreativeSandbox(h,this.logger,this.getRenderConfig(),this.socialCanvasCreatives),d=null;if(this.config.source){var p=this.config.source;p.dfp?d=p.dfp.creative:p.ssp?d=p.ssp.rtbCreativeId:p.kraken?d=p.kraken.creative:p.kargo&&(d=p.kargo.creativeId)}g.setCreativeId(d);var f={creative:d,format:this.config.format,slot:this.config.slot,source:this.config.source.type,adTagVersion:"6.37.0"};if(g.iframeConfig.macros=Object.assign(g.iframeConfig.macros||{},f),g.iframeConfig.tracking=this.config.settings.tracking,"Wrapper"===this.config.format){var m=null,k=e.match(/<script[^>]*?skeleton.js"><\/script>/gi);k&&k.length&&(m=k[0],g.iframeConfig.macros.iasTag=m,e=e.replace(m,"")),this.config.settings.height_offset&&(g.iframeConfig.macros.wrapper_height_offset=this.config.settings.height_offset)}var b=r()(this.win,"Kargo.Plugin.Cerberus"),y=r()(this.win,"Kargo.Config"),w={macroConfig:{lexId:b&&b.getLexId()||"",deviceId:y&&y.getDeviceId()||"",slotId:this.config.slot||"",impressionId:this.config.id,hostname:r()(this.win,"location.hostname")||"",adFormat:this.config.format||"",creativeId:this.creativeInfo.id||""},apiMethods:{getImpressionId:function(){return i.config.id},isVisible:function(){return i.isVisible},isViewable:function(){return i.isViewable},hide:function(){return i.hide()},show:function(){return i.show()},destroy:function(){return i.destroy()},reportError:function(t,e){return void 0===e&&(e={}),i.reportError(t,e)}}};return g.iframeConfig.creativeApiMacros=w,g.setLocationElement(t),new Promise((function(t,r){g.onContentLoad(t),i.moat&&i.moat.isTrackingViewability()&&g.onSizeChange((function(){return i.moat.sizeChanged()})),g.onError(r),g.write(e);var n=Date.now()-1;i.reportTimeToCreative(n)}))},e.addPrefixAndSuffix=function(t){return this.config.prefix&&(this.logger.debug("Creative - adding prefix to creative content: "+this.config.prefix),t=this.config.prefix+" "+t),this.config.suffix&&(this.logger.debug("Creative - adding suffix to creative content: "+this.config.suffix),t=t+" "+this.config.suffix),t},e.show=function(){this.rootElement&&wt(this.rootElement,Ai),this.isHidden=!1},e.hide=function(){this.rootElement&&pt(this.rootElement,Ai),this.isHidden=!0},e.setAsLoaded=function(){wt(this.rootElement,"kargo-ad-preload"),this.isCreativeLoaded=!0},e.hideThirdPartyTrackers=function(){for(var t=this.rootElement.querySelector(".kargo-ad-content").getElementsByTagName("*"),e=0;e<t.length;e+=1){var r=t[e];1===r.offsetWidth&&1===r.offsetHeight&&null===r.getAttribute("data-krg-tracker")&&(r.setAttribute("data-krg-tracker",""),r.style.position="absolute",r.style.visibility="hidden",r.style.left="-9999px",r.style.top="0px")}},e.getVisibilityCheckElement=function(){return this.rootElement?this.rootElement.querySelector(".kargo-ad-content"):null},e.getIframe=function(){return this.rootElement.querySelector(Si)},e.checkSizeConstraints=function(){if(this.isCreativeLoaded&&this.sizeMonitor){var t=this.sizeMonitor.currentSize;if(t.height)if("MiddleBanner"===this.config.format)t.height-250>15&&this.reportError("SIZE: "+t.height+" is taller than allowed",{isWarning:!0})}},e.convertToArray=function(t){var e=null;return Array.isArray(t)?e=t:["string","number","object","function"].indexOf(typeof t)>-1&&null!==t&&(e=[t]),e},e.shouldAddMoatAdelaide=function(){if(this.config.source){if("Html"===this.config.source.type)return!1;var t=this.config.source.ssp&&"open"===this.config.source.ssp.auctionType,e=this.config.source.kraken&&"open"===this.config.source.kraken.auctionType;if(t||e)return!1}return!0},e.shouldAddComScore=function(){if(!this.components.Comscore)return!1;var t=!0,e=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");if(e){var r=e();r&&r.isComScoreEnabled&&(t=r.isComScoreEnabled())}return t},e.getAnalytics=function(){var t={localId:this.config.localId,id:this.config.id,type:this.config.type,format:this.config.format,execution:this.config.execution,kargoCreativeId:null,timestamps:{start:this.timestamps.start,displayed:this.timestamps.displayed,firstVisible:this.timestamps.firstVisible,viewable:this.timestamps.viewable,destroyed:this.timestamps.destroyed}},e=r()(this.config,["source","kargo","creativeId"],null);return e&&(t.kargoCreativeId=e),t},e.onCreate=function(){var t=this;null!==this.config.onCreate&&this.config.onCreate(),this.config.settings.enable_messaging&&this.win.addEventListener("message",(function(e){var r=bi[e.data];r&&r.bind(t)(t)}))},e.onLoad=function(){var t=this;this.startHandDetector();var e=this.config.format;if(this.container&&null!==this.container.getType()&&"OutstreamVideo"!==e){var r=this.container.getType(),i=zt[e].size,n=i.w,o=i.h;"GoogleAmp"===r&&("Sidekick"===this.config.format?(n=Math.max(this.sizeMonitor.currentSize.width,140),o=Math.max(this.sizeMonitor.currentSize.height,180)):"Hover"===this.config.type&&(n=this.config.sourceWindow.context.initialIntersection.rootBounds.width,o=64)),this.logger.debug("Setting "+r+" Container Size: "+n+"x"+o),this.container.setContainerSize(n,o).catch((function(e){var i="Failed to set "+r+" Container Size";e&&(i+=": "+e),t.logger.debug(i)}))}null!==this.config.onLoad&&this.config.onLoad()},e.onDisplay=function(){this.logger.debug("Creative is displayed");var t=Date.now();if(this.reportTimeToDisplay(t),this.isDisplayed=!0,this.timestamps.displayed=Date.now(),null!==this.config.onDisplay&&this.config.onDisplay(),this.config.slot&&this.components.tracking){var e=this.config.slot,i=r()(this.config,["source","kargo","kraken_slot_id"],null);if(i&&(e+="-KRKSID-"+i),"Passback"!==this.config.source.type)this.trackEvent("serve",e);else{var n={server:this.config.source.type.toLowerCase()};this.trackEvent("serve",e,n)}}(this.isDebugMode()||1===Math.floor(Math.random()*this.AD_METRIC_RATE))&&this.adMetricReport("impression"),"lmt"===this.config.source.tag&&this.components.tracking&&(this.components.tracking.kaelImpression("lmt-serve",this.config.id,this.config.id),this.components.tracking.kaelViewability("lmt-inviewtime",this.config.id,this.getVisibilityCheckElement(),this.config.id)),this.moat&&this.moat.isTrackingViewability()&&this.shouldAddMoatAdelaide()&&this.moat.onDisplay()},e.onSizeChange=function(t,e){null!==this.config.onSizeChange&&this.config.onSizeChange(t,e),this.moat&&this.moat.isTrackingViewability()&&this.moat.sizeChanged()},e.onVisible=function(){var t=this,e=!!h(g(this.win),"krg_debug"),r=Date.now(),i=this.win.setInterval((function(){t.config.sourceElement.ownerDocument.defaultView||(Date.now()-r<1e4&&(t.isDebugMode()||1===Math.floor(Math.random()*t.SLOT_REFRESHED_REPORT_RATE))&&t.reportError("Slot has refreshed within 10 seconds"),"Hover"===t.config.type&&((e||1===Math.floor(500*Math.random()))&&t.reportError("Slot refreshed with detached script"),t.destroy()),t.win.clearTimeout(i))}),500);if(this.config.settings.enable_messaging){var n=this.getIframe();n&&n.contentWindow.postMessage(this.config.format+"-onVisible","*")}this.isVisible=!0,this.timestamps.firstVisible||(this.timestamps.firstVisible=Date.now()),null!==this.config.onVisible&&this.config.onVisible()},e.onNotVisible=function(){if(this.config.settings.enable_messaging){var t=this.getIframe();t&&t.contentWindow&&t.contentWindow.postMessage(this.config.format+"-onNotVisible","*")}this.isVisible=!1,null!==this.config.onNotVisible&&this.config.onNotVisible()},e.onMrcVideoViewable=function(){var t=this.config,e=t.slot,r=t.source,i=t.format;if(e&&this.components.tracking&&"Passback"!==r.type){var n=!1;te.indexOf(i)>=0&&(n=!0),n&&this.trackEvent("view-predict-in-confirmed-502",e)}},e.onCompleteViewable=function(){this.config.slot&&this.components.tracking&&"Passback"!==this.config.source.type&&this.trackEvent("completeview",this.config.slot)},e.onViewable=function(){this.isViewable=!0,this.timestamps.viewable=Date.now(),null!==this.config.onViewable&&this.config.onViewable();var t=this.config.slot,e=r()(this.config,["source","kargo","kraken_slot_id"],null);e&&(t+="-KRKSID-"+e),this.config.slot&&this.components.tracking&&"Passback"!==this.config.source.type&&this.trackEvent("view",t),"lmt"===this.config.source.tag&&this.components.tracking&&this.components.tracking.kaelImpression("lmt-view",this.config.id,this.config.id),this.hideThirdPartyTrackers()},e.adMetricReport=function(t,e){void 0===e&&(e=void 0),Oe.reportAdMetric({value:e,type:t,version:"6.37.0"},this.config,this.logger)},e.reportTimeToDisplay=function(t){var e=t-this.config.getAdTimestamp;(this.isDebugMode()||this.creativeWrittenMetricReported)&&(this.adMetricReport("time-to-display",e),this.creativeWrittenMetricReported=!1)},e.reportTimeToCreative=function(t){var e=t-this.config.getAdTimestamp;(this.isDebugMode()||1===Math.floor(Math.random()*this.AD_METRIC_RATE))&&(this.adMetricReport("time-to-creative",e),this.creativeWrittenMetricReported=!0)},e.startHandDetector=function(){var t,e,r=this;this.win.document.body.addEventListener("touchstart",(function(e){t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}})),this.win.document.body.addEventListener("touchend",(function(i){var n=!1;n=!((e={x:i.changedTouches[0].pageX,y:i.changedTouches[0].pageY}).x>t.x),e.y>t.y&&(!1,n=!n),r.hand||(r.hand=n?"left":"right")}))},e.getActiveCloseBtnPos=function(){for(var t,e=null,r=wi(this.rootElement.querySelectorAll(".kargo-hover-close"));!(t=r()).done;){var i=t.value.getBoundingClientRect();if(i.height&&i.width){e=i;break}}return e},e.computeClickToCloseDistance=function(t){if("Hover"===this.config.type&&t.currentTarget&&t.currentTarget.innerHeight){var e=this.rootElement.querySelector(".kargo-ad-content").getBoundingClientRect(),r=t.currentTarget.innerHeight-e.height,i={left:t.clientX,top:t.clientY>=r?t.clientY-r:t.clientY},n=this.getActiveCloseBtnPos();if(n){var o={left:e.left+i.left,top:e.top+i.top},a=function(t){return t*t},s=Math.floor(Math.sqrt(a(n.left-o.left)+a(n.bottom-o.top)));return this.logger.debug("Click position distance to close button: ",s),{distance:s,click_x:o.left,click_y:o.top,close_x:n.left,close_y:n.bottom,close_position:"right",hand:this.hand}}}},e.onClick=function(t,e){var i=this,o=this.config.slot,a=r()(this.config,["source","kargo","kraken_slot_id"],null);a&&(o+="-KRKSID-"+a);var s=this.config.settings.tracking.click;s&&s.length&&s.forEach((function(t){E(i.win,t)}));var l=r()(e,"event",null),u=r()(this.config,"settings.tracking.click_to_expand",[])[0],h=r()(this.config,"settings.tracking.swipe_to_expand",[])[0];if("swipe"===l&&h?E(this.win,h):"click"===l&&u&&E(this.win,u),this.config.slot&&this.components.tracking&&"Passback"!==this.config.source.type&&this.trackEvent("click",o),this.adMetricReport("click"),this.isDebugMode()||1===Math.floor(1e3*Math.random()))try{var g={krakenSlotId:a,timeSincePageLoad:Math.round(n(this.win).performance.now()),creativeHeight:this.sizeMonitor.currentSize.height},d=this.computeClickToCloseDistance(t),p=this.getTrackingParams({});(0,c.TS)(g,d,p),this.components.tracking.kaelCustomEvent("click-to-close-distance","default","click",g,p.impId)}catch(t){this.logger.error("Unable to compute click to close distance: "+t)}},e.onClose=function(){if(this.config.slot&&this.components.tracking&&"Passback"!==this.config.source.type){var t=this.config.slot,e=r()(this.config,["source","kargo","kraken_slot_id"],null);e&&(t+="-KRKSID-"+e),this.trackEvent("close",t)}null!==this.config.onClose&&this.config.onClose()},e.onDestroy=function(){this.isDestroyed=!0,this.timestamps.destroyed=Date.now(),null!==this.config.onDestroy&&this.config.onDestroy()},e.trackEvent=function(t,e,r){void 0===r&&(r={});var i=this.getTrackingParams(r);this.components.tracking.trackEvent(t,e,i)},e.getTrackingParams=function(t){var e=this.config,i=e.id,n=e.format;return Object.assign({format:n,impId:i,creativeSource:this.creativeInfo.source,creativeTemplateId:r()(this.config,"settings.native.creativeOptimizer.template_id","")},{},t)},e.isDebugMode=function(){return!!h(g(this.win),"krg_debug")},t}();const Ei=Ii;var Oi=__webpack_require__(3604),Vi=__webpack_require__(1616),Ri="bannerVisible",Ti="interactiveAds",Li=new S("Banner"),Pi={wrapper_id:null,wrapper_fn:null,branding:"kargo",enable_entry_animation:!0,native:{},endcard_label:!1,vast_xml:null,vast_url:null,click_url_prefix:null,click_destination_url:null,tracking:{start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],error:[],mute:[],unmute:[],replay:[],expand:[],dismiss:[]}},Mi=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).vastDimensions=null,i.vpaidDimensions=null,i.templateHtml=Oi,i.templateCss=Vi,i.platformMacros=null,i.isVpaid=!1,i.interacted=!1,i}It(e,t);var r=e.prototype;return r.validateConfig=function(e){var r=this,i=(0,c.TS)({},Pi),n=(0,c.TS)({settings:i},e);if(n.type="Banner",this.mobilized=!i.branding||"mobilized"===i.branding,!i.forceResponsive&&et(this.win)&&(i.has_responsive_width=!1),this.preventResponsive(n.slot)&&(i.has_responsive_width=!1),"has_responsive_width"in i||(i.has_responsive_width=this.determineResponsive(n)),i.tracking&&Object.keys(i.tracking).forEach((function(t){i.tracking[t]=r.convertToArray(i.tracking[t])||[]})),i.vast_xml&&(i.vast_xml=this.template.getHtml(i.vast_xml,Pi.vast_xml)),!n.positionElement&&i.wrapper_fn)try{if(n.positionElement=(0,c.Bg)(this.win,i.wrapper_fn),n.positionLocation="append",n.positionElement&&this.win.jQuery&&n.positionElement instanceof this.win.jQuery){var o=n.positionElement;n.positionElement=o[0]}}catch(t){n.positionElement=null,this.reportError("Javascript Error in  "+n.format+" Wrapper Function: "+t.name+" - "+t.message)}return!n.positionElement&&i.wrapper_id&&(n.positionElement=this.win.document.getElementById(i.wrapper_id),n.positionLocation="append"),n.positionElement||this.reportError(n.format+" position cannot be determined"),t.prototype.validateConfig.call(this,n)},r.setFixedWidth=function(){this.template.setTemplateVar("WIDTH",""),this.config.settings.has_responsive_width=!1,this.logger.log("A BYOC creative was found and the width responsive was set to false")},r.detectContainerEnvironment=function(){var e=this;return t.prototype.detectContainerEnvironment.call(this).then((function(){e.container&&null!==e.container.getType()&&"mobilized"===e.config.settings.branding&&(e.config.settings.branding="kargo",e.mobilized=!1)}))},r.determineResponsive=function(t){var e=!0;return Wt.includes(t.format)&&t.content?e=!t.content.includes('<img src="//dam.cdn.kargo.com'):$t.includes(t.format)&&(e=!1),e},r.display=function(){var e=St(Ot().mark((function e(){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.template,!0===this.config.settings.has_responsive_width&&r.setTemplateVar("WIDTH","kargo-banner-width"),"advertisement"===this.config.settings.branding?r.setTemplateVar("BRANDING","kargo-banner--branding-advertisement"):"mobilized"===this.config.settings.branding?r.setTemplateVar("BRANDING","kargo-banner--branding-mobilized"):"none"===this.config.settings.branding&&r.setTemplateVar("BRANDING","kargo-banner--branding-none"),t.prototype.display.call(this);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getRenderConfig=function(){var t=this.config,e=t.format,r=(t.execution,{width:320,height:50,expansionCheck:!1,customCss:"",maxDimension:{},minDimension:{width:320,height:50},hide:this.isVpaid,macros:this.platformMacros});switch(this.config.settings.has_responsive_width||(r.maxDimension.width=this.rootElement.clientWidth),e){case"MiddleBanner":r.width=300,r.minDimension.width=300,r.expansionCheck=!0;break;case"OutstreamVideo":case"NonVastOutstreamVideo":this.config.settings.forceResponsive&&(r.fullHeight=!0),r.customCss="text-align: center;",r.width=300,r.height=200,r.maxDimension.height=600,r.minDimension=null,r.expansionCheck=!0;break;case"Venti":"composer"!==this.config.settings.creative_origin&&(r.minDimension.height=460),r.height=460,r.expansionCheck=!0;break;case"HighRise":r.height="max"===this.config.execution?50:250,r.maxDimension.height=460,r.expansionCheck=!0;break;case"KeyArt":r.height=350,r.minDimension.height=350,r.expansionCheck=!0;break;case"Native":case"NativeVideoKeyArt":case Pt:case Mt:r.width=300,r.height=250,r.expansionCheck=!0;break;case"HalfPage":r.width=300,r.height=600,r.expansionCheck=!0;break;case"LargeLeaderboard":r.width=970,r.height=90,r.expansionCheck=!0;break;case"Leaderboard":r.width=728,r.height=90,r.expansionCheck=!0;break;case"WideSkyscraper":r.width=160,r.height=600,r.expansionCheck=!0;break;case"SocialCanvas":r.width=320,r.height=180;break;case"Billboard":r.width=970,r.height=250}return-1===Qt.indexOf(this.config.format)?(r.maxDimension.width=Math.min(r.maxDimension.width,440),this.config.settings.has_responsive_width&&(r.width="100%","MiddleBanner"===e&&(r.minDimension.height=250))):(r.minDimension.width=r.width,r.minDimension.height=r.height,r.maxDimension.width=r.width,"LargeLeaderboard"!==e&&(r.maxDimension.height=r.height)),r},r.getVisibilityCheckElement=function(){return this.rootElement?this.rootElement.querySelector(".kargo-ad-banner"):null},r.onCreate=function(){var e=this.rootElement.querySelector(".kargo-ad-content");if(this.isVpaid){this.vastDimensions&&this.vastDimensions.height&&this.vastDimensions.width&&this.vastDimensions.height>this.vastDimensions.width&&pt(e,"center-vertical");e.style.minWidth="300px",e.style.width="300px",e.style.maxWidth="300px"}else{var r=et(this.win)&&!this.config.settings.forceResponsive?300:440;-1===Qt.indexOf(this.config.format)?e.style.maxWidth=Math.min(this.win.screen.availWidth,r)+"px":e.style.maxWidth=this.getRenderConfig().width+"px"}t.prototype.onCreate.call(this)},r.onLoad=function(){this.show(),t.prototype.onLoad.call(this)},r.onDisplay=function(){if(!this.isVpaid){var e=this.rootElement.querySelector(".kargo-loader"),r=et(this.win)?300:Math.min(this.rootElement.clientWidth,440);e.style.width=r+"px";var i=9*r/16;e.style.height=i+"px"}var n=this.rootElement.querySelectorAll(".kargo-banner-optout");Array.from(n).forEach((function(t){wt(t,"hide"),pt(t,"show")})),t.prototype.onDisplay.call(this)},r.onSizeChange=function(e,r){if(-1===Kt.indexOf(this.config.format)&&r>300){var i=Li.errNew("Creative Height exceeded max of 300px;\n          element height: "+r+";\n          viewport dim: "+this.win.innerWidth+" x "+this.win.innerHeight);Oe.reportAdMetric({type:"failure",version:"6.37.0",errCode:"crtve-hght-max"},this.config,this.logger),this.reportError(i),this.destroy()}var n=this.rootElement.querySelector(".kargo-ad-banner"),o=this.rootElement.querySelector(".kargo-banner-optout"),a="MiddleBanner"===this.config.format&&250===r&&(X(this.win)||Y(this.win)),s=-1!==qt.indexOf(this.config.format);if(this.mobilized&&(a||s)&&(pt(n,"kargo-banner--branding-mobilized"),pt(o,"kargo-branding-mobilized")),"NonVastOutstreamVideo"===this.config.format){var c=this.rootElement.querySelector(".kargo-ad-content"),l=this.rootElement.querySelector(".kargo-creative");l&&(c.style.maxWidth=l.clientWidth+"px")}t.prototype.onSizeChange.call(this,e,r)},r.onVisible=function(){var e=this.container?this.container.getType():null,r=(0,c.GK)(this.win,"Kargo.CreativeRegister"),i=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig"),n=!1;if(i&&i()){var o=i();o.isHoverHidingDisabled&&(n=o.isHoverHidingDisabled())}if(r&&null===e){var a=r.getCreativesOfType("Hover"),s=(0,c.GK)(this.win,"Kargo.getAdsOfType");if(s)for(var l=s("Hover"),u=0;u<l.length;u+=1)a.indexOf(l[u].ad_unit)<0&&a.push(l[u].ad_unit);if(this.config.execution&&this.config.execution.includes("bto-interactive-adhesive")&&(n=!0,this.interacted||(this.win.postMessage({message:Ri,adSlot:this.config.slot},"*"),this.interacted=!0)),!n)for(var h=0;h<a.length;h+=1)a[h].getConfig().settings.disable_hover_hiding||a[h].hide()}t.prototype.onVisible.call(this)},r.onNotVisible=function(){var e=this.container?this.container.getType():null,r=(0,c.GK)(this.win,"Kargo.CreativeRegister");if(r&&null===e){var i=r.getCreativesOfType("Hover"),n=(0,c.GK)(this.win,"Kargo.getAdsOfType");if(n)for(var o=n("Hover"),a=0;a<o.length;a+=1)i.indexOf(o[a].ad_unit)<0&&i.push(o[a].ad_unit);for(var s=0;s<i.length;s+=1)i[s].show()}t.prototype.onNotVisible.call(this)},r.onViewable=function(){t.prototype.onViewable.call(this)},r.onDestroy=function(){var e=this.container?this.container.getType():null,r=(0,c.GK)(this.win,"Kargo.CreativeRegister");if(r&&null===e){var i=r.getCreativesOfType("Hover"),n=(0,c.GK)(this.win,"Kargo.getAdsOfType");if(n)for(var o=n("Hover"),a=0;a<o.length;a+=1)i.indexOf(o[a].ad_unit)<0&&i.push(o[a].ad_unit);for(var s=0;s<i.length;s+=1)i[s].show()}t.prototype.onDestroy.call(this)},e}(Ei);const Fi=Mi;var Ni;!function(t){t.NATIVE="https://storage.cloud.kargo.com/ad/network/tag/ad-native.js",t.NATIVE_STAGING="https://storage.cloud.kargo.com/ad/network/tag/ad-native-stag.js"}(Ni||(Ni={}));var Ui="Play mp4 with video player",ji="No MP4 available in VAST",zi={checked:!1,passive:!1,optionsAsObject:!1},Ki=function(t){if(t&&!zi.checked){try{var e=Object.defineProperties({},{capture:{get:function(){zi.optionsAsObject=!0}},passive:{get:function(){zi.passive=!0}}}),r=function(){};t.addEventListener("kargo-test",r,e),t.removeEventListener("kargo-test",r,e)}catch(t){}zi.checked=!0}};function qi(t,e,r,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var o="string"==typeof e?[e]:e;Ki(t);var a=i;if(zi.optionsAsObject&&(a={capture:i},zi.passive&&(a.passive=n)),t.addEventListener)for(var s=0;s<o.length;s+=1)t.addEventListener(o[s],r,a)}function Bi(t,e,r,i){void 0===i&&(i=!1);var n="string"==typeof e?[e]:e;Ki(t);var o=i;if(zi.optionsAsObject&&(o={capture:i}),t.removeEventListener)for(var a=0;a<n.length;a+=1)t.removeEventListener(n[a],r,o)}!function(){function t(t){this.handling=!1,this.listeners=[],this.handleAction=null,this.type="",this.handling=t.handling||this.handling,this.listeners=t.listeners||this.listeners,this.handleAction=t.handleAction||this.handleAction,this.type=t.type||this.type}t.prototype.addListener=function(t){t&&this.listeners.push(t)},t.prototype.handle=function(){for(var t=0;t<this.listeners.length;t+=1){var e=this.listeners[t];this.handleAction?this.handleAction(e,arguments):console.log("handleAction function needed")}}}();var Hi=__webpack_require__(206),Gi=__webpack_require__(90),Wi=__webpack_require__(1674),Ji=__webpack_require__(7488),Zi=function(){function t(){}return t.observeElement=function(t,e,r,i){void 0===r&&(r=!1);var n=new IntersectionObserver((function(e){e.some((function(e){return r?e.isIntersecting&&(n.unobserve(t),i(e)):i(e),!0}))}),{threshold:e});return n.observe(t)},t}(),Qi=function(){function t(){}return t.interact=function(e,r,i,n,o){var a=document.querySelector('.kargo-ad-v5[data-slot="'+o.data.adSlot+'"]'),s=r.percent>=100?.95:r.percent/100;if(a)if(i){var c=!1;o.data.message===Ri&&Zi.observeElement(a,s,!0,(function(){Bi(e,"message",t.interact),c||n({message:Ti,format:r.format}),c=!0}))}else{var l=!1;o.data.message===Ri&&Zi.observeElement(a,s,!1,(function(t){!l&&t.isIntersecting&&(l=!0),t.boundingClientRect.y<0||l&&n({message:Ti,format:r.format,adSlot:o.data.adSlot})}))}},t}(),$i="tri-plex";function Xi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Yi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xi(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var tn=new S("Hover"),en={hug_side:"bottom",branding:"kargo",wrapper_fill:!0,height_offset:0,wrapper_override:!1,wrapper_id:null,wrapper_fn:null,horizontal_align:null,enable_entry_animation:!0,prevent_close:!1,vast_xml:null,vast_url:null,click_url_prefix:null,click_destination_url:null,tracking:{viewable:[],start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],error:[],mute:[],unmute:[],replay:[],expand:[],dismiss:[]},interact_percent:75},rn=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).ampMode=null,i.templateHtml=Hi,i.templateCss=Gi,i.celtraInterval=null,i.platformMacros=null,i}It(e,t);var i=e.prototype;return i.validateConfig=function(e){var r=this,i=(0,c.TS)({},en),n=(0,c.TS)({settings:i},e);if(n.type="Hover",this.preventResponsive(n.slot)&&(i.has_responsive_width=!1),i.vast_xml&&(i.vast_xml=this.template.getHtml(i.vast_xml,en.vast_xml)),i.tracking&&Object.keys(i.tracking).forEach((function(t){i.tracking[t]=r.convertToArray(i.tracking[t])||[]})),"has_responsive_width"in i||(i.has_responsive_width=Jt.includes(n.format)),void 0!==e.enable_messaging&&(i.enable_messaging=e.enable_messaging),-1!==["Breakaway","Sidekick"].indexOf(n.format)&&(i.horizontal_align||(i.horizontal_align="right")),-1!==Zt.indexOf(n.format)&&(i.wrapper_fill=!1),i.watch_to_unlock&&(i.wrapper_fill=!1,i.branding="none"),i.wrapper_override){if(!n.positionElement){if(i.wrapper_fn)try{if(n.positionElement=(0,c.Bg)(this.win,i.wrapper_fn),n.positionLocation="append",n.positionElement&&this.win.jQuery&&n.positionElement instanceof this.win.jQuery){var o=n.positionElement;n.positionElement=o[0]}}catch(t){n.positionElement=null,this.reportError("Javascript Error in  "+n.format+" Wrapper Function: "+t.name+" - "+t.message)}!n.positionElement&&i.wrapper_id&&(n.positionElement=this.win.document.getElementById(i.wrapper_id),n.positionLocation="append")}}else n.positionElement=this.win.document.body,n.positionLocation="append";return t.prototype.validateConfig.call(this,n)},i.detectContainerEnvironment=function(){var e=this;return t.prototype.detectContainerEnvironment.call(this).then((function(){var t=e.container?e.container.getType():null;if("GoogleAmp"===t){var r=e.config.sourceWindow;r.context&&"AMP-STICKY-AD"===r.context.container?(e.ampMode="legacy",e.config.settings.wrapper_override=!0):(e.ampMode="sticky",r.document.body.style.backgroundColor="transparent",e.config.settings.prevent_close=!0);var i=r.document.querySelector("#c > script");e.config.positionElement=i||e.config.sourceElement,e.config.positionLocation="before"}else null!==t&&(e.config.settings.wrapper_override=!0,e.config.positionElement=e.config.sourceElement,e.config.positionLocation="before")}))},i.setHoverTemplateVars=function(){var t=this.template;this.config.settings.wrapper_override&&(t.html=Wi,t.css=Ji),"Wrapper"===this.config.format?t.setTemplateVar("HEIGHT_OFFSET","0"):t.setTemplateVar("HEIGHT_OFFSET",this.config.settings.height_offset),"top"===this.config.settings.hug_side&&t.setTemplateVar("HUG_SIDE","kargo-hover--top"),this.config.execution&&this.config.execution===$i&&t.setTemplateVar("TRIPLEX","kargo-triplex-execution"),"advertisement"===this.config.settings.branding?t.setTemplateVar("BRANDING","kargo-hover--branding-advertisement"):"none"===this.config.settings.branding&&t.setTemplateVar("BRANDING","kargo-hover--branding-none"),!0===this.config.settings.wrapper_fill?t.setTemplateVar("WRAPPER_FILL","kargo-hover--wrapper-fill"):t.setTemplateVar("WRAPPER_FILL","kargo-hover--wrapper-nofill"),"left"===this.config.settings.horizontal_align?t.setTemplateVar("HORIZONTAL_ALIGN","kargo-hover--align-left"):"right"===this.config.settings.horizontal_align&&t.setTemplateVar("HORIZONTAL_ALIGN","kargo-hover--align-right"),!0===this.config.settings.has_responsive_width&&t.setTemplateVar("WIDTH","kargo-hover--responsive"),this.config.settings.breakout&&t.setTemplateVar("IS_BREAKOUT","kargo-hover--breakout"),this.config.settings.prevent_close&&t.setTemplateVar("PREVENT_CLOSE","kargo-hover--prevent-close"),"sticky"===this.ampMode&&"Sidekick"!==this.config.format&&t.setTemplateVar("AMP_MODE","kargo-hover--amp-sticky"),!0===this.config.settings.is_one_sec_interstitial&&t.setTemplateVar("FORMAT","kargo-hover--one-sec-interstitial"),"peel-away"===this.config.execution&&t.setTemplateVar("VERTICAL_ALIGN","kargo-logo--top"),this.config.format===Ut&&t.setTemplateVar("DESKTOP_HOVER","kargo-desktop-hover")},i.display=function(){var e=St(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setHoverTemplateVars(),t.prototype.display.call(this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getRenderConfig=function(){var t=this.config.format,e={width:0,height:0,expansionCheck:!0,customCss:"",maxDimension:{},minDimension:{height:0,width:0},macros:this.platformMacros};switch(t){case"Hover":e.minDimension={height:50,width:320};break;case"Sidekick":e.width=140,e.height=140,e.minDimension={height:140,width:140};break;case"VideoAnchor":e.width=0,e.height=0,e.minDimension=null;break;case Ut:e.width=728,e.height=90}this.config.settings.watch_to_unlock&&(e.height=375,e.expansionCheck=!0),this.config.settings.has_responsive_width&&(e.width=this.win.innerWidth,e.maxDimension.width=440),this.config.execution&&this.config.execution===$i&&(e.width=320,e.height=150);var r=this.config.settings.tracking.interactive;return!r||"Hover"!==t&&"Sidekick"!==t||(e.macros=e.macros?Yi(Yi({},e.macros),{},{interactive:r}):{interactive:r}),e},i.getVideoCreative=function(){var t=St(Ot().mark((function t(){var e,r,i,n;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.video=new this.components.Video(this.win,this.logger),(e=this.video).setSource(this.resolvedSource),t.next=5,this.getVideoConfig();case 5:return r=t.sent,e.setConfig(r),t.next=9,this.config.settings.vast_url;case 9:if(t.t0=t.sent,t.t0){t.next=12;break}t.t0=this.config.settings.vast_xml;case 12:if(!(i=t.t0)){t.next=18;break}return t.next=16,e.parseVast(i);case 16:t.next=23;break;case 18:if(!this.config.content){t.next=22;break}e.html=this.config.content,t.next=23;break;case 22:throw tn.errNotSet("VAST or ViewStream snippet");case 23:return t.prev=23,t.next=26,e.getVideoAnchorSnippet();case 26:n=t.sent,this.config.content=n+(this.config.content||""),this.platformMacros=e.getPlatformMacros(),t.next=37;break;case 31:if(t.prev=31,t.t1=t.catch(23),"VideoPlayer"===e.creativeType){t.next=36;break}return t.next=36,e.submitVastForTranscoding();case 36:throw t.t1;case 37:case"end":return t.stop()}}),t,this,[[23,31]])})));return function(){return t.apply(this,arguments)}}(),i.getVisibilityCheckElement=function(){return this.rootElement?this.rootElement.querySelector(".kargo-ad-hover"):null},i.initializeInteractiveAds=function(){var t=this,e=r()(this.config.settings,"tracking.interactive"),i=function(){},n=!1;"bto-interactive-adhesive-pickup"===this.config.execution?(n=!0,i=function(e){t.win.postMessage(e,"*"),t.isDestroyed||t.destroy()}):"bto-interactive-adhesive-static"===this.config.execution&&(i=function(r){t.win.postMessage(r,"*"),e&&E(t.win,e)});var o={percent:this.config.settings.interact_percent,format:this.config.format};qi(this.win,"message",Qi.interact.bind(this,this.win,o,n,i))},i.onCreate=function(){var e=this;if(this.config.settings.watch_to_unlock){for(var r=this.rootElement.querySelectorAll(".kargo-hover-close"),i=0;i<r.length;i++)pt(r[i],"hide");var n=function(t){t.preventDefault()};qi(this.win.document.body,"touchmove",n),this.win.setTimeout((function(){e.destroy(),Bi(e.win.document.body,"touchmove",n)}),7e3)}if(!this.config.settings.wrapper_override)for(var o=this.rootElement.querySelectorAll(".kargo-hover-close"),a=0;a<o.length;a++)qi(o[a],["click","touchstart"],(function(t){t.preventDefault();var r=new Event("kargo-hover-close");if(e.win.dispatchEvent(r),(e.config.settings.tracking||{}).dismiss)for(var i=0;i<e.config.settings.tracking.dismiss.length;i++)E(e.win,e.config.settings.tracking.dismiss[i]);e.onClose(),e.destroy()}),!0,!1);t.prototype.onCreate.call(this)},i.onLoad=function(){var e=(0,c.GK)(this.win,"Kargo.CreativeRegister");if(e)for(var r=e.getCreativesOfType("Hover"),i=0;i<r.length;i++)r[i].getId()!==this.config.id&&r[i].destroy();!this.config.wrapper_override&&e||this.show(),t.prototype.onLoad.call(this)},i.onDisplay=function(){var e=this;if(null===(this.container?this.container.getType():null)&&"bottom"===this.config.settings.hug_side&&"ios"===Q(this.win)&&"safari"===Z(this.win)){var r=0;this.checkHeightOffset=function(){var t=xt(e.win),i=0;if("landscape"===t.orientation&&(i=t.screen.w-e.win.innerHeight),i!==r){r=i;var n=e.rootElement.querySelector(".kargo-ad-hover");n&&(n.style.marginBottom=i+"px")}},qi(this.win,"resize",this.checkHeightOffset,!1,!0)}this.win.Kargo.externApi=this.win.Kargo.externApi||{},this.win.Kargo.externApi.KAP_READY=function(){e.rootElement.querySelector(".kargo-ad-hover").classList.add("is-loaded")},this.win.setTimeout((function(){e.win.Kargo.externApi.KAP_READY()}),500),t.prototype.onDisplay.call(this)},i.onSizeChange=function(e,r){var i;if(r>200&&"Wrapper"!==this.config.format){i=this.rootElement.querySelectorAll(".kargo-hover-close");for(var n=0;n<i.length;n++)pt(i[n],"expanded")}t.prototype.onSizeChange.call(this,e,r)},i.onVisible=function(){var e=this;this.config.execution&&this.config.execution.includes("bto-interactive-adhesive")&&this.initializeInteractiveAds(),this.config.settings.enable_messaging&&window.addEventListener("message",(function(t){var r=e.rootElement.querySelector(Si).contentWindow;r&&r.postMessage(t.data,"*")}));var r=this.container?this.container.getType():null,i=(0,c.GK)(this.win,"Kargo.CreativeRegister"),n=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig"),o=!1;if(n&&n()){var a=n();a.isHoverHidingDisabled&&(o=a.isHoverHidingDisabled())}if(this.config.settings.disable_hover_hiding&&(o=!0),!o&&null===r){var s=i.getCreativesOfType("Banner");if(s.length)for(var l=0;l<s.length;l++)s[l].isVisible()&&this.hide()}t.prototype.onVisible.call(this)},i.onViewable=function(){if(this.config.settings.tracking.viewable)for(var e=0;e<this.config.settings.tracking.viewable.length;e++)E(this.win,this.config.settings.tracking.viewable[e]);t.prototype.onViewable.call(this)},i.onDestroy=function(){var e=r()(this.config.settings,"tracking.interactive");this.celtraInterval&&clearInterval(this.celtraInterval),"bto-interactive-adhesive-pickup"===this.config.execution&&e&&E(this.win,e),t.prototype.onDestroy.call(this)},i.destroy=function(){this.checkHeightOffset&&(Bi(this.win,"resize",this.checkHeightOffset),this.checkHeightOffset=null),t.prototype.destroy.call(this)},e}(Ei);const nn=rn;var on=function(t){function e(){return t.apply(this,arguments)||this}It(e,t);var i=e.prototype;return i.display=function(){var e=St(Ot().mark((function e(){var i,n,o,a,s,l,u,d,p,f,v;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.debug("Loading Native ads in its own space"),i=this.template,n=this.config.settings.native,e.next=5,this.getKeyArtCreative();case 5:o=e.sent,i.setTemplateVar("ABOVE","above"),a=r()(this.config,"source.ssp.auctionType"),s=r()(this.config,"source.kraken.auctionType"),l=null,a?l=a:"open"===s?l="open":s&&(l="pmp"),n.auctionType=l,n.video=o,o?n.video=o:this.config.format=Pt,n.platform_version=this.config.platform_version,u=this.config.format,d=(n.video||{}).tracking,p=this.config.settings.tracking,d&&Object.keys(d).forEach((function(t){(p[t]||[]).length&&(d[t]=[].concat(d[t],p[t]))})),n.template_type="Native"===u||u===Pt?"Banner":"VideoKeyArt",n.moat=this.video.config.moat,this.logger.debug("Native config: ",n),f=JSON.stringify(n);try{f=btoa(f)}catch(t){if("Error encoding the creative.",t.message.includes("Latin1")){f=(0,c.h1)(f);try{f=btoa(f)}catch(t){this.reportError("Native: Error encoding the creative. Fix attempted but failed"),Oe.reportAdMetric({type:"failure",version:"6.37.0",errCode:Ee},this.config,this.logger)}}}return v="true"===h(g(this.win),"krg_qa")?Ni.NATIVE_STAGING:Ni.NATIVE,this.config.content=(this.config.content||"")+'<script type="text/javascript" src="'+v+'"><\/script><script type="text/javascript">(function(){new window.Kargo.Native(JSON.parse(atob("'+f+'")));})();<\/script>',e.abrupt("return",t.prototype.display.call(this));case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getKeyArtCreative=function(){var t=St(Ot().mark((function t(){var e,r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.video=new this.components.Video(this.win,this.logger),e=this.video,this.config.settings.native.vast){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,e.setSource(this.resolvedSource),t.next=8,this.getVideoConfig();case 8:return r=t.sent,e.setConfig(r),t.next=12,e.parseVast(this.config.settings.native.vast);case 12:return t.next=14,e.getNativeVideoSnippet();case 14:return t.abrupt("return",t.sent);case 17:if(t.prev=17,t.t0=t.catch(4),e.submitVastForTranscoding(),t.t0.message.match(Ui)){t.next=22;break}throw t.t0;case 22:case"end":return t.stop()}}),t,this,[[4,17]])})));return function(){return t.apply(this,arguments)}}(),e}(Fi),an=on,sn=on,cn=function(t){function e(){return t.apply(this,arguments)||this}It(e,t);var i=e.prototype;return i.setHoverTemplateVars=function(){t.prototype.setHoverTemplateVars.call(this);var e=this.template,i=this.config.settings.native;"aba-adhesion-display-2"===r()(i,"creativeOptimizer.template_id")&&(e.setTemplateVar("WRAPPER_FILL","kargo-hover--wrapper-nofill"),e.setTemplateVar("HORIZONTAL_ALIGN","kargo-hover--align-right"),e.setTemplateVar("SIDEKICK_BRANDING","kargo-sidekick-branding"),e.setTemplateVar("SIDEKICK_WIDTH","140"))},i.display=function(){var e=St(Ot().mark((function e(){var r,i,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setHoverTemplateVars(),(r=this.config.settings.native).template_type="Anchor",this.logger.debug("Native config: ",r),Object.keys(r||{}).length){i=JSON.stringify(r);try{i=btoa(i)}catch(t){if("Error encoding the creative.",t.message.includes("Latin1")){i=(0,c.h1)(i);try{i=btoa(i)}catch(t){this.reportError("Native: Error encoding the creative. Fix attempted but failed"),Oe.reportAdMetric({type:"failure",version:"6.37.0",errCode:Ee},this.config,this.logger)}}}n="true"===h(g(this.win),"krg_qa")?Ni.NATIVE_STAGING:Ni.NATIVE,this.config.content=(this.config.content||"")+'<script type="text/javascript" src="'+n+'"><\/script><script type="text/javascript">(function(){new window.Kargo.Native(JSON.parse(atob("'+i+'")));})();<\/script>'}return e.abrupt("return",t.prototype.display.call(this));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(nn),ln=new S("Video"),un=function(t){function e(){return t.apply(this,arguments)||this}It(e,t);var r=e.prototype;return r.display=function(){var e=St(Ot().mark((function e(){var r,i,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.template,e.prev=1,e.next=4,this.getVideoCreative();case 4:if(i=this.video,this.isVpaid="VideoPlayer"===i.creativeType,"VastMiddleBanner"!==this.config.format&&"OutstreamVideo"!==this.config.format||(r.setTemplateVar("VAST","vast"),r.setTemplateVar("FADE","unfaded"),this.config.settings.enable_entry_animation&&r.setTemplateVar("BOLT","kargo")),this.isVpaid&&r.setTemplateVar("SHOW","fade"),!0===this.config.settings.has_responsive_width&&r.setTemplateVar("WIDTH","kargo-banner-width"),n="Video Creative - ",this.logger.debug(""+n+i.creativeType),this.logger.debug(n+"Snippet Config",i.config),this.logger.debug(n+"Vast Config",i.vast?i.vast.parsedVastResult:null),t.prototype.display.call(this),!this.isVpaid){e.next=19;break}return e.next=17,i.loadVideoPlayer();case 17:e.sent?this.setLoaderSize(i.getDimensions()):this.handleVideoDestroy(ji);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),this.handleVideoDestroy(e.t0);case 24:case"end":return e.stop()}}),e,this,[[1,21]])})));return function(){return e.apply(this,arguments)}}(),r.getRenderConfig=function(){var e=this.config.format,r=t.prototype.getRenderConfig.call(this);return["VastMiddleBanner","OutstreamVideo","NonVastOutstreamVideo"].includes(e)&&et(this.win)&&(r.maxDimension.width=300),r},r.setLoaderSize=function(t){var e=this.rootElement.querySelector(".kargo-loader"),r=t.width/t.height;e.style.width="300px",e.style.height=1===r?"300px":300/r+"px"},r.onSizeChange=function(e,r){this.shouldHideLoader()&&this.hideLoader(),t.prototype.onSizeChange.call(this,e,r)},r.onVisible=function(){if("VastMiddleBanner"===this.config.format||"OutstreamVideo"===this.config.format){var e=this.rootElement.querySelector(".kargo-overlay"),r=this.rootElement.querySelector(".kargo-ad-content");wt(this.rootElement.querySelector(".kargo-banner-optout"),"hide"),pt(r,"fade"),pt(e,"fade")}t.prototype.onVisible.call(this)},r.shouldHideLoader=function(){return-1!==["NonVastOutstreamVideo","OutstreamVideo"].indexOf(this.config.format)},r.hideLoader=function(){this.rootElement.querySelector(".kargo-loader").style.visibility="hidden"},r.getVideoCreative=function(){var t=St(Ot().mark((function t(){var e,r,i,n,o,a,s;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.video=new this.components.Video(this.win,this.logger),e=this.video,r=!0,t.prev=3,e.setSource(this.resolvedSource),t.next=7,this.getVideoConfig();case 7:if(i=t.sent,e.setConfig(i),!(n=this.config.settings.vast_url||this.config.settings.vast_xml)){t.next=15;break}return t.next=13,e.parseVast(n);case 13:t.next=21;break;case 15:if(!this.config.content){t.next=20;break}e.html=this.config.content,r=!1,t.next=21;break;case 20:throw ln.errNotSet("VAST or ViewStream snippet");case 21:return t.next=23,e.getViewStreamSnippet();case 23:o=t.sent,r&&(this.config.content=o+(this.config.content||"")),this.platformMacros=e.getPlatformMacros(),e.vast&&(a=e.vast.getMediaFiles()[0],s=a.width&&a.height?a.width/a.height:null,this.vastDimensions={width:(a||{}).width,height:(a||{}).height},null===s||s>=1?(this.logger.debug("Get a horizontal video, set width to 100%. Video ratio: "+s),this.config.settings.has_responsive_width=!0):(this.logger.debug("Get a vertical video, set width to 300px. Video ratio: "+s),this.config.settings.has_responsive_width=!1)),t.next=38;break;case 29:if(t.prev=29,t.t0=t.catch(3),e.submitVastForTranscoding(),!t.t0.message.match(Ui)){t.next=37;break}this.logger.debug("Attempting to play MP4 from VAST"),e.creativeType="VideoPlayer",t.next=38;break;case 37:throw t.t0;case 38:case"end":return t.stop()}}),t,this,[[3,29]])})));return function(){return t.apply(this,arguments)}}(),r.handleVideoDestroy=function(t){this.logger.error(t),this.video&&this.video.fireErrorTrackers(400),this.reportError(t),this.destroy()},e}(Fi),hn=function(t){function e(){return t.apply(this,arguments)||this}return It(e,t),e}(un),gn=function(t){function e(){return t.apply(this,arguments)||this}return It(e,t),e.prototype.display=function(){var e=St(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.template.setTemplateVar("SIDEKICK_BRANDING","kargo-sidekick-branding kargo-breakaway-branding"),t.prototype.display.call(this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(nn),dn=function(t){function e(){return t.apply(this,arguments)||this}return It(e,t),e.prototype.display=function(){var e=St(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.template.setTemplateVar("FORMAT","kargo-hover--breakout"),t.prototype.display.call(this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(nn),pn=function(t){function e(){return t.apply(this,arguments)||this}return It(e,t),e.prototype.display=function(){var e=St(Ot().mark((function e(){var r,i,n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.template).setTemplateVar("WIDTH","desktop"),i=jt.filter((function(t){return t.name===n.config.format}))[0],r.setTemplateVar("DESKTOP_WIDTH",i.size.w.toString()),t.prototype.display.call(this);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(Fi),fn=pn,vn=pn,mn=pn,kn=pn,bn=pn,yn=Fi,wn=Fi,_n=function(t){function e(){return t.apply(this,arguments)||this}It(e,t);var r=e.prototype;return r.display=function(){var e=St(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logger.debug("OutstreamVideo loaded in its own space"),t.prototype.display.call(this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.validateConfig=function(e){var r=e||{};return r.settings=r.settings||{},"open"===((r.source||{}).ssp||{}).auctionType&&"OutstreamVideo"===r.format&&(r.settings.branding="advertisement"),t.prototype.validateConfig.call(this,e)},r.onLoad=function(){var e=this;if(this.container&&null!==this.container.getType()){var r=zt[this.config.format].size;this.vastDimensions&&this.vastDimensions.width&&this.vastDimensions.height&&(r.h=this.vastDimensions.height*r.w/this.vastDimensions.width);var i=this.container.getType();this.logger.debug("Setting Container Size: "+r.w+"x"+r.h),this.container.setContainerSize(r.w,r.h).catch((function(t){var r="Failed to set "+i+" Container Size";t&&(r+=": "+t),e.logger.debug(r)}))}t.prototype.onLoad.call(this)},e}(un),Cn=function(t){function e(){return t.apply(this,arguments)||this}return It(e,t),e.prototype.display=function(){var e=St(Ot().mark((function e(){var r,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.template).setTemplateVar("SIDEKICK_BRANDING","kargo-sidekick-branding"),i=a(this.win)?"100":"140",r.setTemplateVar("SIDEKICK_WIDTH",i),t.prototype.display.call(this);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(nn),xn=__webpack_require__(9153),An=new S("Hover"),Sn=function(t){function e(e,r){return t.call(this,e,r)||this}It(e,t);var r=e.prototype;return r.display=function(){var e=St(Ot().mark((function e(){var r,i,n,o,a=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.debug("Video Anchor loaded in its own space"),this.template&&(this.template.html=xn,this.template.css=Gi),r=this.template,"80",r.setTemplateVar("SIDEKICK_WIDTH","80"),r.setTemplateVar("FORMAT","kargo-hover--videoanchor"),r.setTemplateVar("HORIZONTAL_ALIGN","kargo-hover--align-left"),i=function(t){a.video&&a.video.fireErrorTrackers(400),a.reportError(t),a.destroy()},rt(this.win)){e.next=12;break}i(An.errNoSupport("Autoplay")),e.next=28;break;case 12:return e.prev=12,e.next=15,this.getVideoCreative();case 15:n=this.video,o="Video Creative - ",this.logger.debug(""+o+n.creativeType),this.logger.debug(o+"Snippet Config",n.config),this.logger.debug(o+"Vast Config",n.vast?n.vast.parsedVastResult:null),this.logger.debug(o+"Anchor Config",n.anchorConfig),t.prototype.display.call(this),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(12),this.logger.error(e.t0),i(e.t0);case 28:case"end":return e.stop()}}),e,this,[[12,24]])})));return function(){return e.apply(this,arguments)}}(),r.closeVideoAnchor=function(){var t=new Event("kargo-hover-close");if(this.win.dispatchEvent(t),(this.config.settings.tracking||{}).dismiss)for(var e=0;e<this.config.settings.tracking.dismiss.length;e++)E(this.win,this.config.settings.tracking.dismiss[e]);this.onClose(),this.destroy()},r.onLoad=function(){var e=this.rootElement.querySelector(Si).contentWindow,r=(0,c.GK)(e,"Kargo.PlatformMacros");r&&(r.destroy=this.closeVideoAnchor.bind(this));var i=e.document.body;i&&(i.style.position="static",i.style.bottom=0),t.prototype.onLoad.call(this)},r.onSizeChange=function(e,r){var i;if(r>200){i=this.rootElement.querySelectorAll(".kargo-hover-link");for(var n=0;n<i.length;n+=1)pt(i[n],"hide")}t.prototype.onSizeChange.call(this,e,r)},e}(nn),Dn="kargo-hover--branding-none",In="kargo-hover-close-progress",En="kargo-wrapper",On=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).hideBranding=!0,i.isBreakout=!1,i.registerEventListener(),i}It(e,t);var r=e.prototype;return r.registerEventListener=function(){var t=this;this.win.addEventListener("message",(function(e){t.logger.debug("Received message: ",e.data);var r=t.rootElement.querySelector(".kargo-ad-hover");"kargo-wrapper-breakout-complete"===e.data?(t.isBreakout&&(r.style.display="none",setTimeout((function(){r.style.display="block"}),100)),t.showBranding(),t.showCloseButton()):"kargo-wrapper-breakout-begin"===e.data&&(t.isBreakout=!0,t.hideCloseButton())}))},r.showBranding=function(){var t=this.rootElement.querySelector("."+Dn);t&&"none"!==this.config.settings.branding&&(this.logger.debug("showing branding"),wt(t,Dn),"kargo"!==this.config.settings.branding&&pt(t,"kargo-hover--branding-"+this.config.settings.branding))},r.showCloseButton=function(){Array.from(this.rootElement.querySelectorAll(".kargo-hover-close")).some((function(t){return!!dt(t,En)&&(wt(t,En),wt(t,In),!0)}))},r.hideCloseButton=function(){Array.from(this.rootElement.querySelectorAll(".kargo-hover-close")).some((function(t){var e=t.getBoundingClientRect();return!(!e.height||!e.width)&&(pt(t,En),pt(t,In),!0)}))},r.onLoad=function(){if(t.prototype.onLoad.call(this),this.hideBranding){this.logger.debug("hiding the wrapper branding");var e=this.rootElement.querySelector(".kargo-ad-hover");if(e){pt(e,Dn);var r=this.config.settings.branding;"kargo"!==r&&"none"!==r&&wt(e,"kargo-hover--branding-"+this.config.settings.branding)}}this.hideCloseButton()},r.display=function(){var e=St(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"breakout"===this.config.execution&&(this.config.content=this.config.content.replace(/\/wrapper.min.js/g,"/wrapper-breakout.min.js"),this.logger.warn("Redirecting breakout execution to use breakout template")),e.abrupt("return",t.prototype.display.call(this));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(nn),Vn=__webpack_require__(2685),Rn=__webpack_require__(2791),Tn=function(t){function e(){return t.apply(this,arguments)||this}return It(e,t),e.prototype.display=function(){var e=St(Ot().mark((function e(){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.template&&(this.template.html=Vn,this.template.css=Rn),t.prototype.display.call(this),r=this.rootElement.querySelector(".kargo-ad-content"),"v3"===this.config.execution&&pt(r,"new-template");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(nn),Ln=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).closeBtn=null,i}It(e,t);var r=e.prototype;return r.onCreate=function(){var e=this;return this.config.settings.isGwdAnchor&&this.win.addEventListener("message",(function(t){"gwdAnchorCollapse"===t.data&&(e.getIframe().height=50)})),this.closeBtn=this.win.document.querySelector(".kargo-hover-close.unfilled"),t.prototype.onCreate.call(this)},r.hideCloseBtn=function(){this.closeBtn&&(this.closeBtn.style.display="none")},r.showCloseBtn=function(){this.closeBtn&&(this.closeBtn.style.display="block")},e}(nn),Pn=function(t){function e(){return t.apply(this,arguments)||this}It(e,t);var r=e.prototype;return r.validateConfig=function(e){var r=t.prototype.validateConfig.call(this,e);return et(this.win)&&(r.settings.has_responsive_width=!0),r},r.getRenderConfig=function(){var e=t.prototype.getRenderConfig.call(this);return et(this.win)&&(e.width=500,e.height=281),e},r.destroy=function(){if(this.socialCanvasCreatives){var t=this.socialCanvasCreatives;if(t.companion&&t.companion.renderDiv){var e=t.companion.renderDiv,r=this.win.document.querySelector("#"+e).querySelector(".kargo-companion-creative");r&&(this.logger.debug("Destroying Companion"),_t(r))}if(t.socanCeltraBack&&t.socanCeltraBack.renderDiv){var i=t.socanCeltraBack.renderDiv,n=this.win.document.querySelector("#"+i).querySelector(".kargo-socanCeltraBack-creative");n&&(this.logger.debug("Destroying social canvas celtra back creative wrapper"),_t(n))}if(t.socanCeltraFront&&t.socanCeltraFront.renderDiv){var o=t.socanCeltraFront.renderDiv,a=this.win.document.querySelector("#"+o).querySelector(".kargo-socanCeltraFront-creative");a&&(this.logger.debug("Destroying social canvas celtra front creative wrapper"),_t(a))}}},e}(Fi),Mn=function(){function t(t,e,r){this.win=t,this.logger=e,this.source=r}var e=t.prototype;return e.generateCachebuster=function(){return(Date.now()*Math.random()).toString().replace(".","")},e.getPublisherId=function(){var t=null,e=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");e&&e()&&(t=e().getPublisherId());return t},e.getCreativeInfo=function(){var t=null,e=null,r=null,i=null;return this.source&&(this.source.hephaestus?(t=this.source.hephaestus.creative,e=this.source.hephaestus.advertiser,r=this.source.hephaestus.campaign,i=this.source.hephaestus.placement):this.source.dfp?(t=this.source.dfp.creative,e=this.source.dfp.advertiser,r=this.source.dfp.campaign,i=this.source.dfp.placement):this.source.ssp?(t=this.source.ssp.rtbCreativeId,e=this.source.ssp.advertiserDomain,i=r=this.source.ssp.dealId):this.source.kraken&&(t=this.source.kraken.creative,e=this.source.kraken.advertiserDomain,r=this.source.kraken.campaign,i=this.source.kraken.placement)),{creativeId:t,advertiserId:e,insertionId:r,placementId:i}},e.getTrackingTag=function(t){var e=this.getCreativeInfo(),r=ue.getDimensionsByFormat(t.format);return'<script src="https://aam.a47b.com/aam?asid=f458700a&af='+r.w+"x"+r.h+"&ad="+e.creativeId+"&adv="+e.advertiserId+"&io="+e.insertionId+"&ptnr="+this.getPublisherId()+"&pl="+e.placementId+"&ra="+this.generateCachebuster()+"&nid="+t.slot+"&st="+this.win.location.hostname+"&df="+Q(this.win)+"&dt="+Z(this.win)+"&li="+t.format+"&cre="+t.execution+'&pelc=kargo-ad-content"><\/script>'},t}();var Fn=["GoogleActiveViewClass","GoogleActiveViewElement"],Nn=/<script>var url = '([\s\S]*?)';[\s\S]*?<\/script>/i,Un=/id="(DfaVisibilityIdentifier_[\s\S]*?)"/i,jn=/https?:\/\/(?:www\.)?googleads.g.doubleclick.net\/dbm\/ad\?dbm.*?/i,zn=new S("ActiveView"),Kn=function(){function t(t,e){this.win=t,this.logger=e,this.activeViewClass="",this.activeViewVisibilityIdentifier=""}var e=t.prototype;return e.isActiveViewWrapped=function(t){for(var e=0;e<Fn.length;e+=1){if(t.indexOf(Fn[e])>0)return this.activeViewClass=Fn[e],!0}return!1},e.moveUp=function(t,e){var r=e.match(Nn);if(!r)throw zn.errCant("find Active View script tag");if(!r[1].match(jn))throw zn.errInvalid("Active View script URL");var i=document.createElement("script");i.src=r[1],t.className+=" "+this.activeViewClass;var n=e.match(Un);if(!n)throw zn.errCant("find Active View visibility identifier");this.activeViewVisibilityIdentifier=n[1],t.setAttribute("id",this.activeViewVisibilityIdentifier),ft(i,"append",t)},e.remove=function(t){var e;try{e=t.replace(' class="'+this.activeViewClass+'"',""),this.activeViewVisibilityIdentifier&&(e=e.replace(' id="'+this.activeViewVisibilityIdentifier+'"',"")),e=e.replace(Nn,"")}catch(t){throw zn.errCant("remove Active View elements from creative: "+t)}return e},t}(),qn=function(){function t(t,e,r){void 0===r&&(r={}),this.win=t,this.logger=e,this.config=r}var e=t.prototype;return e.getFields=function(){var t={c1:8,c2:"13026509",c3:1,ns_ap_it:"b"};t.rn=Date.now();var e=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");if(e){var r=e();r&&r.getPropertyId()&&(t.c4=r.getPropertyId())}return X(this.win)?t.c6="mobile":Y(this.win)&&(t.c6="tablet"),this.config.source&&(this.config.source.dfp?(t.c4=this.config.source.dfp.lineItem,t.c8=this.config.source.dfp.creative):this.config.source.ssp?t.c4=this.config.source.ssp.dealId:this.config.source.kraken&&(t.c4=this.config.source.kraken.lineItem||this.config.source.kraken.dealId,t.c8=this.config.source.kraken.creative)),t},e.getImpressionTrackerHtml=function(){var t=this.getFields();return this.logger.debug("ComScore Impression Analytics loaded with data:",t),'<img style="display: none" src="'+l("https://sb.scorecardresearch.com/p",t)+'"/>'},t}();var Bn=function(){function t(t,e,r,i){this.win=t,this.logger=e,this.iframeConfig=r,this.socialCanvasCreatives=i,this.writeComplete=!1,this.locationElement=null,this.iframe=null,this.creativeId=null,this.currentSize={width:0,height:0},this.callbacks={sizeChange:[],contentLoad:[],error:[]},this.AMP_INTERVAL=100}var e=t.prototype;return e.setLocationElement=function(t){this.locationElement=t},e.setCreativeId=function(t){this.creativeId=t},e.onSizeChange=function(t){this.callbacks.sizeChange.indexOf(t)<0&&this.callbacks.sizeChange.push(t)},e.onContentLoad=function(t){this.callbacks.contentLoad.indexOf(t)<0&&this.callbacks.contentLoad.push(t)},e.onError=function(t){this.callbacks.error.indexOf(t)<0&&this.callbacks.error.push(t)},e.checkCreativeSize=function(){var t=this;if(this.iframe&&this.iframe.contentDocument){var e=this.iframe.contentDocument.body,r=Math.max(e.scrollWidth,e.offsetWidth,e.clientWidth),i=Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight);r=Math.min(r,this.win.innerWidth),this.iframeConfig.fullHeight||(i=Math.min(i,this.win.innerHeight));var n=e.querySelector(".celtra-ad-v3");if(n){var o=n.offsetHeight,a=n.offsetWidth;i=Math.min(i,o),r=Math.min(r,a)}for(var s,c=e.querySelectorAll("iframe"),l=0;l<c.length;l+=1){try{var u=null;c[l].contentWindow&&c[l].contentWindow.document&&(u=c[l].contentWindow.document),u&&(s=u.querySelector(".kargo-frame, .kargo-view"))}catch(t){}if(s)break}s&&s.offsetHeight>0&&(i=Math.min(i,s.offsetHeight),r=Math.min(r,s.offsetWidth)),this.iframeConfig.maxDimension&&(this.iframeConfig.maxDimension.height&&(i=Math.min(i,this.iframeConfig.maxDimension.height)),this.iframeConfig.maxDimension.width&&(r=Math.min(r,this.iframeConfig.maxDimension.width))),this.iframeConfig.minDimension&&(this.iframeConfig.minDimension.height&&(i=Math.max(i,this.iframeConfig.minDimension.height)),this.iframeConfig.minDimension.width&&(r=Math.max(r,this.iframeConfig.minDimension.width))),i+=parseInt(e.style.paddingTop||"0",10)+parseInt(e.style.paddingBottom||"0",10),(r+=parseInt(e.style.paddingLeft||"0",10)+parseInt(e.style.paddingRight||"0",10))===this.currentSize.width&&i===this.currentSize.height||(this.iframe.width=r.toString(),this.iframe.height=i.toString(),this.currentSize.width=r,this.currentSize.height=i,this.callbacks.sizeChange.forEach((function(e){e(t.currentSize.width,t.currentSize.height)})))}},e.monitor=function(){var t=this;this.iframeConfig.expansionCheck&&function e(){t.checkCreativeSize();var r=t.win.requestAnimationFrame(e);(function(e){for(var r=e.parentNode;r;){if(r===t.win.document.body)return!0;r=r.parentNode}return!1})(t.iframe)||t.win.cancelAnimationFrame(r)}()},e.createIframe=function(t,e){var r=this.win.document.createElement("iframe");return r.style.display=this.iframeConfig.hide?"none":"block",r.className=t,r.height=e.height,r.width=e.width,r.style.margin="0px auto",r.style.textAlign="center",r.style.border="none",r},e.writeCompanion=function(t){var e=t.creative,r=t.dimensions,i=t.renderDiv;this.logger.debug("Writing Companion in iframe appended to "+i+" element");var n=this.createIframe("kargo-companion-creative",r),o=this.win.document.querySelector("#"+i);if(o){o.appendChild(n);var a="margin: 0px; padding: 0px; overflow: hidden; height: "+r.height+"px; width: "+r.width+"px";n.contentWindow.document.write('<html><head><script type="text/javascript">window.inDapIF = true;<\/script></head><body style="'+a+'">'+e+"</body></html>")}},e.writeWrapperforSocialCanvas=function(t,e){var r=t.creative,i=t.dimensions,n=t.renderDiv;this.logger.debug("Writing SoCan Wrapper Celtra creative in iframe appended to "+n+" element");var o=this.createIframe(e,i),a=this.win.document.querySelector("#"+n);if(a){a.appendChild(o);var s="margin: 0px; padding: 0px; overflow: hidden; height: "+i.height+"px; width: "+i.width+"px;position: absolute !important; z-index: -1 !important; ";o.contentWindow.document.write('<html><head><script type="text/javascript">window.inDapIF = true;<\/script></head><body style="'+s+'">'+r+"</body></html>")}},e.reportHeavyAd=function(t){this.logger.report(ge,"Ad blocked by browser: "+t,{creative:this.creativeId||void 0})},e.fireBlockedTracker=function(){var t=this;if(this.iframeConfig&&this.iframeConfig.tracking&&this.iframeConfig.tracking.blocked){var e=this.iframeConfig.tracking.blocked;Array.isArray(e)&&e.length&&e.forEach((function(e){return E(t.win,e)}))}},e.writeSocialCanvas=function(){if(this.socialCanvasCreatives){var t=this.socialCanvasCreatives;t.companion&&t.companion.renderDiv&&t.companion.creative&&this.writeCompanion(t.companion),t.socanCeltraBack&&t.socanCeltraBack.renderDiv&&t.socanCeltraBack.creative&&this.writeWrapperforSocialCanvas(t.socanCeltraBack,"kargo-socan-back"),t.socanCeltraFront&&t.socanCeltraFront.renderDiv&&t.socanCeltraFront.creative&&this.writeWrapperforSocialCanvas(t.socanCeltraFront,"kargo-socan-front")}},e.write=function(t){var e=this;if(this.logger.debug("Writing Ad Content in iframe"),this.iframe=this.createIframe("kargo-creative",this.iframeConfig),this.locationElement.appendChild(this.iframe),this.writeSocialCanvas(),!this.iframe.contentWindow){var r=new v("Ad Container removed before Ad could display");return Oe.reportAdMetric({type:"failure",version:"6.37.0",errCode:"ad-contr-rmvd"},this.iframeConfig,this.logger),void this.callbacks.error.forEach((function(t){return t(r)}))}this.iframe.addEventListener("load",(function t(){e.logger.debug("Ad Content Initial Load Complete"),e.iframe.removeEventListener("load",t),e.callbacks.contentLoad.forEach((function(t){return t()}))}));var i=this.iframe.contentWindow;if(a(this.win)||(n(window).onmessage=function(t){try{var r=JSON.parse(t.data);"HeavyAdIntervention"===r.id&&(e.reportHeavyAd(r.message),e.fireBlockedTracker())}catch(t){}}),(this.iframeConfig.macros||this.iframeConfig.creativeApiMacros)&&(i.Kargo={},this.iframeConfig.macros&&(i.Kargo.PlatformMacros=this.iframeConfig.macros),this.iframeConfig.creativeApiMacros)){i.Kargo.CreativeApi={};var o=this.iframeConfig.creativeApiMacros.macroConfig;if(o){var s=new oe(this.win,this.logger,o.slotId),c={impressionId:o.impressionId,creativeId:o.creativeId,adFormat:o.adFormat};i.Kargo.CreativeApi.parseCreativeHTML=function(t){return s.replaceAllMacros(t,c)}}var l=this.iframeConfig.creativeApiMacros.apiMethods;l&&Object.assign(i.Kargo.CreativeApi,l)}t.indexOf("dcmads")>0&&(this.iframeConfig.customCss+="text-align: center");var u=i.document,h="margin: 0px; padding: 0px; overflow: hidden;";this.iframeConfig.maxDimension&&(this.iframeConfig.maxDimension.height&&(h+="max-height: "+this.iframeConfig.maxDimension.height+"px;"),this.iframeConfig.maxDimension.width&&(h+="max-width: "+this.iframeConfig.maxDimension.width+"px;")),this.iframeConfig.customCss&&(h+=this.iframeConfig.customCss),u.write('<html><head><script type="text/javascript">window.inDapIF = true;<\/script></head><body style="'+h+'">'+t+"</body></html>"),u.close(),this.monitor()},t}();function Hn(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Gn=function(){function t(t,e){this.win=t,this.kargoAdContent=e,this.countDown=20,this.callbacks={onCollapse:[],onExpand:[]},this.expandedToElement=null,this.logger=new st(t,"CeltraExpandStateManager",4),this.interval=this.startMonitoringInterval(),this.globalState=this.setUpGlobalState(),this.clickMonitor=this.setUpClickMonitor()}var e=t.prototype;return e.log=function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];(t=this.logger).debug.apply(t,["#"+this.interval].concat(r))},e.onExpand=function(t){this.callbacks.onExpand.indexOf(t)<0&&this.callbacks.onExpand.push(t)},e.onCollapse=function(t){this.callbacks.onCollapse.indexOf(t)<0&&this.callbacks.onCollapse.push(t)},e.setUpClickMonitor=function(){var t=this,e=new yi(this.win,this.logger,this.kargoAdContent,{once:!1});return e.onClick((function(){t.elementClicked()})),e.attachListener(),e},e.setUpGlobalState=function(){return this.win.__krg_global_celtra_state=this.win.__krg_global_celtra_state||{clickedElement:null,expandedElement:null},this.log("Set up global state"),this.win.__krg_global_celtra_state},e.setState=function(t){var e=this;Object.keys(t).forEach((function(r){r in e.globalState&&(e.globalState[r]=t[r])}))},e.elementClicked=function(){this.setState({clickedElement:this.kargoAdContent}),this.countDown=20},e.timeOut=function(){this.countDown=20,this.setState({clickedElement:null})},e.fireCallbacks=function(t){this.log("Firing callbacks for event: "+t);var e=null;"onExpand"===t&&(e=this.expandedToElement),"onCollapse"===t&&(e=this.kargoAdContent),this.callbacks[t].forEach((function(t){return t(e)}))},e.checkStateChange=function(){var t=this,e=(Array.from(this.win.document.querySelectorAll(".celtra-expanded-ad"))||[]).filter((function(e){return bt(e,t.win)}))[0]||null;if(this.globalState.clickedElement&&this.globalState.clickedElement===this.kargoAdContent){if(!this.countDown)return void this.timeOut();this.countDown-=1,e!==this.globalState.expandedElement&&(e?(this.log("Expand from:",this.kargoAdContent,"to:",e),this.expandedToElement=e,this.fireCallbacks("onExpand")):(this.log("Unexpected behavior, likely user closed expanded window too quickly"),this.setState({clickedElement:null})),this.setState({expandedElement:e}))}this.globalState.expandedElement&&e!==this.globalState.expandedElement&&this.globalState.expandedElement===this.expandedToElement&&(this.log("Collapse from:",this.globalState.expandedElement,"to:",this.kargoAdContent),this.setState({expandedElement:null}),this.fireCallbacks("onCollapse"))},e.startMonitoringInterval=function(){var t=this;return this.interval&&this.win.clearInterval(this.interval),this.win.setInterval((function(){return t.checkStateChange()}),100)},t}(),Wn=new S("moat"),Jn=function(){function t(t,e){this.moatObject=null,this.moatTrackableEl=null,this.celtraExpandStateManager=null,this.newCreativeApiEnabled=!0,this.trackingInterval=0,this.isTrackingSetup=!1,this.win=t,this.logger=e,this.creative=null,"false"!==h(g(this.win),"krg_moat_new_creative_api")&&!1!==this.win.__krg_moat_new_creative_api||(this.newCreativeApiEnabled=!1,this.logger.debug("Moat: new Creative API is disabled"))}var e,i,n,o=t.prototype;return o.setCreative=function(t){this.creative=t},o.isTrackingViewability=function(){var t=!0,e=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");if(e){var r=e();r&&r.isMoatViewabilityEnabled&&(t=r.isMoatViewabilityEnabled())}if(this.creative){var i=this.creative.getConfig();"Passback"===(i.source||{}).type&&(t=!1),te.indexOf(i.format)>-1&&"NativeVideoKeyArt"!==i.format&&i.format!==Mt&&(t=!1)}return t},o.getCommonData=function(){var t={},e=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");if(e&&e()){var r=e();t.zMoatST=r.getPropertyId(),t.zMoatPUB=r.getPublisherId()}if(this.creative){var i,n,o=this.creative.getConfig(),a=(0,c.GK)(this.win,"Kargo.Config.getSlotConfig");if(a){var s=a(o.slot).getPlatform();t.zMoatPF=s}if(o.source){if(o.source.hephaestus)t.zMoatNTW="Direct";else if(o.source.dfp)t.zMoatNTW="DFP";else if(o.source.ssp){t.zMoatNTW="SSPOpen"===o.source.type?"OPEN":"KSSP";var l=o.source.ssp;t.zMoatAID=l.advertiserDomain,t.zMoatDID=l.dealId,t.zMoatDN=l.dealName,t.zMoatDSP=l.dspId}else if(o.source.kraken){var u=o.source.kraken;switch(u.auctionType){case"open":t.zMoatNTW="OPEN";break;case"direct":t.zMoatNTW="DFP";break;default:t.zMoatNTW="KSSP"}t.zMoatAID=u.advertiserDomain,t.zMoatDID=u.dealId,t.zMoatDN=u.dealName;var h=u.creative.split("_");t.zMoatDSP=h[0]||""}o.source.kargo&&(t.zMoatIC=o.source.kargo.creativeId,t.zMoatIC2=o.source.kargo.vendorId)}if(null!=(i=o.settings)&&null!=(n=i.tracking)&&n.view){var g=o.settings.tracking.view[0].match(/(?:\?|&)ctx=(.*?)(?:&|$)/);if(g&&g[1]){var d=g[1];t.zMoatTK=d}}o.id&&(t.zMoatIMP=o.id),o.slot&&(t.zMoatPS=o.slot),o.format&&(t.zMoatFRM=o.format),o.execution&&(t.zMoatEXE=o.execution)}return t},o.getViewabilityHelper=function(t,e){e.moatClientLevel1=t.advertiser,e.moatClientLevel2=t.campaign,e.moatClientLevel3=t.lineItem,e.moatClientLevel4=t.creative,e.moatClientSlicer1=t.site,e.moatClientSlicer2=t.placement},o.getViewabilityData=function(){var t={};if(this.creative){var e=this.creative.getConfig();if(e.source){var r=e.source,i=r.hephaestus,n=r.dfp,o=r.ssp,a=r.kraken;if(i){this.getViewabilityHelper(i,t);var s=ue.getDimensionsByFormat(e.format);t.zMoatSZ=s.w+"x"+s.h}else a?(this.getViewabilityHelper(a,t),t.zMoatSZ=a.size):o?(t.moatClientLevel4=o.rtbCreativeId,t.zMoatSZ=o.size):n&&(this.getViewabilityHelper(n,t),t.zMoatSZ=e.source.dfp.size)}}var l=(0,c.TS)({},this.getCommonData(),t);return Object.keys(l).forEach((function(t){null==l[t]&&(l[t]="")})),l},o.getVideoData=function(){var t={};if(this.creative){var e=this.creative.getConfig();if(e.source){var r=e.source,i=r.dfp,n=r.ssp;i?(t.level1=i.advertiser,t.level2=i.campaign,t.level3=i.lineItem,t.level4=i.creative):n&&(t.level1=n.dspId,t.level2=n.dealId,t.level3=n.advertiserDomain,t.level4=n.rtbCreativeId)}}var o=(0,c.TS)({},this.getCommonData(),t);return o.slicer1=o.zMoatST,Object.keys(o).forEach((function(t){null==o[t]&&(o[t]="")})),o},o.getTrackingTag=function(){var t=this.getViewabilityData();this.logger.debug("Moat Viewability Analytics loading with data:",t);var e="https://z.moatads.com/kargodfpnew803390365855/moatad.js";e=(e=l(e,t)).replace("?","#");var r="";return this.newCreativeApiEnabled&&(r+='<div class="moat_trackable"></div>'),r+='<script type="text/javascript" src="'+e+'"><\/script>'},o.getAdIFrameAndSetTrackingElement=function(){if(!this.rootElement)return null;var t=this.rootElement.querySelector(".kargo-creative");if(t&&t.contentDocument)return this.moatTrackableEl=t.contentDocument.querySelector(".moat_trackable"),t;var e=Wn.errGet("moat_trackable element");return this.logger.error(e),null},o.getKargoViewElement=function(t){try{for(var e=t.contentDocument.querySelectorAll("iframe")||[],r=0;r<e.length;r+=1)if(e[r].contentDocument){var i=e[r].contentDocument.querySelector(".kargo-view");if(i)return i}return null}catch(t){return null}},o.getAdElement=function(t){var e;if(this.rootElement){var i=this.rootElement.querySelector(".kargo-creative"),n=this.rootElement.querySelector(".celtra-ad-v3");(e=this.rootElement.querySelector(".celtra-ad-inline-host")||this.rootElement.querySelector(".celtra-ad-host")||i)&&"none"!==e.style.display||(e=t.nextSibling);var o=r()(this.creative,"config.format")||"";if(e===i){var a=this.getKargoViewElement(e);if(a)this.logger.debug("Moat: Found .kargo-view"),e=a;else if(n||0===o.indexOf("ABA"))this.logger.debug("Moat: Waiting for .kargo-view for ABA *"),e=null;else if(this.logger.debug("Moat: No .kargo-view element found, fallback to body of ad iframe"),e=r()(e,"contentDocument.body"),this.creative)try{if(this.creative.config.content.includes("data-moat-element")){var s=this.creative.config.content.match(/data-moat-element="(.*?)"/)[1];s?(e=r()(i,s))&&this.logger.debug("Moat element path override applied, adElement: ",e):this.logger.warn("Moat element path override is not set correctly")}}catch(t){this.logger.error(Wn.errCant("Apply moat element path"))}}return e}return null},o.setUpTracking=function(t){var e="";if(this.creative){var r=this.creative.getConfig().source||{},i=r.kraken,n=r.kargo,o=r.ssp,a=r.dfp,s=r.hephaestus;e=(null==s?void 0:s.creative)||(null==i?void 0:i.creative)||(null==o?void 0:o.rtbCreativeId)||(null==a?void 0:a.creative)||(null==n?void 0:n.creativeId)}if(!this.moatTrackableEl||!this.rootElement||!this.creative)return this.logger.error(Wn.errNotSet("Critical elements")),void this.logger.report(ge,"Moat: critical elements is not set",{creative:e,version:"6.37.0"});if(!this.isTrackingSetup){this.isTrackingSetup=!0;var c=ee.includes(this.creative.getConfig().format);this.moatObject={adElement:t,adProxyElement:null,adLoaded:new Event("adLoaded"),creativeType:c?"banner":"expandable",version:1},this.moatTrackableEl.moatObject=this.moatObject,"expandable"===this.moatObject.creativeType?(this.logger.debug("Expandable creative detected, using CeltraExpandStateManager"),this.setUpExpandStateManager()):this.logger.debug("Non-expandable creative detected"),this.moatTrackableEl.dispatchEvent(this.moatObject.adLoaded),this.reportMoatSize(),this.logger.debug("Moat: Tracking is set up")}},o.setUpExpandStateManager=function(){var t=this;if(this.rootElement){var e=this.rootElement.querySelector(".kargo-ad-content");this.celtraExpandStateManager=new Gn(this.win,e),this.celtraExpandStateManager.onExpand((function(e){t.onProxyElementChange(e)})),this.celtraExpandStateManager.onCollapse((function(e){t.onProxyElementChange(e)}))}},o.onProxyElementChange=function(t){this.moatObject&&this.moatTrackableEl&&(this.moatObject.adElement=t,this.moatTrackableEl.dispatchEvent(this.moatObject.adLoaded),this.reportMoatSize())},o.onDisplay=function(){if(this.newCreativeApiEnabled){this.logger.debug("Moat: New Creative API enabled, setting up tracking");try{var t=this.getAdIFrameAndSetTrackingElement(),e=". Moat tracking may be affected";if(t){var r=this.getAdElement(t);r?this.setUpTracking(r):(this.logger.warn(Wn.errGet("adElement").message+e),this.waitForKargoViewElement(t))}else this.logger.warn(Wn.errGet("adIframe").message+e)}catch(t){this.logger.error(t)}}else this.logger.debug("Moat: New Creative API not enabled")},o.waitForKargoViewElement=function(t){var e=this,r=100;this.trackingInterval=this.trackingInterval||setInterval((function(){e.logger.debug("Ad Element check interval, count down = "+r);var i=e.getAdElement(t);i||r<0?(clearInterval(e.trackingInterval),e.trackingInterval=0,e.rootElement&&e.setUpTracking(i||e.rootElement.querySelector(".kargo-creative"))):r-=1}),100)},o.sizeChanged=function(){this.moatObject&&this.moatTrackableEl&&"expandable"===this.moatObject.creativeType&&(this.moatTrackableEl.dispatchEvent(this.moatObject.adLoaded),this.reportMoatSize())},o.reportMoatSize=function(){if(this.moatObject)try{var t=this.moatObject.adElement.getBoundingClientRect();this.logger.debug("Moat size: ",t.width+"x"+t.height)}catch(t){this.logger.error(t)}},e=t,(i=[{key:"rootElement",get:function(){return this.creative?this.creative.rootElement:null}}])&&Hn(e.prototype,i),n&&Hn(e,n),t}(),Zn=function(){function t(t){this.node=t,this.currentSize={width:0,height:0},this.callbacks={onSizeChange:[]},this.interval=null}var e=t.prototype;return e.onSizeChange=function(t){this.callbacks.onSizeChange.indexOf(t)<0&&this.callbacks.onSizeChange.push(t)},e.checkSize=function(){if(this.node.clientWidth!==this.currentSize.width||this.node.clientHeight!==this.currentSize.height){this.currentSize.width=this.node.clientWidth,this.currentSize.height=this.node.clientHeight;for(var t=0;t<this.callbacks.onSizeChange.length;t++)this.callbacks.onSizeChange[t](this.currentSize.width,this.currentSize.height)}},e.start=function(){var t=this;this.interval||(this.interval=setInterval((function(){t.checkSize()}),100))},e.stop=function(){clearInterval(this.interval)},t}(),Qn=function(){function t(t,e,r){this.win=t,this.html=e,this.css=r,this.replacementVars={}}var e=t.prototype;return e.getHtml=function(t,e){var r;if("string"==typeof t){if(0===(r=t.trim()).indexOf("&lt;")){var i=this.win.document.createElement("div");i.innerHTML=r,r=i.childNodes[0].nodeValue}}else r=e;return r},e.replaceTemplateVars=function(t){var e;"html"==t?(e=this.html,t=this.html):(e=this.css,t=this.css);for(var r=/VAR_([A-Z_]*)/g,i=r.exec(t);i;)e=void 0!==this.replacementVars[i[1]]&&null!==this.replacementVars[i[1]]?(0,c.PY)(e,i[0],this.replacementVars[i[1]]):e.replace(i[0],""),i=r.exec(t);return e},e.setTemplateVar=function(t,e){this.replacementVars[t]=e},t}(),$n=function(t,e){return t+e&4294967295},Xn=function(t,e,r,i,n,o){return e=$n($n(e,t),$n(i,o)),$n(e<<n|e>>>32-n,r)},Yn=function(t,e,r,i,n,o,a){return Xn(e&r|~e&i,t,e,n,o,a)},to=function(t,e,r,i,n,o,a){return Xn(e&i|r&~i,t,e,n,o,a)},eo=function(t,e,r,i,n,o,a){return Xn(e^r^i,t,e,n,o,a)},ro=function(t,e,r,i,n,o,a){return Xn(r^(e|~i),t,e,n,o,a)},io=function(t,e){var r=t[0],i=t[1],n=t[2],o=t[3];r=Yn(r,i,n,o,e[0],7,-680876936),o=Yn(o,r,i,n,e[1],12,-389564586),n=Yn(n,o,r,i,e[2],17,606105819),i=Yn(i,n,o,r,e[3],22,-1044525330),r=Yn(r,i,n,o,e[4],7,-176418897),o=Yn(o,r,i,n,e[5],12,1200080426),n=Yn(n,o,r,i,e[6],17,-1473231341),i=Yn(i,n,o,r,e[7],22,-45705983),r=Yn(r,i,n,o,e[8],7,1770035416),o=Yn(o,r,i,n,e[9],12,-1958414417),n=Yn(n,o,r,i,e[10],17,-42063),i=Yn(i,n,o,r,e[11],22,-1990404162),r=Yn(r,i,n,o,e[12],7,1804603682),o=Yn(o,r,i,n,e[13],12,-40341101),n=Yn(n,o,r,i,e[14],17,-1502002290),i=Yn(i,n,o,r,e[15],22,1236535329),r=to(r,i,n,o,e[1],5,-165796510),o=to(o,r,i,n,e[6],9,-1069501632),n=to(n,o,r,i,e[11],14,643717713),i=to(i,n,o,r,e[0],20,-373897302),r=to(r,i,n,o,e[5],5,-701558691),o=to(o,r,i,n,e[10],9,38016083),n=to(n,o,r,i,e[15],14,-660478335),i=to(i,n,o,r,e[4],20,-405537848),r=to(r,i,n,o,e[9],5,568446438),o=to(o,r,i,n,e[14],9,-1019803690),n=to(n,o,r,i,e[3],14,-187363961),i=to(i,n,o,r,e[8],20,1163531501),r=to(r,i,n,o,e[13],5,-1444681467),o=to(o,r,i,n,e[2],9,-51403784),n=to(n,o,r,i,e[7],14,1735328473),i=to(i,n,o,r,e[12],20,-1926607734),r=eo(r,i,n,o,e[5],4,-378558),o=eo(o,r,i,n,e[8],11,-2022574463),n=eo(n,o,r,i,e[11],16,1839030562),i=eo(i,n,o,r,e[14],23,-35309556),r=eo(r,i,n,o,e[1],4,-1530992060),o=eo(o,r,i,n,e[4],11,1272893353),n=eo(n,o,r,i,e[7],16,-155497632),i=eo(i,n,o,r,e[10],23,-1094730640),r=eo(r,i,n,o,e[13],4,681279174),o=eo(o,r,i,n,e[0],11,-358537222),n=eo(n,o,r,i,e[3],16,-722521979),i=eo(i,n,o,r,e[6],23,76029189),r=eo(r,i,n,o,e[9],4,-640364487),o=eo(o,r,i,n,e[12],11,-421815835),n=eo(n,o,r,i,e[15],16,530742520),i=eo(i,n,o,r,e[2],23,-995338651),r=ro(r,i,n,o,e[0],6,-198630844),o=ro(o,r,i,n,e[7],10,1126891415),n=ro(n,o,r,i,e[14],15,-1416354905),i=ro(i,n,o,r,e[5],21,-57434055),r=ro(r,i,n,o,e[12],6,1700485571),o=ro(o,r,i,n,e[3],10,-1894986606),n=ro(n,o,r,i,e[10],15,-1051523),i=ro(i,n,o,r,e[1],21,-2054922799),r=ro(r,i,n,o,e[8],6,1873313359),o=ro(o,r,i,n,e[15],10,-30611744),n=ro(n,o,r,i,e[6],15,-1560198380),i=ro(i,n,o,r,e[13],21,1309151649),r=ro(r,i,n,o,e[4],6,-145523070),o=ro(o,r,i,n,e[11],10,-1120210379),n=ro(n,o,r,i,e[2],15,718787259),i=ro(i,n,o,r,e[9],21,-343485551),t[0]=$n(r,t[0]),t[1]=$n(i,t[1]),t[2]=$n(n,t[2]),t[3]=$n(o,t[3])},no=function(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r},oo="0123456789abcdef".split(""),ao=function(t){for(var e="",r=0;r<4;r++)e+=oo[t>>8*r+4&15]+oo[t>>8*r&15];return e},so=function(t){return function(t){for(var e=0;e<t.length;e++)t[e]=ao(t[e]);return t.join("")}(function(t){var e,r=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)io(i,no(t.substring(e-64,e)));t=t.substring(e-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)n[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(io(i,n),e=0;e<16;e++)n[e]=0;return n[14]=8*r,io(i,n),i}(t))};function co(t){return so(t)}function lo(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return uo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uo(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}"5d41402abc4b2a76b9719d911017c592"!==so("hello")&&($n=function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r});var ho=new S("Vast"),go=function(){function t(t){this.win=t,this.parsedVastResult=null,this.inputVastStr=null,this.parser=this.win.Kargo.VastParser}var e=t.prototype;return e.replaceVastMacros=function(t,e){return void 0===e&&(e={}),this.parser.replaceVastMacros(t,e)},e.parse=function(){var t=St(Ot().mark((function t(e){var r=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.inputVastStr=e,t.next=3,new Promise((function(t,i){var n=function(e,n){e?i(e):n?(r.parsedVastResult=n,t()):i(ho.errNew("Vast failed to parse"))};0==e.trim().indexOf("<")?r.parser.parseString(e,n):r.parser.parseUrl(e,n)}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getParsedVastUrl=function(){var t=null;return this.inputVastStr&&0!==this.inputVastStr.trim().indexOf("<")&&(t=this.inputVastStr),t},e.getParsedVastXml=function(){var t=null;return this.inputVastStr&&0===this.inputVastStr.trim().indexOf("<")&&(t=this.inputVastStr),t},e.getUUID=function(){return this.parsedVastResult?this.parsedVastResult.uuid:null},e.getRawXml=function(){return this.parsedVastResult?this.parsedVastResult.rawXmlResults:[]},e.getLinearCreative=function(){return r()(this.parsedVastResult,["ad","creatives","linear"],null)},e.getMediaFiles=function(){return r()(this.getLinearCreative(),["mediaFiles"],[])},e.getVpaidVideo=function(){for(var t,e=null,r=0,i=0,n=0,o=lo(this.getMediaFiles());!(t=o()).done;){var a=t.value;if(!e&&a.apiFramework&&"application/javascript"===a.type&&(e=Object.assign({},a)),a.width&&a.height){var s=a.width*a.height;(!n||n<s)&&(r=a.width,i=a.height,n=s)}}return e&&(e.width=r,e.height=i),e},e.getNonVpaidSource=function(){var t=null,e=this.getMediaFiles();return e.length&&(t=this.getHighestQualityVid(e)),t},e.getHighestQualityVid=function(t){var e=t.filter((function(t){return"video/mp4"===t.type}));if(!e.length)return null;var r=e.sort((function(t,e){return t.width-e.width}));return e.filter((function(t){return t&&t.width&&t.width<700})).filter((function(t){return t&&t.bitrate&&t.bitrate>=400&&t.bitrate<=700})).sort((function(t,e){return e.width*e.bitrate-t.width*t.bitrate}))[0]||r[0]},e.isVpaid=function(){return!!this.getVpaidVideo()},e.hasMediaFile=function(){for(var t,e=lo(this.getMediaFiles());!(t=e()).done;){if(!t.value.apiFramework)return!0}return!1},e.getErrorTrackers=function(){return r()(this.parsedVastResult,["ad","error"],[])},e.getImpressionTrackers=function(){return r()(this.parsedVastResult,["ad","impression"],[])},e.getViewableImpressionTrackers=function(){return r()(this.parsedVastResult,["ad","viewabletracker"],[])},e.getClickThroughUrl=function(){return r()(this.getLinearCreative(),["videoClicks","clickThrough"],null)},e.getClickTrackers=function(){return r()(this.getLinearCreative(),["videoClicks","clickTracking"],[])},e.getLoadTrackers=function(){return r()(this.parsedVastResult,["ad","extensions","load"],[])},e.getAdVerificationTrackers=function(){return r()(this.parsedVastResult,["ad","adverifications"],[])},e.getTrackingEvents=function(){return r()(this.getLinearCreative(),["trackingEvents"],null)},e.getPlaybackEvents=function(){return r()(this.getTrackingEvents(),["playback"],null)},e.getUserEvents=function(){return r()(this.getTrackingEvents(),["userActions"],null)},e.getAdParameters=function(){return r()(this.getLinearCreative(),["adParameters"],null)},t}();var po={isDebugMode:function(t){return!!h(g(t),"krg_debug")}},fo=function(){function t(t,e){this.win=t,this.logger=e,this.vast=null,this.videoPlayerConfig=null,this.resolvedSource=null,this.isClickable=0}var e=t.prototype;return e.getVideoPlayerConfig=function(t,e){var r=this,i=t?t.getVpaidVideo():null,n=!i&&t?t.getNonVpaidSource():null,o=t?t.getLinearCreative():null,s=e.click_url;!s&&t&&t.getClickThroughUrl()&&(s=t.getClickThroughUrl()),s&&(this.isClickable=1,s=s.replace("[CACHEBUSTING]",this.getCachebustValue()));var l={amp_iframe:a(this.win),debug:!1,player:{location:e.videoPlayerLocation},moat_fields:e.moat||null,autoplay:rt(this.win),endcard_url:e.endcardUrl,disableOutOfViewPause:e.disableOutOfViewPause,startOnFullView:e.startOnFullView,adParams:t?t.getAdParameters():null,destroyAd:e.destroyAd,reportErr:function(t){return r.reportErr(t)},error:e.tracking.error,ad_verifications:t?t.getAdVerificationTrackers():[],viewableImpressionTrackers:{viewable:t?t.getViewableImpressionTrackers():[]},uuid:e.impressionId||null,duration:o&&o.duration?o.duration/1e3:null,videos:{dimensions:this.getDimensions(t),vpaidUrl:i?i.url:null,source:n?n.url:null,click_url:s,tracking:{start:e.tracking.start,firstQuartile:e.tracking.firstQuartile,midpoint:e.tracking.midpoint,thirdQuartile:e.tracking.thirdQuartile,complete:e.tracking.complete,mute:e.tracking.mute,unmute:e.tracking.unmute,click:t?t.getClickTrackers():[],click_url_prefix:e.click_url_prefix||null},load:e.tracking.load}},u=(0,c.GK)(this.win,"Kargo.Config.getGlobalConfig");u&&u()&&u().isDebug()&&(l.debug=!0);var h=t?t.getTrackingEvents():null;if(h){var g=l.videos.tracking;g.start=g.start.concat(h.playback.start).concat(t.getImpressionTrackers()),g.firstQuartile=g.firstQuartile.concat(h.playback.firstQuartile),g.midpoint=g.midpoint.concat(h.playback.midpoint),g.thirdQuartile=g.thirdQuartile.concat(h.playback.thirdQuartile),g.complete=g.complete.concat(h.playback.complete),g.mute=g.mute.concat(h.userActions.mute),g.unmute=g.unmute.concat(h.userActions.unmute)}return l.error=l.error.concat(t?t.getErrorTrackers():[]),l.videos.load=l.videos.load.concat(t?t.getLoadTrackers():[]),l.moat_fields&&(l.moat_fields.zMoatEXE="VPAID"),l},e.reportErr=function(t){new ce(this.win,this.resolvedSource||{logger:this.logger}).report("VIDEO-PLAYER","VPAID Error "+t.code+": "+t.message,{}),900!==t.code&&901!==t.code||Oe.reportAdMetric({type:"failure",version:"6.37.0",errCode:"vpaid-"+t.code},this.videoPlayerConfig,this.logger)},e.setSource=function(t){this.resolvedSource=t},e.getDimensions=function(t){var e={width:null,height:null},r=t?t.getVpaidVideo():null,i=!r&&t?t.getNonVpaidSource():null,n=r||i||null;return n&&(e.width=n.width,e.height=n.height),e},e.getCachebustValue=function(){return Math.random().toString().substr(2,8)},e.createVideoPlayer=function(){var t=St(Ot().mark((function t(e,r){var i,n,o,a,s=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.getVideoPlayerConfig(e,r),(n=i.videos).vpaidUrl||n.source){t.next=4;break}return t.abrupt("return",null);case 4:if(o=n.vpaidUrl?"VPAID":"MP4",this.logger.debug("Video "+o+" Creative - VideoPlayer Config",this.getVideoPlayerConfig(e,r)),a="https://storage.cloud.kargo.com/ad/network/tag/Kargo-VideoPlayer.js","true"===h(g(this.win),"krg_qa")&&(a="https://storage.cloud.kargo.com/ad/network/tag/Kargo-VideoPlayer-stag.js"),(po.isDebugMode(this.win)||1===Math.floor(10*Math.random()))&&this.reportVPAIDClickable(),!this.win.Kargo.VideoPlayer){t.next=14;break}return this.player=new this.win.Kargo.VideoPlayer(i),t.abrupt("return",this.player);case 14:return t.abrupt("return",new Promise((function(t,e){R(a,s.win,null,(function(r){r?e(r):(s.player=new s.win.Kargo.VideoPlayer(i),t(s.player))}))})));case 15:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.reportVPAIDClickable=function(){var t;t=this.resolvedSource?{slot:this.resolvedSource.creativeData.slot,format:this.resolvedSource.creativeData.format}:{format:"OutstreamVideo"},Oe.reportAdMetric({type:"vpaid-clickable",version:"6.37.0",vpaidClickable:this.isClickable},t,this.logger)},t}(),vo=new S("Video"),mo=function(){function t(t,e){this.win=t,this.logger=e,this.vast=null,this.videoPlayer=null,this.html=null,this.creativeType=null,this.resolvedSource=null,this.nativeVideoKeyArtConfig={video_url:null,vpaid_enabled:!1,click_url:null,tracking:{start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],unmute:[],mute:[],rewind:[],click:[]}},this.anchorConfig={kstream:{spriteSheetUrls:{small:null,large:null},audioUrl:null},video:{url:null,width:null,height:null,hasAudio:!0,duration:null,ratio:null,vastUrl:null,vastXml:null}},this.config={test:!1,impressionId:null,click_url_prefix:null,click_url:null,videoPlayerLocation:null,endcardUrl:null,tracking:{start:[],firstQuartile:[],midpoint:[],thirdQuartile:[],complete:[],mute:[],unmute:[],replay:[],error:[],expand:[],dismiss:[],load:[],click:[]},moat:null,creative_origin:null,creative_id:null,disableOutOfViewPause:!1,startOnFullView:!1,format:null,destroyAd:null},this.ANCHOR_TEMPLATE_URL="https://storage.cloud.kargo.com/ad/network/tag/video-anchor-template-v6.html",this.ANCHOR_TEMPLATE_TEST_URL="https://storage.cloud.kargo.com/ad/network/tag/video-anchor-test.html",this.AD_METRIC_RATE=20}var e=t.prototype;return e.setConfig=function(t){(0,c.TS)(this.config,t)},e.setSource=function(t){this.resolvedSource=t},e.parseVast=function(){var t=St(Ot().mark((function t(e){var r=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){R("https://storage.cloud.kargo.com/ad/network/tag/VastParser.min.js",r.win,null,function(){var n=St(Ot().mark((function n(o){var a,s;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o){n.next=4;break}i(o),n.next=10;break;case 4:return r.vast=new go(r.win),n.next=7,r.vast.parse(e);case 7:null!=(a=r.vast.parsedVastResult)&&null!=(s=a.ad)&&s.wrappers&&r.vast.parsedVastResult.ad.wrappers.length&&r.reportVPAIDWrapper(r.vast.parsedVastResult.ad.wrappers.length),r.reportVideoType(),t();case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.reportVPAIDWrapper=function(t){(this.isDebugMode||1===Math.floor(100*Math.random()))&&Oe.reportAdMetric({value:t,type:"vpaid-wrappers",version:"6.37.0"},this.config,this.logger)},e.reportVideoType=function(){if((this.isDebugMode()||1===Math.floor(Math.random()*this.AD_METRIC_RATE))&&("Kraken"===this.resolvedSource.type||"KrakenAdRequest"===this.resolvedSource.type)){var t=this.vast.isVpaid()?"vpaid":"vast",e={slot:this.resolvedSource.macroUtil.macroConfig.slotId,source:this.resolvedSource,format:this.config.format};Oe.reportAdMetric({value:1,type:"video-type",version:"6.37.0",videoType:t},e,this.logger)}},e.fireErrorTrackers=function(t){var e=this,r=this.config.tracking.error;if(this.vast){var i=this.vast.getErrorTrackers().map((function(r){return e.vast.replaceVastMacros(r,{errorCode:t})}));r=r.concat(i)}r.forEach((function(t){return E(e.win,t)}))},e.getDimensions=function(){return this.videoPlayer.getVideoPlayerConfig(this.vast,this.config).videos.dimensions},e.loadVideoPlayer=function(){var t=St(Ot().mark((function t(){var e;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,this.videoPlayer||(this.videoPlayer=new fo(this.win,this.logger),this.videoPlayer.setSource(this.resolvedSource),e=this.videoPlayer.createVideoPlayer(this.vast,this.config)),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getViewStreamSnippet=function(){var t=St(Ot().mark((function t(){var e,r,i;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.vast){t.next=24;break}if(this.vast.hasMediaFile()||this.vast.isVpaid()){t.next=5;break}throw vo.errGet("MediaFile or VPAID js","VAST tag");case 5:if(!this.vast.isVpaid()||this.vast.hasMediaFile()&&!rt(this.win)){t.next=14;break}return this.creativeType="VideoPlayer",e="",this.config.tracking.load.forEach((function(t){e+='<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="'+t+'" />'})),this.vast.getLoadTrackers().forEach((function(t){t.indexOf("casalemedia.com/usermatch")>-1?e+='<iframe style="display: none" src="'+t+'"></iframe>':e+='<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="'+t+'" />'})),this.vast.getAdVerificationTrackers().forEach((function(t){e='<script type="text/javascript" src="'+t+'"><\/script>'+e})),t.abrupt("return",e);case 14:return r=co(this.vast.getUUID()),t.next=17,this.fetchProcessedVastData(r,"html");case 17:return i=t.sent,this.creativeType="Platform",this.html=i,this.html=this.replacePlatformMacros(this.html),t.abrupt("return",this.html);case 22:t.next=29;break;case 24:if(!this.html){t.next=28;break}return t.abrupt("return",this.replacePlatformMacros(this.html));case 28:throw vo.errNotSet("VAST or ViewStream snippet");case 29:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getPlatformMacros=function(){var t={start:Array.from(new Set(this.config.tracking.start)),firstQuartile:this.config.tracking.firstQuartile,midpoint:this.config.tracking.midpoint,midQuartile:this.config.tracking.midpoint,thirdQuartile:this.config.tracking.thirdQuartile,complete:this.config.tracking.complete,mute:this.config.tracking.mute,unmute:this.config.tracking.unmute,replay:this.config.tracking.replay,error:this.config.tracking.error,expand:this.config.tracking.expand,dismiss:this.config.tracking.dismiss,clickTrackers:[]};if(this.vast&&("VideoAnchor"!==this.config.format||!this.vast.isVpaid())){t.start=t.start.concat(this.vast.getImpressionTrackers()),t.error=t.error.concat(this.vast.getErrorTrackers()),t.clickTrackers=t.clickTrackers.concat(this.vast.getClickTrackers());var e=this.vast.getClickThroughUrl();e&&(t.clickUrl=e);var r=this.vast.getTrackingEvents();r&&(t.start=t.start.concat(r.playback.start),t.firstQuartile=t.firstQuartile.concat(r.playback.firstQuartile),t.midpoint=t.midpoint.concat(r.playback.midpoint),t.midQuartile=t.midQuartile.concat(r.playback.midpoint),t.thirdQuartile=t.thirdQuartile.concat(r.playback.thirdQuartile),t.complete=t.complete.concat(r.playback.complete),t.mute=t.mute.concat(r.userActions.mute),t.unmute=t.unmute.concat(r.userActions.unmute),t.expand=t.expand.concat(r.userActions.playerExpand),t.dismiss=t.dismiss.concat(r.userActions.skip))}return this.config.disableOutOfViewPause&&(t.disableOutOfViewPause=this.config.disableOutOfViewPause),this.config.click_url&&(t.clickUrl=this.config.click_url),this.config.click_url_prefix&&(t.clickUrl?t.clickUrl=this.config.click_url_prefix+t.clickUrl:t.clickUrlPrefix=this.config.click_url_prefix),this.config.moat&&(t.moatTag=this.config.moat),t},e.replacePlatformMacros=function(t){var e=t,r=function(t,r){void 0===r&&(r=!1),e.indexOf(t)<0&&(r?e=t+e:e+=t)};this.config.tracking.load.forEach((function(t){r('<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="'+t+'" />')})),this.vast&&(this.vast.getLoadTrackers().forEach((function(t){t.indexOf("casalemedia.com/usermatch")>-1?r('<iframe style="display: none" src="'+t+'"></iframe>'):r('<img style="position: absolute; visibility: hidden; left: -9999px; top: 0;" src="'+t+'" />')})),this.vast.getAdVerificationTrackers().forEach((function(t){r('<script type="text/javascript" src="'+t+'"><\/script>',!0)})));var i=this.getPlatformMacros(),n=JSON.stringify(i).replace(/"/g,"&quot;").replace(/'/g,"\\'");return e=(0,c.PY)(e,"{ADTAG_VALUES}",n)},e.getNativeVideoSnippet=function(){var t=St(Ot().mark((function t(){var e,r,i,n,o,a,s,c;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.vast){t.next=28;break}if(e=this.vast,this.creativeType=Mt,e.hasMediaFile()||e.isVpaid()){t.next=7;break}throw vo.errGet("MediaFile or VPAID js","VAST tag");case 7:if(r=this.vast.getTrackingEvents())for(i in this.nativeVideoKeyArtConfig.tracking)(n=r.playback[i]||r.userActions[i])&&(this.nativeVideoKeyArtConfig.tracking[i]=[].concat(this.nativeVideoKeyArtConfig.tracking[i],n));if(this.vast.getClickThroughUrl()&&(this.nativeVideoKeyArtConfig.click_url=this.vast.getClickThroughUrl()),o=this.vast.getClickTrackers(),this.nativeVideoKeyArtConfig.tracking.click=this.nativeVideoKeyArtConfig.tracking.click.concat(o),this.nativeVideoKeyArtConfig.vpaid_enabled=e.isVpaid(),!e.isVpaid()){t.next=18;break}this.nativeVideoKeyArtConfig.vpaid_url=e.getParsedVastUrl(),this.nativeVideoKeyArtConfig.vpaid_xml=e.getParsedVastXml().replace(/'/g,'\\"'),t.next=25;break;case 18:return a=co(e.getUUID()),t.next=21,this.fetchProcessedVastData(a,"json");case 21:s=t.sent,(c=s).video&&(this.nativeVideoKeyArtConfig.video_url=c.video.url),c.kstream&&(this.nativeVideoKeyArtConfig.audio_url=c.kstream.audioUrl,c.kstream.spriteSheetUrls&&(this.nativeVideoKeyArtConfig.sprite=c.kstream.spriteSheetUrls.default));case 25:return t.abrupt("return",this.nativeVideoKeyArtConfig);case 26:t.next=29;break;case 28:throw vo.errNotSet("VAST tag required for ABA Video");case 29:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getVideoAnchorSnippet=function(){var t=St(Ot().mark((function t(){var e,r,i,n,o,a;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.vast){t.next=2;break}throw vo.errNotSet("VAST tag required for VideoAnchor");case 2:if(e=this.vast,this.anchorConfig.video.vastUrl=e.getParsedVastUrl(),this.anchorConfig.video.vastXml=e.getParsedVastXml(),this.creativeType="VideoAnchor",e.hasMediaFile()||e.isVpaid()){t.next=10;break}throw vo.errGet("MediaFile or VPAID js","VAST tag");case 10:if(e.isVpaid()){t.next=33;break}return r=co(e.getUUID()),t.prev=12,t.next=15,this.fetchProcessedVastData(r,"json");case 15:i=t.sent,(n=i).video&&(this.anchorConfig.video.url=n.video.url,this.anchorConfig.video.width=n.video.width,this.anchorConfig.video.height=n.video.height,this.anchorConfig.video.hasAudio=n.video.hasAudio,this.anchorConfig.video.duration=n.video.duration,this.anchorConfig.video.ratio=n.video.ratio),n.kstream&&(this.anchorConfig.kstream.audioUrl=n.kstream.audioUrl,n.kstream.spriteSheetUrls&&(this.anchorConfig.kstream.spriteSheetUrls.small=n.kstream.spriteSheetUrls.small,this.anchorConfig.kstream.spriteSheetUrls.large=n.kstream.spriteSheetUrls.large)),t.next=31;break;case 21:if(t.prev=21,t.t0=t.catch(12),!e.getNonVpaidSource()){t.next=30;break}o=e.getNonVpaidSource(),this.anchorConfig.video.url=o.url,this.anchorConfig.video.width=o.width,this.anchorConfig.video.height=o.height,t.next=31;break;case 30:throw ji;case 31:t.next=34;break;case 33:this.creativeType="VideoPlayer";case 34:return t.next=36,this.getVideoAnchorTemplate();case 36:return a=t.sent,this.html=a,this.html=this.replaceAnchorMacros(this.html),t.abrupt("return",this.html);case 40:case"end":return t.stop()}}),t,this,[[12,21]])})));return function(){return t.apply(this,arguments)}}(),e.getVideoAnchorTemplate=function(){var t=this,e=this.config.test?this.ANCHOR_TEMPLATE_TEST_URL:this.ANCHOR_TEMPLATE_URL;return new Promise((function(r,i){T(e,t.win,0,!1,(function(t,n){if(t||!n){var o=vo.errGet("VideoAnchor template', 'url:  "+e);i(o)}else r(n)}))}))},e.getAnchorMacros=function(){var t=(0,c.TS)({},this.config,this.anchorConfig);t.creative_id&&(t.creativeId=t.creative_id);var e=this.vast&&this.vast.isVpaid()||!1;if(t.isVpaid=e,t.moat&&(t.moat.zMoatEXE="VPAID"),this.vast&&!e){var r=this.vast.getTrackingEvents();r&&(t.tracking.start=this.vast.getImpressionTrackers().concat(t.tracking.start).concat(r.playback.start),t.tracking.firstQuartile=t.tracking.firstQuartile.concat(r.playback.firstQuartile),t.tracking.midpoint=t.tracking.midpoint.concat(r.playback.midpoint),t.tracking.thirdQuartile=t.tracking.thirdQuartile.concat(r.playback.thirdQuartile),t.tracking.complete=t.tracking.complete.concat(r.playback.complete),t.tracking.mute=t.tracking.mute.concat(r.userActions.mute),t.tracking.unmute=t.tracking.unmute.concat(r.userActions.unmute),t.tracking.click=t.tracking.click.concat(this.vast.getClickTrackers()),t.tracking.error=t.tracking.error.concat(this.vast.getErrorTrackers()))}return t},e.replaceAnchorMacros=function(t){var e=this.getAnchorMacros(),r=encodeURIComponent(JSON.stringify(e)).replace(/"/g,"&quot;").replace(/'/g,"\\'"),i=t;return i=(0,c.PY)(i,"%%macroConfig%%",r),i=this.replacePlatformMacros(i)},e.getS3Path=function(){var t="https://storage.cloud.kargo.com/ad/kstream/prod/",e=g(this.win);return h(e,"krg_qa")?t="https://storage.cloud.kargo.com/ad/kstream/staging/":h(e,"krg_dev")&&(t="https://storage.cloud.kargo.com/ad/kstream/dev/"),t},e.getPostUrl=function(){var t="https://kstream-service.prod.kargo.com/api/process";return h(g(this.win),"krg_qa")&&(t="https://kstream-service.dev.kargo.com/api/process"),t},e.fetchProcessedVastData=function(){var t=St(Ot().mark((function t(e,r){var i,n,o,a,s=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.vast&&this.vast.getUUID()){t.next=4;break}throw vo.errNotSet("Vast UUID to fetch processed video");case 4:return i=co(this.vast.getUUID()),n="json"===r?this.getS3Path()+"config/"+i+".json":this.getS3Path()+"snippet/"+i+".html",0,!1,o=null,t.prev=9,t.next=12,new Promise((function(t,e){T(n,s.win,0,false,(function(r,i){r?e(r):t(i)}))}));case 12:o=t.sent,t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(9),new Error(Ui);case 18:if("string"!=typeof o||"html"!==r){t.next=22;break}return t.abrupt("return",o);case 22:if("object"!=typeof o||"json"!==r){t.next=26;break}return t.abrupt("return",o);case 26:throw(a=vo.errNew("Unrecognized Processed Video data response")).krg_err_code="VAST",a;case 29:case"end":return t.stop()}}),t,this,[[9,15]])})));return function(e,r){return t.apply(this,arguments)}}(),e.submitVastForTranscoding=function(){var t=St(Ot().mark((function t(){var e,r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.vast&&this.vast.getUUID()){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,this.isVastSubmitted();case 6:if(!(e=t.sent)){t.next=13;break}return r=new Date(e).toString(),this.logger.debug("VAST already submitted at "+r),t.abrupt("return",!1);case 13:return t.prev=13,t.next=16,this.sendTranscodingRequest();case 16:return this.logger.debug("VAST submitted for transcoding"),t.abrupt("return",!0);case 20:return t.prev=20,t.t0=t.catch(13),this.logger.debug("Error. VAST not submitted for transcoding: ",t.t0),t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,this,[[13,20]])})));return function(){return t.apply(this,arguments)}}(),e.isVastSubmitted=function(){var t=St(Ot().mark((function t(){var e,r,i=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.vast){t.next=4;break}throw"No Vast to Transcode";case 4:return e=co(this.vast.getUUID()),r=this.getS3Path()+"submit/"+e,t.abrupt("return",new Promise((function(t){T(r,i.win,0,!1,(function(e,r){t(e?null:r.uploadTime)}))})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.sendTranscodingRequest=function(){var t=St(Ot().mark((function t(){var e,r,i=this;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.vast){t.next=4;break}throw"No Vast to Transcode";case 4:return t.next=6,new Promise((function(t){e={ad_markup:i.vast.getRawXml()[0],creative_origin:i.config.creative_origin,creative_id:i.config.creative_id,request_origin:"adtag",parameters:{format:i.config.format}},t()}));case 6:return r=this.getPostUrl(),t.abrupt("return",new Promise((function(t,n){L(r,e,i.win,0,!1,(function(e,r){if(e)n(e);else{var o=null;try{o=JSON.parse(r)}catch(t){i.logger.report(ge,"Error parsing returned response from Transcoding Service: "+t.message)}t(o)}}))})));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.isDebugMode=function(){return!!h(g(this.win),"krg_debug")},t}(),ko=[{name:"DFP",viewPercent:.5,timeInView:1e3,callbackName:"onViewable"},{name:"MrcVideo",viewPercent:.5,timeInView:2e3,callbackName:"onMrcVideoViewable"},{name:"CompleteView",viewPercent:.95,timeInView:2e3,callbackName:"onCompleteViewable"}];function bo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function yo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bo(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var wo=function(){function t(t,e,r){this.element=t,this.sourceElement=e,this.isVideo=r,this.callbacks={onVisibleChange:[],onViewable:[],onMrcVideoViewable:[],onCompleteViewable:[],onMissingScript:[]},this.mutationObserver=null}var e=t.prototype;return e.start=function(){var t=this;this.checkVisibility(),this.checkHasScript(),ko.forEach((function(e){var r=yo(yo({},e),{},{timeInView:t.isVideo&&"DFP"===e.name?2e3:e.timeInView});t.checkViewability(r)}))},e.stop=function(){this.mutationObserver&&this.mutationObserver.disconnect()},e.checkVisibility=function(){var t=this;Zi.observeElement(this.element,0,!1,(function(e){var r=e.isIntersecting;(0,c.if)(t,t.callbacks.onVisibleChange,[r])}))},e.checkHasScript=function(){var t=this,e=(this.sourceElement.ownerDocument||{}).defaultView;this.mutationObserver=new MutationObserver((function(){e||(0,c.if)(t,t.callbacks.onMissingScript)})),this.sourceElement.ownerDocument&&this.mutationObserver.observe(this.sourceElement.ownerDocument,{attributes:!0,childList:!0,subtree:!0})},e.checkViewability=function(t){var e=this,r=t.viewPercent,i=t.timeInView,n=t.callbackName,o=!1,a=!1,s=null;Zi.observeElement(this.element,r,!1,(function(t){a||(o=t.intersectionRatio>r,s||(s=window.setTimeout((function(){o?(a=!0,(0,c.if)(e,e.callbacks[n])):(clearTimeout(s),s=null)}),i)))}))},e.onVisibleChange=function(t){this.callbacks.onVisibleChange.indexOf(t)<0&&this.callbacks.onVisibleChange.push(t)},e.onViewable=function(t){this.callbacks.onViewable.indexOf(t)<0&&this.callbacks.onViewable.push(t)},e.onMrcVideoViewable=function(t){this.callbacks.onMrcVideoViewable.indexOf(t)<0&&this.callbacks.onMrcVideoViewable.push(t)},e.onCompleteViewable=function(t){this.callbacks.onCompleteViewable.indexOf(t)<0&&this.callbacks.onCompleteViewable.push(t)},e.onMissingScript=function(t){this.callbacks.onMissingScript.indexOf(t)<0&&this.callbacks.onMissingScript.push(t)},t}(),_o=function(){function t(){this.creatives={}}var e=t.prototype;return e.getActiveCreatives=function(){var t={};for(var e in this.creatives)this.creatives[e].isDestroyed()||(t[e]=this.creatives[e]);return t},e.add=function(t){var e=t.getId();e&&!this.creatives[e]&&(this.creatives[e]=t)},e.get=function(t){var e=null,r=this.getActiveCreatives();return t&&r[t]&&(e=r[t]),e},e.getAll=function(){var t=[],e=this.getActiveCreatives();for(var r in e){var i=e[r];t.push(i)}return t},e.getByLocalId=function(t){var e=this.getActiveCreatives();for(var r in e){var i=e[r];if(i.getLocalId()===t)return i}return null},e.getCreativesOfType=function(t){var e=[],r=this.getActiveCreatives();for(var i in r){var n=r[i];n.getType()===t&&e.push(n)}return e},e.getCreativesOfFormat=function(t){var e=[],r=this.getActiveCreatives();for(var i in r){var n=r[i];n.getFormat()===t&&e.push(n)}return e},e.getCreativesOfSlot=function(t){var e=[],r=this.getActiveCreatives();for(var i in r){var n=r[i];n.getSlotId()===t&&e.push(n)}return e},e.getAnalytics=function(){var t=[];for(var e in this.creatives){var r=this.creatives[e].getAnalytics();if(r&&r.localId){var i=r.localId;delete r.localId,t[i]=r}}return t},t}();const Co=_o;function xo(t){var e=n(t),r=i(t,e);if(!r.CreativeRegister){new st(e).setLabel("CREATIVE REGISTER");var o=new Co;r.CreativeRegister={add:function(t){return o.add(t)},get:function(t){return o.get(t)},getAll:function(){return o.getAll()},getByLocalId:function(t){return o.getByLocalId(t)},getCreativesOfType:function(t){return o.getCreativesOfType(t)},getCreativesOfFormat:function(t){return o.getCreativesOfFormat(t)},getCreativesOfSlot:function(t){return o.getCreativesOfSlot(t)},report:function(){for(var t,r,i=o.getAnalytics(),n=[],a=1;i[a];){var s=null;i[a].timestamps.displayed&&(s=i[a].timestamps.displayed-i[a].timestamps.start+" ms");var l=null;i[a].timestamps.firstVisible&&(l=i[a].timestamps.firstVisible-i[a].timestamps.start+" ms");var u=null;i[a].timestamps.viewable&&(u=i[a].timestamps.viewable-i[a].timestamps.start+" ms");var h=null;i[a].timestamps.destroyed&&(h=i[a].timestamps.destroyed-i[a].timestamps.start+" ms"),n.push({ID:i[a].id,Type:i[a].type,Format:i[a].format,Execution:i[a].execution,"Kargo Creative":i[a].kargoCreativeId,"Started at":(t=i[a].timestamps.start,r=void 0,r=new Date(t),(0,c.c)(r.getHours(),2,"0")+":"+(0,c.c)(r.getMinutes(),2,"0")+":"+(0,c.c)(r.getSeconds(),2,"0")+"."+(0,c.c)(r.getMilliseconds(),3,"0")),"Displayed at":s,"First Visible at":l,"Viewable at":u,"Destroyed at":h}),a+=1}e.console.log("Creatives"),e.console.table(n)}}}r.report=r.report||function(){for(var t=["AdTag","AmpTag","LMT","CreativeRegister"],e=0;e<t.length;e+=1)r[t[e]]&&r[t[e]].report&&r[t[e]].report()}}var Ao=new S("Banner"),So={Adelaide:Mn,ActiveView:Kn,Comscore:qn,CreativeSandbox:Bn,Moat:Jn,SizeMonitor:Zn,Template:Qn,Video:mo,VisibilityMonitor:wo};var Do,Io,Eo,Oo=new S("Banner"),Vo={Adelaide:Mn,ActiveView:Kn,Comscore:qn,CreativeSandbox:Bn,Moat:Jn,SizeMonitor:Zn,Template:Qn,Video:mo,VisibilityMonitor:wo};!function(t){var e=n(t),r=i(t,e);if(!r.Config){var o=new st(e);o.setLabel("CONFIG");var a=new li;r.Config={},r.Config.setGlobalConfig=function(t){if(!a.getGlobalConfig()){var r=new hi;r.checkPageVars(e),r.setConfig(t),a.setGlobalConfig(r),o.debug("Global Config set",r.getConfig())}},r.Config.getGlobalConfig=function(){var t=a.getGlobalConfig(),e=null;return t&&(e={getConfig:function(){return t.getConfig()},checkPageVars:function(e){return t.checkPageVars(e)},isDebug:function(){return t.isDebug()},isLatencyTracked:function(){return t.isLatencyTracked()},getEnvironment:function(){return t.getEnvironment()},getPublisherId:function(){return t.getPublisherId()},getPropertyId:function(){return t.getPropertyId()},getConditionalCheckFunc:function(){return t.getConditionalCheckFunc()},getPreLoadCss:function(){return t.getPreLoadCss()},getPreLoadFunc:function(){return t.getPreLoadFunc()},getEnabledPlugins:function(){return t.getEnabledPlugins()},isActiveViewRewriteEnabled:function(){return t.isActiveViewRewriteEnabled()},isComScoreEnabled:function(){return t.isComScoreEnabled()},isMoatViewabilityEnabled:function(){return t.isMoatViewabilityEnabled()},isDFPEnabled:function(){return t.isDFPEnabled()},isSSPEnabled:function(){return t.isSSPEnabled()},isSSPOpenEnabled:function(){return t.isSSPOpenEnabled()},isIntegrationTrackersEnabled:function(){return t.isIntegrationTrackersEnabled()},isHoverHidingDisabled:function(){return t.isHoverHidingDisabled()}}),e},r.Config.setSlotConfig=function(t){var r=new di;if(r.checkPageVars(e),r.setConfig(t),r.getId()&&!a.getSlotConfig(r.getId())){if(t.settings)if(t.settings.length)for(var i,n=0;n<t.settings.length;n+=1)(i=new vi).setConfig(t.settings[n]),r.setFormatConfig(i);else if(t.settings.format){var s=new vi;s.setConfig(t.settings),r.setFormatConfig(s)}a.setSlotConfig(r),o.debug("Slot Config '"+r.getId()+"' set",r.getConfig())}},r.Config.getSlotConfig=function(t){var e=a.getSlotConfig(t),r=null;return e&&(r={getConfig:function(){return e.getConfig()},getFormatConfig:function(t){var r=e.getFormatConfig(t),i=null;return r&&(i={getConfig:function(){return r.getConfig()},getFormat:function(){return r.getFormat()},isApprovedForDirect:function(){return r.isApprovedForDirect()},isApprovedForPMP:function(){return r.isApprovedForPMP()},getCss:function(){return r.getCss()},getPreDrawFunc:function(){return r.getPreDrawFunc()},getPostDrawFunc:function(){return r.getPostDrawFunc()},isIgnoreSlotCss:function(){return r.isIgnoreSlotCss()},isIgnoreSlotPreDrawFunc:function(){return r.isIgnoreSlotPreDrawFunc()},isIgnoreSlotPostDrawFunc:function(){return r.isIgnoreSlotPostDrawFunc()},getCreativeConfig:function(){return r.getCreativeConfig()}}),i},getAllFormatConfigs:function(){var t=e.getAllFormatConfigs(),i={};return t&&Object.keys(t).forEach((function(t){var e=r.getFormatConfig(t);r.getFormatConfig(t)&&(i[t]=e)})),i},getId:function(){return e.getId()},getPlatform:function(){return e.getPlatform()},getPosition:function(){return e.getPosition()},getOverrideUrl:function(){return e.getOverrideUrl()},getSSPConfig:function(){return e.getSSPConfig()},getDFPConfig:function(){return e.getDFPConfig()},getPassbackConfig:function(){return e.getPassbackConfig()},isCallAutomatically:function(){return e.isCallAutomatically()},getFailedRequestFunc:function(){return e.getFailedRequestFunc()},getConditionalCheckFunc:function(){return e.getConditionalCheckFunc()},getCss:function(){return e.getCss()},getPreDrawFunc:function(){return e.getPreDrawFunc()},getPostDrawFunc:function(){return e.getPostDrawFunc()},allowsResponsiveCreatives:function(){return e.allowsResponsiveCreatives()},allowsMultiple:function(){return e.allowsMultiple()}}),r},r.Config.onGlobalReady=function(t){return a.onGlobalReady(t)},r.Config.onSlotReady=function(t,e){return a.onSlotReady(t,e)},r.Config.setDeviceId=function(t){return a.setDeviceId(t)},r.Config.getDeviceId=function(){return a.getDeviceId()},r.setGlobalConfig=r.Config.setGlobalConfig,r.setAdConfig=r.Config.setSlotConfig}}(window),Do=window,Io=n(Do),Eo=i(Do,Io),xo(Io),Eo.Banner||(Eo.Banner=function(e,r){var i=new st(Io),n=new ct(Io,i),o=So;o.tracking=n;var a=e.format,s=t[a];s||(s=Fi),"viewstream"===e.execution&&(s=un);var l=new s(Io,i),u={show:function(){return l.show()},hide:function(){return l.hide()},destroy:function(){return l.destroy()},isVisible:function(){return l.isVisible},isViewable:function(){return l.isViewable},isDisplayed:function(){return l.isDisplayed},isDestroyed:function(){return l.isDestroyed},getLocalId:function(){return l.config.localId},getId:function(){return l.config.id},getFormat:function(){return l.config.format},getType:function(){return l.config.type},getSlotId:function(){return l.config.slot},getAnalytics:function(){return l.getAnalytics()},getConfig:function(){return(0,c.TS)({},l.config)}},h=function(t){l.reportError(t),l.destroy()};try{l.setComponents(o),l.resolvedSource=r,l.setConfig(e),l.detectContainerEnvironment().then((function(){if(!Do.Kargo||!Do.Kargo.CreativeRegister)throw Ao.errCant("Register banner module");Do.Kargo.CreativeRegister.add(u),l.display()})).catch(h)}catch(t){h(t)}return u}),function(e){var r=n(e),o=i(e,r);xo(r),o.Hover||(o.Hover=function(i,n){var o=new st(r),a=new ct(r,o),s=Vo;s.tracking=a;var l=i.format,u=t[l];u||(u=nn);var h=new u(r,o),g={show:function(){return h.show()},hide:function(){return h.hide()},destroy:function(){return h.destroy()},isVisible:function(){return h.isVisible},isViewable:function(){return h.isViewable},isDisplayed:function(){return h.isDisplayed},isDestroyed:function(){return h.isDestroyed},getLocalId:function(){return h.config.localId},getId:function(){return h.config.id},getFormat:function(){return h.config.format},getType:function(){return h.config.type},getSlotId:function(){return h.config.slot},getAnalytics:function(){return h.getAnalytics()},getConfig:function(){return(0,c.TS)({},h.config)}},d=function(t){h.reportError(t),h.destroy()};try{h.setComponents(s),h.resolvedSource=n,h.setConfig(i),h.detectContainerEnvironment().then((function(){if(!e.Kargo||!e.Kargo.CreativeRegister)throw Oo.errCant("Register hover module");e.Kargo.CreativeRegister.add(g),h.display()})).catch(d)}catch(t){d(t)}return g})}(window),function(){var t=n(window),e=i(window,t);if(!e.AdTag){var o=new st(t);o.setLabel("ADTAG");var a=new ct(t,o),s=new $e(t,o,a),c=new gt(t,(function(){var t=r()(e,"Config.getGlobalConfig",(function(){}));return t.getEnvironment?t.getEnvironment():ri})),l=new ci(t,o,c),u=new ei(t,o,s,l),h="";if(window.document.currentScript&&window.document.currentScript.getAttribute("src"))h=window.document.currentScript.getAttribute("src");else for(var g=window.document.getElementsByTagName("script"),d=0;d<g.length;){if(g[d].src&&g[d].src.indexOf("storage.cloud.kargo.com/ad/network/tag")>0){h=g[d].src;break}d+=1}u.setSelfUrl(h),e.AdTag=u,e.getAd=u.getAd.bind(u),e.loadAds=u.loadAds.bind(u),e.loaded=!0,e.self_url=h,e.Config.onGlobalReady((function(){var e,r;r=function(){o.debug("v6.37.0"),u.loadAds(),u.init()},"interactive"===(e=t).document.readyState||"complete"===e.document.readyState?r():e.document.addEventListener("DOMContentLoaded",r)}))}}()})()})();Kargo.self_url="https://storage.cloud.kargo.com/ad/network/tag/v3/_glc7fMnqkSW73kXIGNGSQd3o.js";Kargo.setGlobalConfig({"publisher_id":241,"property_id":838,"conditional_check":"window.__krg_cerberus = true;\nwindow.__krg_vpaid = true;\nwindow.__krg_moat_new_creative_api = true;","pre_js":"(function(d){var s=d.createElement('script');s.src='https:\/\/socialcanvas-cdn.kargo.com\/js\/rh-k.min.js';(d.getElementsByTagName('head')[0] || d.getElementsByTagName('body')[0]).appendChild(s);})(document);","settings":{"enable_comscore":false,"enable_grapeshot":true,"enable_krux":false,"enable_moat_content":false,"enable_moat_viewability":true,"enable_ssp":true,"enable_open":true,"enable_dfp":true,"enable_trackers":false}});Kargo.setAdConfig({"kargo_id":"_mwJK5L7nrq","platform":"MobileWeb","position":"top","ssp_id":5149,"dfp_unit":"\/98790044\/Kargo\/Kargo_Testing\/Kargo_Testing_Mobile_Web","dfp_size":"320x100|320x50|1x1|300x50|140x140|320x150|300x100|4x4|4x5|4x13|4x14|4x15|4x6|4x18|4x19|4x21|4x24|4x30|4x31|4x38|4x39","call_automatically":false,"tracker_ids":{"ad_tag_down_internal":"1.1NTMBinb9x0","ssp_request":"1.1NTMBiqCa10","ssp_success":"1.1NTMBise8e0","ssp_fail":"1.1NTMBitZTU0","dfp_request":"1.1NTMBivGow0","dfp_success":"1.1NTMBiAAw30","dfp_fail":"1.1NTMBiCs2T0","passback_request":"1.1NTMBiEdlL0"},"source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Kargo\/Kargo_Testing\/Kargo_Testing_Mobile_Web","sz":"320x100|320x50|1x1|300x50|140x140|320x150|300x100|4x4|4x5|4x13|4x14|4x15|4x6|4x18|4x19|4x21|4x24|4x30|4x31|4x38|4x39","position":"top"},"settings":[{"type":"SiteSkin","format":"SiteSkin","approved":{"direct":true,"pmp":true},"ignore_logo":true},{"type":"Hover","format":"Hover","approved":{"direct":true,"pmp":true},"branding":"kargo","wrapper_override":false,"wrapper_fill":true},{"type":"Hover","format":"Anchor","approved":{"direct":true,"pmp":true},"branding":"kargo","wrapper_override":false,"wrapper_fill":true},{"type":"Hover","format":"Breakout","approved":{"direct":true,"pmp":true},"preload_callback":"console.log('Vollaaaa');","branding":"kargo","wrapper_override":false,"wrapper_fill":true},{"type":"Hover","format":"Sidekick","approved":{"direct":true,"pmp":true},"branding":"kargo","wrapper_override":false,"horizontal_align":"right"},{"type":"Banner","format":"TopBanner","approved":{"direct":true,"pmp":true},"wrapper_id":"ad-banner"},{"type":"Lightning","format":"Lightning","approved":{"direct":true,"pmp":true},"hug_side":"bottom","wrapper_override":false},{"type":"Marquee","format":"Marquee","approved":{"direct":true,"pmp":true},"custom_css":".kargo-siteskin-logo-clone { display: none !important; }","hover":{"show_kargo_logo_tag":true,"branding":"kargo","has_wrapper_fill":true}},{"type":"Sideline","format":"Sideline","approved":{"direct":true,"pmp":true},"branding":"kargo","wrapper_override":false,"horizontal_align":"right"},{"type":"VideoAnchor","format":"VideoAnchor","approved":{"direct":true,"pmp":true},"branding":"advertisement","wrapper_override":false,"horizontal_align":"right"},{"type":"ABAAdhesionDisplay","format":"ABAAdhesionDisplay","approved":{"direct":false,"pmp":true},"branding":"kargo","wrapper_override":false,"wrapper_fill":true},{"type":"Breakaway","format":"Breakaway","approved":{"direct":true,"pmp":true},"preload_callback":"console.log('Vollaaaa');","branding":"kargo","wrapper_override":false,"wrapper_fill":true},{"type":"Wrapper","format":"Wrapper","approved":{"direct":true,"pmp":true},"branding":"kargo","wrapper_override":false,"wrapper_fill":false},{"type":"SwipeUp","format":"SwipeUp","approved":{"direct":true,"pmp":true},"branding":"kargo","wrapper_override":false}],"allow_responsive":true,"passback_format":"TopBanner"});Kargo.setAdConfig({"kargo_id":"_v97eEY6B7O","platform":"MobileWeb","position":"mid","ssp_id":5151,"dfp_unit":"\/98790044\/Kargo\/Kargo_Testing\/Kargo_Testing_Mobile_Web","dfp_size":"300x50|320x460|1x1|320x50|300x250|146x200|320x350|320x150|300x100|320x100|5x7|5x8|5x17|5x20|5x22|5x25|5x26|5x27|5x29|5x32","call_automatically":false,"tracker_ids":{"ad_tag_down_internal":"1.1NTMBkXF9c0","ssp_request":"1.1NTMBl1f2w0","ssp_success":"1.1NTMBl33Nm0","ssp_fail":"1.1NTMBl4U6i0","dfp_request":"1.1NTMBl6wyY0","dfp_success":"1.1NTMBl8bOv0","dfp_fail":"1.1NTMBl9YOx0","passback_request":"1.1NTMBlcipq0"},"source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Kargo\/Kargo_Testing\/Kargo_Testing_Mobile_Web","sz":"300x50|320x460|1x1|320x50|300x250|146x200|320x350|320x150|300x100|320x100|5x7|5x8|5x17|5x20|5x22|5x25|5x26|5x27|5x29|5x32","position":"mid"},"settings":[{"type":"Banner","format":"MiddleBanner","approved":{"direct":true,"pmp":true},"wrapper_id":"kargo-ad-middle","branding":"kargo","enable_320x50":true},{"type":"Banner","format":"InstantNative","approved":{"direct":true,"pmp":true}},{"type":"Spotlight","format":"Spotlight","approved":{"direct":true,"pmp":true},"custom_css":".kargo-spotlight-container { background-color: #FFFFFF !important;}","branding":"kargo"},{"type":"Banner","format":"Venti","approved":{"direct":true,"pmp":true},"branding":"mobilized"},{"type":"OutstreamVideo","format":"OutstreamVideo","approved":{"direct":true,"pmp":true},"enable_entry_animation":true,"branding":"mobilized","endcard_label":false},{"type":"KeyArt","format":"KeyArt","approved":{"direct":true,"pmp":true},"wrapper_id":"kargo-ad-middle","branding":"mobilized"},{"type":"NonVastOutstreamVideo","format":"NonVastOutstreamVideo","approved":{"direct":true,"pmp":true},"enable_entry_animation":true,"branding":"mobilized","endcard_label":false},{"type":"Banner","format":"ABADisplay","approved":{"direct":false,"pmp":true},"wrapper_id":"kargo-ad-middle","branding":"kargo","enable_320x50":true},{"type":"ABAVideo","format":"ABAVideo","approved":{"direct":false,"pmp":true},"enable_entry_animation":true,"branding":"mobilized","endcard_label":false},{"type":"Banner","format":"HighRise","approved":{"direct":true,"pmp":true},"branding":"mobilized"}],"allow_responsive":true});Kargo.setAdConfig({"kargo_id":"_nXgQ8gXZAI","platform":"MobileWeb","position":"bottom","ssp_id":5152,"dfp_unit":"\/98790044\/Kargo\/Kargo_Testing\/Kargo_Testing_Mobile_Web","dfp_size":"300x50|320x50|300x250|1x1|6x9","call_automatically":false,"tracker_ids":{"ad_tag_down_internal":"1.1NTMBle2nU0","ssp_request":"1.1NTMBlhiCu0","ssp_success":"1.1NTMBliTIx0","ssp_fail":"1.1NTMBlkQQf0","dfp_request":"1.1NTMBlmuG10","dfp_success":"1.1NTMBlo97W0","dfp_fail":"1.1NTMBlpKHa0","passback_request":"1.1NTMBlrIEh0"},"source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Kargo\/Kargo_Testing\/Kargo_Testing_Mobile_Web","sz":"300x50|320x50|300x250|1x1|6x9","position":"bottom"},"settings":{"type":"Banner","format":"BottomBanner","approved":{"direct":true,"pmp":true}},"allow_responsive":true});Kargo.setAdConfig({"kargo_id":"_vjvTYezJpv","platform":"Desktop","position":"top","ssp_id":10340,"dfp_unit":"\/98790044\/Kargo_Test_Mobile\/adsdemokargocom\/adsdemokargocom_Desktop","dfp_size":"970x90|1x1|970x250|4x37","call_automatically":false,"tracker_ids":{"ad_tag_down_internal":"1.1ZcGj7BHIQ3XaGZ","ssp_request":"1.1ZcGj7DWSN16R0c","ssp_success":"1.1ZcGj7EVhy3jrek","ssp_fail":"1.1ZcGj7G9X63vhVr","dfp_request":"1.1ZcGj7HzSoheIP","dfp_success":"1.1ZcGj7ID8G35Mcj","dfp_fail":"1.1ZcGj7JBlQ5vMgT","passback_request":"1.1ZcGj7Kxq31vVBY"},"source":{"ad_server":"DFP","ad_unit_id":"\/98790044\/Kargo_Test_Mobile\/adsdemokargocom\/adsdemokargocom_Desktop","sz":"970x90|1x1|970x250|4x37","position":"top"},"settings":{"type":"Banner","format":"LargeLeaderboard","approved":{"direct":false,"pmp":false}},"allow_responsive":true,"passback_format":"TopBanner"});
